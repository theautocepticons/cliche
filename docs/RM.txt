Manager Commands ..................................................................................................................................22
Show Commands
22
Show Manager Info
24
Show Manager Health
28
Manager Version
31
Show Manager Relay [Not Supported]
31
Show Manager LED
32
Show Manager Port State [Not Supported]
32
Show Manager Port Presence [Not Supported]
33
Show Manager Port Pairing [Not Supported]
33
Show Manager Port Inventory [Not Supported]
33
Show Manager Log
34
Show Manager LogRead
35
Show Manager Inventory
35
Show Manager scandevice
37
Show Manager Fru
39
Show Manager tftp Status [Not supported]
39
Show Manager NFS Status
40
Show Manager PowerMeter Alert
40
Show Manager PowerMeter Limit
41
Show Manager PowerMeter Throttletype
41
Show Manager PowerMeter Reading
41
Show Manager PowerMeter Multipolicy Active
42
Show Manager PowerMeter Multipolicy Single
42
Show Manager PowerMeter Multipolicy All
43
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 4

SW: RSCM CLI

3.2
Network Commands ...................................................................................................................................15
Show Network
16
Show Network interface
16
Show Network Ping
17
Show Network Traceroute
18
Set Network Interface Static (Set Static)
18
Set Network Interface Dhcp (Set DHCP)
19
Set Network Interface Enable
20
Set Network Interface Disable
20
Show Network route [Not Supported]
21
Set Network route [Not Supported]
21

Classified
as
Microsoft
43
Highly
43
Confidenti
44
al
44
45
45
46
46
47
48
48
49
50
50
51
51
51
52
53
53
53
57
57
58
58
59
60
62
62
63
64
65
66
66
66
66
67
67
68
68
69
69
70
70
71
71

Show Manager Power Meter Version [Not Supported]
Show Manager Power Reading
Show Manager Power Status
Show Manager NTP Status
Show Manager NTP Server
Show manager throttle local [Not Supported]
Show manager throttle count
Show manager throttle count debug
Show manager throttle row [Not Supported]
Show manager recovery (boot strap) [Not Supported]
Show Manager Session list
Show Manager Tftp list
Show Manager Time
Show Manager Type
Show Manager menu
Show Manager fwupdate status
Show Manager fwupdate list
Show manager powermeter calibration [Not Supported]
Show manager throttle count
Show manager pubsub config
Show manager userconfigs
Show manager serialstats
Show manager serialcheck
Show manager ssh status
Show manager healthmonitor log
Show manager iptables profiles
Show manager iptables rules
Show manager rsyslog
Show manager portmap
Show manager loglevel
Set Commands
User Commands
Set Manager LED On
Set Manager LED Off
Set Manager Log Export [Future]
Set Manager Log Clear
Set Manager Fru
Set Manager GCA Refresh
Set Manager Power Faults
Set Manager PowerMeter Alert
Set Manager PowerMeter Limit
Set Manager PowerMeter Multipolicy
Set Manager PowerMeter ClearMax
Set Manager PowerMeter ClearFaults
Set Manager TFTP Start[Not Supported]
Set Manager TFTP Stop[Not Supported]
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 5

SW: RSCM CLI

SW: RSCM CLI

Classified
as
Microsoft
72
Highly
72
Confidenti
73
al
73
73
74
74
74
75
75
75
76
76
77
78
79
79
80
80
81
81
82
82
83
83
84
84
85
86
86
87
88
89
89
90
91
91
92
92
93
93
94
94
95
95
96

Set Manager NFS Start
Set Manager NFS Stop
Set Manager NFS Enable
Set Manager NFS Disable
Set Manager NTP Start
Set Manager NTP Stop
Set Manager NTP Restart
Set Manager NTP Enable
Set Manager NTP Disable
Set Manager NTP Server
Set Manager Hostname
Set Manager throttle local [Not Supported]
Set Manager throttle count
Set Manager throttle row
Set Manager Recovery On [Not Supported]
Set Manager Recovery Off [Not Supported]
Set Manager Session Kill
Set Manager TFTP Get
Set Manager TFTP Put
Set Manager TFTP Delete
Set Manager SFTP Get
Set Manager Sftp Put
Set Manager Time
Set Manager menu On
Set Manager menu Off
Set Manager fwupdate
Set manager defaults
Set manager iptables add
Set manager iptables bulkadd
Set manager iptables delete
Set manager iptables enable
Set manager iptables disable
Set manager iptables restore
Show user info
Set User add
Set user update
Set User Delete
Set manager powermeter calibration [Not Supported]
Set manager throttle force enable
Set manager throttle count clear
Show manager throttle force
Set manager pubsub config
Set manager userconfigs
Set manager powercycle
Set manager loglevel
Set manager rsyslog
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 6

SW: RSCM CLI

SW: RSCM CLI

Classified
as
Microsoft
3.4
Server Commands ......................................................................................................................................96
Highly
Show Commands
96
Confidenti
Set Commands
97
al
Serial Commands
98
show system info
98
show system health
100
show system fru
102
show system state
103
show system presence
103
show system default power
104
show system power limit
104
show system power reading
105
show system power alert
105
show system power throttle
106
show system fpga health
107
show system fpga temp
108
show system fpga i2cversion
108
show system fpga assetinfo
109
show system boot
109
show system Log read
110
show system bios Config
111
show system bios Code
112
show system bios update
112
show system bmc update
113
show system cpld update
113
show system cpld2 update
114
show system scmcpld update
114
show system globalcpld update
115
show system tpm presence
115
show system nvme
116
show System Type
119
show system datasafe policy
119
show system datasafe trigger
120
show system led
120
show system file list
120
show system cerberus version
121
show system cerberus pfm version
122
show system cerberus pfm id
123
show system cerberus log
124
show system cerberus fpga version
125
show system user list
125
Show system gpu update (Only for C44AD)
126
Show system mcu update (Only for C44AD)
126
set system log clear
127
set system power alert
127
set system on
128
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 7

SW: RSCM CLI

SW: RSCM CLI

Classified
as
Microsoft
129
Highly
130
Confidenti
131
al
131
131
132
132
133
133
134
136
136
137
138
138
139
139
140
140
141
142
143
143
144
145
145
146
146
147
147
148
149
149
150
150
150
151

set system off
set system reset
set system led on
set system led off
set system default power on
set system default power off
set system power limit value
set system power limit on
set system power limit off
set system boot
set system bios config
set system bios update
set system bmc update
set system cpld update
set system cpld2 update
set system scmcpld update
set system globalcpld update
set system tpm presence
set system remotedrive mount
set system remotedrive unmount
set system file delete
set system file get
set system file put
set system cerberus update
set system cerberus pfm update
set system soc update
set system cerberus clear
set system user password
set system vreset
start serial session
stop serial session
Set system jtag start
Set system jtag stop
Show system pcieswitch update
Set system pcieswitch update
Set system gpu update (Only for C44AD)
Set system mcu update (Only for C44AD)

3.5
Help Commands .......................................................................................................................................151
Help
151
help show 152
help set 152
help start 153
help stop 153
help user 154
3.6

MTE Commands .......................................................................................................................................154

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 8

SW: RSCM CLI

SW: RSCM CLI

SW: RSCM CLI

Classified
as
Microsoft
4
Powershelf Commands...................................................................................................................................... 165
Highly
4.1
PSU Commands ........................................................................................................................................165 Confidenti
Show powershelf psu info
165 al
Show powershelf psu battery [RESERVED]
166
Show powershelf psu update
166
Show powershelf psu version
167
Show powershelf psu limits
167
Show powershelf psu reading
168
show powershelf psu faulthistory
169
show powershelf psu eventlog
170
show powershelf psu state [Report covers it]
172
show powershelf psu report
173
set powershelf psu alertmask enable / disabled [Not used]
174
set powershelf psu limit
174
set powershelf psu clear
175
Set powershelf psu battery [Not Used]
176
Set powershelf psu update
176
Set powershelf psu raw
177
Set powershelf psu recovery
177
Show powershelf psu slot config
179
Set powershelf psu slot config
179
show powershelf fru
179
4.2
C13 Commands ........................................................................................................................................182
4.2.1
Show powershelf c13 reading
182
4.2.2
Show powershelf c13 status
183
4.2.3
Show powershelf c13 Mux Address
184
4.2.4
Set powershelf c13 on
185
4.2.5
Set powershelf c13 off
185
4.2.6
Set powershelf c13 MUX Address
186
6.103.7
show powershelf c13 fru
186
4.3

Cooling Distribution Unit (CDU) Commands ..................................................................................................... 189
CDU Platforms

189

5.1
Fans ..........................................................................................................................................................189
5.1.1
Show cdu fan alarm
189
5.1.2
Show cdu fan info
190
5.1.3
Show cdu fan fru
192
5.1.4
Show cdu fan health
194
5.2
•
•
•

Pumps .......................................................................................................................................................195
Show cdu pump alarm
195
Show cdu pump info
197
Show cdu pump fru
199

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 9

SW: RSCM CLI

5

TODOs / Suggestions ................................................................................................................................188

SW: RSCM CLI

Classified
as
Microsoft
•
Show cdu pump health
200
Highly
5.3
Leak Detection..........................................................................................................................................200 Confidenti
5.3.1
Show cdu leak alarm
201 al
5.3.2
Show cdu leak info
202
5.3.3
Show cdu leak fru
202
5.3.4
Show cdu leak health
203
5.4
Sensors .....................................................................................................................................................203
5.4.1
Show cdu sensor health
204
5.4.2
Show cdu sensor info
212

5.6
CDU Controller..........................................................................................................................................231
5.6.1
Show cdu status
232
5.6.2
Show cdu info
233
5.6.3
Show cdu health
235
5.6.4
Show cdu fru
236
5.6.5
Set cdu fwupdate
236
5.6.6
Set cdu fwrecover
238
5.6.7
Show cdu erroralert
239
5.6.8
Set cdu sftp
239
7.107.8.4 Set cdu ntp
241
5.6.9
Start cdu serial session
241
5.6.10
Set cdu modbus
242
5.6.11
CDU System Log [FUTURE]
246
5.7
RPU Info....................................................................................................................................................248
5.7.1
Show cdu rackinfo
248
5.7.2
Show cdu rpuinfo
248
5.7.3
Show cdu sensorgatewayinfo
249
5.7.4
Show cdu valvegatewayinfo
250
5.8
Bootloader Commands .............................................................................................................................250
5.8.1
Set cdu recovery
251
5.8.2
Set cdu revokekey
251
5.8.3
Set cdu boot
252
5.8.4
Set cdu verify
252
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 10

SW: RSCM CLI

5.5
Control Commands ...................................................................................................................................213
5.5.1
Show cdu control sensor
213
5.5.2
Set cdu control sensor
215
5.5.3
Show cdu control param
217
5.5.4
Set cdu control param
218
5.5.5
Show cdu control limits
219
5.5.6
Set cdu control limits
220
5.5.7
Show cdu control metrics
223
5.5.8
Set cdu control metrics
223
5.5.9
Get CDU control Setpoints
224
5.5.10
Set cdu control setpoints
227

SW: RSCM CLI

5.8.5
5.8.6
5.8.7
5.8.8
5.8.9
5.8.10
5.8.11

7

Show cdu log
Show cdu keys
Show cdu blstatus
Show cdu attest
Set sblcmd enter
Set sblcmd exit
Set sblcmd send

Cerberus Commands ......................................................................................................................................... 257
6.1

show manager cerberus ...........................................................................................................................258

6.2

show manager cerberus version ..............................................................................................................258

6.3

show manager cerberus log .....................................................................................................................259

6.4

show manager cerberus pfm id ................................................................................................................260

6.5

show manager cerberus pfm version .......................................................................................................260

6.6

show manager cerberus deviceinfo ..........................................................................................................261

6.7

show manager cerberus certstate ............................................................................................................261

6.8

show manager cerberus pcd ....................................................................................................................262

6.9

show manager cerberus pcd platformid ..................................................................................................263

6.10

show manager cerberus pcd versionid .....................................................................................................263

6.11

Show manger cerberus utility ...................................................................................................................263

6.12

set manager cerberus...............................................................................................................................264

6.13

264

6.14

set manager cerberus clear ......................................................................................................................265

6.15

set manager cerberus update ..................................................................................................................265

6.16

set manager cerberus pfm update ...........................................................................................................266

6.17

set manager cerberus cmd .......................................................................................................................266

6.18

set manager cerberus pcd update ............................................................................................................267

CPLD Commands ............................................................................................................................................... 269
7.1

Show manager cpld ..................................................................................................................................269

7.2

show manager cpld version ......................................................................................................................270

Completion Code: Success .....................................................................................................................................270
7.3

show manager cpld usercode ...................................................................................................................270

7.4

show manager cpld readauth ..................................................................................................................271

7.5

set manager cpld ......................................................................................................................................271

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 11

SW: RSCM CLI

6

Classified
as
Microsoft
253
Highly
254
Confidenti
254
al
255
256
256
257

SW: RSCM CLI

Classified
as
Microsoft
7.6
set manager cpld update .........................................................................................................................272
Highly
Confidenti
8
Inter-Rack Commands ....................................................................................................................................... 274
al
8.1
Set interrack wirecheck ............................................................................................................................274

10

Show interrack wirecheck.........................................................................................................................275

8.3

Set interrack zoneshutdown .....................................................................................................................275

8.4

Show interrack zoneshutdown .................................................................................................................277

8.5

Set interrack zoneready............................................................................................................................277

8.6

Show interrack zoneready ........................................................................................................................279

8.7

set interrack zoneloopreset ......................................................................................................................279

Smart IT Rack Commands ................................................................................................................................. 280
9.1

show smrack health .................................................................................................................................281

9.2

show smrack status ..................................................................................................................................282

9.3

set smrack open .......................................................................................................................................282

9.4

set smrack close .......................................................................................................................................283

9.5

show smrack config flowrate ...................................................................................................................284

9.6

set smrack config flowrate .......................................................................................................................285

9.7

show smrack config pressure ...................................................................................................................286

9.8

set smrack config pressure .......................................................................................................................287

9.9

set smrack config reset .............................................................................................................................288

9.10

set smrack config custom .........................................................................................................................289

9.11

set smrack config addrange .....................................................................................................................290

9.12

set smrack config removerange ...............................................................................................................292

9.13

Set valve modbus .....................................................................................................................................292

9.14

show valve fwversion ...............................................................................................................................294

9.15

show valve info .........................................................................................................................................295

9.16

set smrack fwupdate ................................................................................................................................295

PCU Command .................................................................................................................................................. 296
10.1

show pcu info ...........................................................................................................................................296

10.2

show pcu reading .....................................................................................................................................297

10.3

show pcu status ........................................................................................................................................298

10.4

show pcu limits .........................................................................................................................................299

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 12

SW: RSCM CLI

9

8.2

SW: RSCM CLI

10.7

Classified
as
Microsoft
show pcu eventlog....................................................................................................................................299
Highly
show pcu update ......................................................................................................................................300 Confidenti
al
show pcu state .........................................................................................................................................301

10.8

show pcu chargelog .................................................................................................................................301

10.9

set pcu raw read .......................................................................................................................................302

10.10

set pcu raw write ......................................................................................................................................303

10.11

set pcu limits ............................................................................................................................................303

10.12

set pcu update ..........................................................................................................................................304

10.13

set pcu fanspeed ......................................................................................................................................304

10.14

set pcu clear .............................................................................................................................................305

10.5
10.6

11

NVSwitch Commands ........................................................................................................................................ 306
11.1

show nvswitch status ...............................................................................................................................306

11.2

set nvswitch on .........................................................................................................................................306

11.3

set nvswitch off ........................................................................................................................................307

12

Appendix: Commonly Used of Acronyms .......................................................................................................... 307

13

Common CLI Uses .............................................................................................................................................. 310
Setting up Rsyslog streaming for RSCM and BMC ....................................................................................310

SW: RSCM CLI

13.1

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 13

SW: RSCM CLI

1 Overview of Rack-Secure Control Module(R-SCM)
Command-Line Interface Specification

Classified
as
Microsoft
Highly
Confidenti
al

This document, “Project Adams- Software: R-SCM Command-Line Interface,” describes the commandline interface (CLI) that can be used to manage the Project Adams systems. Systems management in the
OCS system is designed to present a consistent, optimized interface. A R-SCM provides the front end
through an applications interface (RESTful web API) for automated management and the command-line
interface for manual management.

2 Command Line Interface

SW: RSCM CLI

The command line interface is accessible over Serial (UART Interface) and SSH (Ethernet Interface).
Once a user connects to the Serial or SSH interfaces they will be presented with a logon prompt. After
logging into the console, the following section describes the commands a user can execute.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 14

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

3 R-SCM Rack Manager Service
3.1Show Version
Description:
This command shows the Manager version
Syntax:
RScmCli# show/sh version

Sample usage:
RScmCli# show version

Sample output:
Package version
Rootfs version
U-Boot version
Kernel version
Devicetree version

3.2Network

1.17.4
1.17.4
2021.01
1.17.4
1.17.4

Completion Code: Success

Commands

show network
show network interface
show network ping
show network traceroute
show network route
set network static
set network dhcp
set network interface enable
set network interface disable
set network route

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•

:
:
:
:
:

Page | 15

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show Network
Description:
This command shows the Manager physical interfaces list.
Syntax:
RScmCli # show/sh network

Sample usage:
To get all the network configuration details for the manager, use the following command:
RScmCli #show network

Sample output:
RScmCli# show network
Interfaces_count: 2
Interfaces_list:
1: eth0
2: eth1
Completion Code: Success
Returns all the available interfaces

SW: RSCM CLI

Note: eth1 interface is not supported for drop-1

Show Network interface
Description:
This command shows the Manager specific interface details.
Syntax:
RScmCli# show/sh network interafce -i <interface>{eth0 }
Sample usage:
To get the network configuration details for the rack or row, use the following command:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 16

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# show network interface -i <eth0>

Sample output:
RScmCli# show network interface -i eth0
Health: Ok
IPv4Addresses:
Address: 172.29.60.222
AddressOrigin: DHCP
Gateway: 172.29.60.1
SubnetMask: 255.255.252.0
IPv6Addresses:
AddressOrigin: DHCP
Gateway:
GlobalAddress:
LinkLocalAddress: fe80::627:28ff:feff:f6c6
PrefixLength:
Id: eth0
LinkStatus: LinkUp
MACAddress: 04:27:28:FF:F6:C6
State: Up
Completion Code: Success

Show Network Ping
Description:
This command will test network connectivity to another host on the network.
Syntax:
RScmCli# show network ping -h
usage: show network ping [-h] [-c COUNT] [-w TIMEOUT] -a ADDRESS
optional arguments:
-h, --help show this help message and exit
-c COUNT
Send a specific number of ping requsets.
-w TIMEOUT Timeout to wait for the first response.
SW: RSCM CLI

required arguments:
-a ADDRESS The IP address of the host to ping
Sample usage:
RScmCli# show network ping -a 10.57.195.30 -c 4

Sample output:
PING 10.57.195.30 (10.57.195.30): 56 data bytes
64 bytes from 10.57.195.30: seq=0 ttl=64 time=0.954 ms
64 bytes from 10.57.195.30: seq=1 ttl=64 time=0.453 ms
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 17

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

64 bytes from 10.57.195.30: seq=2 ttl=64 time=0.451 ms
64 bytes from 10.57.195.30: seq=3 ttl=64 time=0.480 ms
--- 10.57.195.30 ping statistics --4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max = 0.451/0.584/0.954 ms

Notes:
Use CTRL+C to stop the ping command.

Show Network Traceroute
Description:
Discovers the route to a remote host on the network.
Syntax:
RScmCli# show/sh network traceroute [-u] -a <address>
-u Use UDP packets instead of ICMP packets to discover the route.
-a The IP address of the host to trace.

Sample usage:
RScmCli# show network traceroute -a 192.168.1.1

Sample output:

SW: RSCM CLI

traceroute to 172.29.60.222 (172.29.60.222), 30 hops max, 46 byte
packets
1 rscm-hs-sr2-m4010 (172.29.60.222) 0.048 ms 0.036 ms 0.031 ms
Notes:
In order for UDP traceroute to work, the firewall on the rack manager must be disabled.

Set Network Interface Static (Set Static)
Description:
This command sets static network properties to the Manager.
Syntax:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 18

SW: RSCM CLI

RScmCli# set network static -i {eth0,eth1} -a ADDRESS -s Subnet/Prefix
[-g GATEWAY] [-b BROADCAST] [-v {6}]

optional arguments:
-h, --help
-g GATEWAY
-b BROADCAST
-v {6}
required arguments:
-i {eth0,eth1}
-a ADDRESS
-s Subnet/Prefix
ipv6.

Classified
as
Microsoft
Highly
Confidenti
al

show this help message and exit
To assign a gateway address to an interface.
To assign a broadcast address to an interface.
Set static IPv6 mode.

Interface name.
The IP address to be assigned to this interface.
Input subnet mask for ipv4 or prefix length for

Sample usage:
To set the network configuration for the rack, use the following command:
RScmCli# set network static -i eth1 -a 192.168.1.12 -s 255.255.255.0 -g
192.168.1.1
RScmCli# set network static -v 6 -i eth0 -a fd26:164:a741:aabb:2:2:2:2
-s 64 -g fd26:164:a741:aabb::1

Sample output:
Completion Code: Success
The command will execute successfully, and there will be intermittent connection loss to manager
because of the network cofig update.

Set Network Interface Dhcp (Set DHCP)

Syntax:
RScmCli# set network dhcp -i {eth0} [-v {6}] [-g GATEWAY]
optional arguments:
-h, --help
show this help message and exit
-v {6}
Set DHCPv6 client mode.
-g GATEWAY, --gateway GATEWAY
To assign a broadcast address to an interface.
required arguments:
-i {eth0}

Interface name.

Sample usage:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 19

SW: RSCM CLI

Description:
This command sets dhcp to the Manager.

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

To set the network configuration for the manager, use the following command:
RScmCli# set network dhcp -i eth0
RScmCli# set network dhcp -i eth0 -v 6

Sample output:
Completion Code: Success
The command will execute successfully, and there will be intermittent connection loss to manager
because of the network configuration. update.

Set Network Interface Enable
Description:
This command sets disable interface.
Syntax:
RScmCli# set network enable -i <interface name>
optional arguments:
-h, --help

show this help message and exit

required arguments:
-i {eth0,eth1}

Interface name.

Sample usage:
To set the network configuration for the manager, use the following command:
RScmCli# set network enable -i eth0
Sample output:

The command will execute successfully, and there will be intermittent connection loss to manager
because of the network cofig update.

Set Network Interface Disable
Description:
This command disables interface.
Syntax:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 20

SW: RSCM CLI

Completion Code: Success

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set network disable -i <interface name>

optional arguments:
-h, --help

show this help message and exit

required arguments:
-i {eth0,eth1}

Interface name.

Sample usage:
To set the network configuration for the manager, use the following command:
RScmCli# set network disable -i eth0
Sample output:
Completion Code: Success

The command will execute successfully, and there will be intermittent connection loss to manager

Show Network route [Not Supported]
Description:
o

Display the current management network and gateway.

Syntax:
RScmCli# show network route
[-h]
-h - help; display the correct syntax
Sample usage:
To set the network configuration for the manager, use the following command:
RScmCli# show network route
Sample output:
SW: RSCM CLI

Completion Code : Success

Set Network route [Not Supported]
Description:
Set the static route for accessing the management network
Syntax:
RScmCli# set network route -g GATEWAY -n SUBNET [-v {6}]
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 21

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help show this help message and exit
required arguments:
-g GATEWAY The IP address for the gateway of the management network.
-n SUBNET
The netmask of the management network as either a dotted
quad or
number of net bits.
-v {6}
Set route for ipv6.
Sample usage:
To set the network configuration for the manager, use the following command:
RScmCli# set network route -g <ip-address> -n <255.255.255.0>
RScmCli# set network route -v 6 -g fd26:164:a741:aabb::1 -n 64

Sample output:
Completion Code: Success

3.3Manager

Commands
Commented [BI1]: Why is 'show manager portmap' not in this
list?

•
•
•
•

show manager info
show manager health
show manager Version
show manager relay

•
•
•
•
•
•
•
•

show manager led
Show manager port state
Show manager port presence
Show manager port pairing
Show manager port inventory
Show manager log
Show Manager LogRead
Show manager inventory

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Show Commands

Page | 22

SW: RSCM CLI

Show manager scandevice
show manager fru
Show Manager tftp Status [Not supported]
show manager powermeter limit
show manager powermeter reading
show manager powermeter multipolicy active
show manager powermeter multipolicy single
show manager powermeter multipolicy all
show manager powermeter version
show manager power reading
show manager power status
show manager ntp status
show manager ntp server
show manager throttle local
show manager throttle count
Show manager throttle row (ROW manager command)
show manager recovery (boot strap : Row Manager Command)
show manager session list
show manager tftp list
Show Manager Time
Show manager Type
Show manager menu
Show manager fwupdate status
Show manager fwupdate list
Show manager powermeter calibration
Show manager throttle count
Show manager pubsub config
Show manager userconfigs
Show manager serialstats
Show manager serialcheck
Show manager ssh status
Show manager loglevel

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Classified
as
Microsoft
Highly
Confidenti
al

Page | 23

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show Manager Info
Description:
This command gets status information about manager components including the following:
-

-

Servers
o GUID, presence, powerstate etc.,
Power supplies
o Information (for example, power draw, input voltage etc.,) Hot Swap Controllers
(HSC) that manage power to manager equipment.
Manager
o MAC/IP address of the network interfaces, and version information etc.,

Syntax:
RScmCli# show manager info [-s] [-p] [-m] [-h]
-s – Show information about servers
-p – Show information about power supplies
-m – Show manager information
-h – Help, display the correct syntax
Sample usage:
RScmCli# show manager info → Returns all manager info
RScmCli# show manager info -s → Returns only server details [Not
supported]

Commented [BI2]: If a command works, is that not necessarily
why it is marked [Not supported]?
'show manager info -s' appears to work on RSCM.

RScmCli# show manager info -p → Returns only power supply details
RScmCli# show manager info -m → Returns only manager details

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Sample output:
RScmCli# show manager info
Current Time: 05:10:02
Manager Uptime: 22 days 1:20
PSU Info:
12V HSC Input-Voltage: 12.2
12V HSC Power: 3.82
12V HSC Status: Alert{0}
48V HSC Input-Voltage: 51.73
48V HSC Power: 4.57
48V HSC Status: Alert{0}
RSCM Controller:
Asset Info:

Page | 24

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

AssetTag: N/A
FruId: v1.0
Manufacturer: Microsoft
Name: M1202846-001
SerialNumber: P914742920315041
CPLD Version: V2.7
FW Version: 1.22.2
Host Name: rscm-hs-sr2-m4010
Network:
IP Address: 10.57.195.35
Mac Address: 04:27:29:00:08:E2
Status:
Health: OK
LED Status: OFF
Power: ON
Temperature:
Humidity: 18.23 RH (ideal range 20-80 %)
Temperature: 39.09 C (ideal range 0-70 C)
Type: 3OU_POWER_SHELF
Server Info:
| # | Port State | Present |
Type
|
GUID
| Completion Code

|

| 1
|
--

|

|

--

|

False

--

--

| DeviceNotPresent

| 2 |
On
|
True
04272826-ed912
88a-2e10-104284eae50a |
| 3
|
--

|

--

|

| 4
|
--

|

--

|

| 5
|
--

|

--

|

False

|

Server

| 04:27:28:26:ED:91

|

Success
|

--

|

--

|

--

|

--

False

|

--

SW: RSCM CLI

| DeviceNotPresent

| DeviceNotPresent
False

|

--

| DeviceNotPresent

| 6 |
On
|
True
04272826-08912
88a-2e10-c1456c2b4fd6 |
| 7
|

|

Mac Address

|

--

|

False

|

Server

| 04:27:28:26:08:91

Success
|

--

|

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

|

--

Page | 25

SW: RSCM CLI

--

Classified
as
Microsoft
Highly
Confidenti
al

| DeviceNotPresent

| 8
|
--

|

--

|

| 9
|
--

|

--

|

False

|

--

|

--

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent

| 10 |
On
|
True
04272826-09012
88a-2e10-0842bafc2f50 |
| 11 |
|
--

--

|

| 12 |
|
--

--

|

| 13 |
|
--

--

|

False

|

Server

| 04:27:28:26:09:01

|

Success
|

--

|

--

|

--

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent

| 14 |
On
|
True
04272826-37e92
88a-3d10-0bf2112df467 |
| 15 |
|
--

--

|

| 16 |
|
--

--

|

| 17 |
|
--

--

|

| 18 |
|
--

--

|

| 19 |
|
--

--

|

| 20 |
|
--

--

|

| 21 |
|
--

--

|

| 22 |
|
--

--

|

| 23 |

--

|

False

|

Server

| 04:27:28:26:37:E9

|

Success
|

--

|

--

|

--

|

--

|

--

|

--

|

--

|

--

|

--

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

False

|

--

SW: RSCM CLI

| DeviceNotPresent

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 26

SW: RSCM CLI

|
--

Classified
as
Microsoft
Highly
Confidenti
al

| DeviceNotPresent

| 24 |
|
--

--

|

| 25 |
|
--

--

|

| 26 |
|
--

--

|

False

|

--

|

--

|

--

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent

| 27 |
On
|
True
04272826-09092
88a-2e10-0842afd3d454 |
| 28 |
|
--

--

|

| 29 |
|
--

--

|

| 30 |
|
--

--

|

False

|

Server

| 04:27:28:26:09:09

|

Success
|

--

|

--

|

--

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent

| 31 |
On
|
True
04272826-ed092
88a-2e10-92435c71a6c8 |
| 32 |
|
--

--

|

| 33 |
|
--

--

|

| 34 |
|
--

--

|

False

|

Server

| 04:27:28:26:ED:09

|

Success
|

--

|

--

|

--

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| 36 |
|
--

--

|

| 37 |
|
--

--

|

| 38 |
|

--

|

False

|

Server

| 04:27:28:26:08:69

SW: RSCM CLI

| DeviceNotPresent

| 35 |
On
|
True
04272826-08692
88a-2e10-084263e797ee |

|

Success
|

--

|

--

|

--

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 27

SW: RSCM CLI

--

Classified
as
Microsoft
Highly
Confidenti
al

| DeviceNotPresent

| 39 |
On
|
True
04272826-eba92
88a-2e10-0842b05f4b59 |
| 40 |
|
--

--

|

| 41 |
|
--

--

|

| 42 |
|
--

--

|

| 43 |
|
--

--

|

| 44 |
|
--

--

|

| 45 |
|
--

--

|

| 46 |
|
--

--

|

| 47 |
|
--

--

|

| 48 |
|
--

--

|

False

|

Server

| 04:27:28:26:EB:A9

|

Success
|

--

|

--

|

--

|

--

|

--

|

--

|

--

|

--

|

--

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent
False

|

--

| DeviceNotPresent

Completion Code: Success
RScmCli#

Description:
This command gets health status for servers, power supplies, memory usage and temperature etc.
Syntax:
RScmCli# show manager health [-s] [-p] [-m] [-h]
-b – Show server health
-p – Show PSU health
-m – Show memory Usage
-h – Help, display the correct syntax
Sample usage:
To get information manager health execute the following command:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 28

SW: RSCM CLI

Show Manager Health

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# show manager health → Returns all details
RScmCli# show manager health -s → Returns server health details
RScmCli# show manager health -p → Returns power health details
RScmCli# show manager health -m → Returns memory details

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Sample output:
RScmCli# show man health
Current Time: 03:37:21
LED Status: OFF
Last Reset Reason: Warm
Manager Uptime: 13:27
Memory Usage:
Buffers: 509204 KB
Free Memory: 897016 KB
Shared: 148964 KB
Total Memory: 1944468 KB
Used Memory: 538248 KB
PSU Health:
12V HSC Input-Voltage: 12.19
12V HSC Power: 5.45
12V HSC Status: Alert{0}
48V HSC Input-Voltage: 51.73
48V HSC Power: 4.86
48V HSC Status: Alert{0}
Sensor Reading:
Humidity: 20.24 RH (ideal range 20-80 %)
Temperature: 38.84 C (ideal range 0-70 C)
eMMC Reading:
FirmwareVersion: 02
Health: OK
MLC: 0%-10% MLC device life time used
Pre_EOL: eMMC Pre EOL is Normal
SLC: 0%-10% SLC device life time used
System State:
| Port Id | Port State | Present |
Type
|
1
|
-| False
|
-|
2
|
On
|
True
|
Server
|
3
|
-| False
|
-|
4
|
-| False
|
--

Page | 29

SW: RSCM CLI

5

|

--

|

False

|

--

|

6

|

On

|

True

|

Server

|

7

|

--

|

False

|

--

|

8

|

--

|

False

|

--

|

9

|

--

|

False

|

--

|

10

|

On

|

True

|

Server

|

11

|

--

|

False

|

--

|

12

|

--

|

False

|

--

|

13

|

--

|

False

|

--

|

14

|

On

|

True

|

Server

|

15

|

--

|

False

|

--

|

16

|

--

|

False

|

--

|

17

|

--

|

False

|

--

|

18

|

--

|

False

|

--

|

19

|

--

|

False

|

--

|

20

|

--

|

False

|

--

|

21

|

--

|

False

|

--

|

22

|

--

|

False

|

--

|

23

|

--

|

False

|

--

|

24

|

--

|

False

|

--

|

25

|

--

|

False

|

--

|

26

|

--

|

False

|

--

|

27

|

On

|

True

|

Server

|

28

|

--

|

False

|

--

|

29

|

--

|

False

|

--

|

30

|

--

|

False

|

--

|

31

|

On

|

True

|

Server

|

32

|

--

|

False

|

--

|

33

|

--

|

False

|

--

|

34

|

--

|

False

|

--

|

35

|

On

|

True

|

Server

|

36

|

--

|

False

|

--

|

37

|

--

|

False

|

--

|

38

|

--

|

False

|

--

|

39

|

On

|

True

|

Server

|

40

|

--

|

False

|

--

|

41

|

--

|

False

|

--

|

42

|

--

|

False

|

--

|

43

|

--

|

False

|

--

|

44

|

--

|

False

|

--

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

|

Classified
as
Microsoft
Highly
Confidenti
al

Page | 30

SW: RSCM CLI

|

45

|

--

|

False

|

--

|

46

|

--

|

False

|

--

|

47

|

--

|

False

|

--

|

48

|

--

|

False

|

--

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

Manager Version
Description:
This command shows manager version.
Syntax:
RScmCli# show manager version

Sample output:
DeviceTree: 1.17.4
Kernel: 1.17.4
Package: 1.17.4
Rootfs: 1.17.4
uboot: 2021.01
Completion Code: Success

Show Manager Relay [Not Supported]

SW: RSCM CLI

Description:
This command gets the power status of the manager (whether ON or OFF) .
Syntax:
RScmCli# show manager relay

Sample output:
usage: show manager [-h]

...

show manager: error: argument : invalid choice: 'relay' (choose from
'version', 'type', 'fwupdate', 'pubsub', 'dns', 'userconfigs', 'cert',
'acl', 'rsyslog', 'telemetry', 'tftp', 'menu', 'healthmonitor', 'iptables',
'scandevice', 'time', 'health', 'nfs', 'session', 'led', 'log', 'logread',
'ntp', 'power', 'throttle', 'ssh', 'serialstats', 'serialcheck', 'port',

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 31

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

'powermeter', 'info', 'inventory', 'fru', 'cpld', 'cerberus')

Show Manager LED
Description:
This command gets the status of the manager LED (whether ON or OFF) .
Syntax:
RScmCli# show manager led

Sample output:
Manager LED Status: OFF
Completion Code: Success

Show Manager Port State [Not Supported]
Description:
This command gets the status of the port (whether ON or OFF). The command also returns the status
of data save operation (NVDIMM or non-PLP PCIe) using “DatasaveStatus” and also reports the
remaining save time in seconds using “DatasaveRemainingTime” when save is pending.
Valid values for DatasaveStatus
Unknown
NotApplicable
SaveNotStarted
SavePending
SaveCompleted
DatasaveRemainingTime is reported in seconds when DatasaveStatus is SavePending.

SW: RSCM CLI

Syntax:

RScmCli# show manager port state -i <port -id>

Sample output:
[ Save is not pending ]
RScmCli# show manager port state -i 2
DatasaveStatus: SaveNotStarted
Port State: On
Completion Code: Success
[ Save operation is pending ]
RScmCli# show manager port state -i 2
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 32

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

DatasaveStatus: Unknown
Port State: Off
Completion Code: Success

Show Manager Port Presence [Not Supported]
Description:
This command shows port presence state (whether True or False).
Syntax:

RScmCli# show manager port presence -i <port -id>

Sample output:
Completion Code : Success
Port Presence: True

Show Manager Port Pairing [Not Supported]
Description:
This command shows power control pairing.
Syntax:
RScmCli# show manager port pairing -i <port -id>

Sample output:

Completion Code: Success
SW: RSCM CLI

Child Ports:
Child To Parent On Delay:
Off To On Delay:
Parent Ports:
Parent To Child Off Delay:

Show Manager Port Inventory [Not Supported]
Description:
This command shows port Invenory. Chassis(J2010….) Expander details.
Syntax:
RScmCli# show manager port inventory -i <port -id>

Sample output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 33

SW: RSCM CLI

RScmCli# show manager port inventory -i 5
5:
Expanders Information: Failed to get SAS controller IDs for
blade 5
GUID: 0098039B-994D-4F83-E941-2F42607384AF
MACAddress: 98:03:9B:99:4D:3
Completion Code: Success

Classified
as
Microsoft
Highly
Confidenti
al

Show Manager Log
Description:
This command prints rackmanager telemetery log contents.
Syntax:
RScmCli# show manager log

USAGE:
RScmCli# show manager log -h
usage: show manager log [-h] [-b STARTTIME] [-e ENDTIME] [-s STARTID]
[-f ENDID] [-l LOGLEVEL] [-c COMPONENT] [-i
DEVICEID]
[-p PORTID]

show this help message and exit
Start time to filter by
End time to filter by
Start message ID to filter by
End message ID to filter by
Log level to filter by {0-2}
Component to filter by {0-5}
SW: RSCM CLI

optional arguments:
-h, --help
-b STARTTIME
-e ENDTIME
-s STARTID
-f ENDID
-l LOGLEVEL
-c COMPONENT
-i DEVICEID
-p PORTID

Device ID to filter by {1-48}
Port ID to filter by {1-48}

Sample output:
Child Ports:
Parent Ports:
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 34

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show Manager LogRead
Description:
This command prints system log contents.
Syntax:
RScmCli# show manager logread

USAGE:
show manager logread [-h] -f FILENAME [-g [GREPSTR [GREPSTR ...]]] [-l
NUMLINES]
optional arguments:
-h, --help

show this help message and exit

-f FILENAME

log file name to read

-g [GREPSTR [GREPSTR ...]]
grep the string in log file
-l NUMLINES

Display last n lines from log file

Sample output:
show manager logread -f ocsevent.log -g Insufficient
Level: INFO Time: 2024-12-26 09:25:25.575117 Thread: 0x8c3fa1e0 Process:
886 manage_interrack.py - Shutdown condition #2 enabled & occurred 1
times. Insufficient occurrences for shutdown or shutdown disabled.
Completion Code = Success

Show Manager Inventory
SW: RSCM CLI

Description:
This command shows manager inventory details.
Syntax:
RScmCli# show manager inventory

Sample output:
RScmCli# show manager inventory

| SW Port | Port State | Present
| Completion Code

|

Slot Id

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

|

MAC1

Page | 35

SW: RSCM CLI

1
|
-DeviceNotPresent
2
|
-DeviceNotPresent
3
|
-DeviceNotPresent
4
|
-DeviceNotPresent
5
|
On
Success
6
|
On
Success
7
|
-DeviceNotPresent
8
|
-DeviceNotPresent
9
|
-DeviceNotPresent
10
|
-DeviceNotPresent
11
|
-DeviceNotPresent
12
|
-DeviceNotPresent
13
|
-DeviceNotPresent
14
|
-DeviceNotPresent
15
|
On
Failure
16
|
-DeviceNotPresent
17
|
On
Success
18
|
-DeviceNotPresent
19
|
-DeviceNotPresent
20
|
-DeviceNotPresent
21
|
-DeviceNotPresent
22
|
-DeviceNotPresent
23
|
-DeviceNotPresent
24
|
-DeviceNotPresent
25
|
-DeviceNotPresent
26
|
-DeviceNotPresent

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

True

|

--

| 98:03:9B:99:4D:3A

|

True

|

--

| 84:57:33:6A:12:AC

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

True

|

--

|

Failure

|

False

|

--

|

--

|

True

|

--

| 04:27:28:1F:3B:A9

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|

Classified
as
Microsoft
Highly
Confidenti
al

Page | 36

SW: RSCM CLI

27
|
-DeviceNotPresent
28
|
-DeviceNotPresent
29
|
-DeviceNotPresent
30
|
-DeviceNotPresent
31
|
-DeviceNotPresent
32
|
-DeviceNotPresent
33
|
-DeviceNotPresent
34
|
-DeviceNotPresent
35
|
-DeviceNotPresent
36
|
-DeviceNotPresent
37
|
-DeviceNotPresent
38
|
-DeviceNotPresent
39
|
-DeviceNotPresent
40
|
-DeviceNotPresent
41
|
-DeviceNotPresent
42
|
-DeviceNotPresent
43
|
-DeviceNotPresent
44
|
-DeviceNotPresent
45
|
-DeviceNotPresent
46
|
-DeviceNotPresent
47
|
-DeviceNotPresent
48
|
-DeviceNotPresent

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

|

False

|

--

|

--

SW: RSCM CLI

|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|
|

Classified
as
Microsoft
Highly
Confidenti
al

Show Manager scandevice
Description:
This command displays rack manager system information.
Syntax:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 37

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# show manager scandevice
Sample Output:
Version Information:
-------------------------------------------------------Microsoft RSCM software version summary
Package version

: 1.22.2

Rootfs version

: 1.22.2

U-Boot version

: 2021.01

Kernel version

: 1.22.2

Devicetree version : 1.22.2

--------------------------------------------------------

Network Interfaces:
# /etc/network/interfaces -- configuration file for ifup(8), ifdown(8)
# The loopback interface
auto lo
…
…
Routing Table:
10.57.195.0/24 dev eth0 scope link
172.17.0.0/24 dev eth1 scope link
::1 dev lo

SW: RSCM CLI

default via 10.57.195.1 dev eth0
src 10.57.195.35
src 172.17.0.85

metric 256

2001:4898:4000:48d:3df9:cb14:c85a:79c2 dev eth0
2001:4898:4000:48d::/64 dev eth0
fe80::/64 dev eth1

metric 256

metric 256

multicast ff00::/8 dev eth1

metric 256

multicast ff00::/8 dev eth0

metric 256

default via fe80::c01:2ff:fe10:1010 dev eth0
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

metric 256

expires 0sec

metric 1024

expires 0sec
Page | 38

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

Show Manager Fru
Description:
This command gets the FRU information of the R-SCM board .
Syntax:
RScmCli# show manager fru
Sample usage:
To get the FRU information for the manager, use the following command:
RScmCli# show manager fru → returns MB board fru deatails

SW: RSCM CLI

Sample output:
RScmCli# show manager fru
Board Area Format Version: 01
Board Area Length: 10
Board Area Offset: 8
Board Build: PV
Board Language Code: 0
Board Manufacturer: Microsoft
Board Part Number: M1202846-001
Board Product Name: M4010
Board Serial Number: ___CBAM1A002357#
Board Version: NA
Common Header: 1
Common Header Checksum: 243
FRU File ID: v1.0
Mfg. Date / Time: Tue Jul 23 18:49:00 2024
Product Area Format Version: 01
Product Area Length: 11
Product Area Offset: 88
Product Assettag: N/A
Product Build: PV
Product FRU File ID: v1.0
Product Language Code: 0
Product Manufacturer: Microsoft
Product Name: M4010
Product Part/Model Number: M1199147-001
Product Serial Number: P914742920315041
Sub Product: N/A
Completion Code: Success

Show Manager tftp Status [Not supported]
Description:
This command gets the status of the TFTP server .

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 39

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# show manager tftp status

Sample output:
RScmCli# sh manager tftp status
TFTPService: Disabled
TFTPStatus: Stopped
Completion Code: Success

Show Manager NFS Status
Description:
This command gets the status of the NFS server .
Syntax:
RScmCli# show manager nfs status

Sample output:
RScmCli# sh manager nfs status
NFSService: Enabled
NFSStatus: Running
Completion Code: Success

Show Manager PowerMeter Alert
Description:
This command shows rack’s alert policy.

SW: RSCM CLI

Syntax:
RScmCli# show manager powermeter alert [-h]
Sample output:
RScmCli# show manager powermeter alert
AlertLimitInWatts: 66000
IsAlertActive: False
IsAlertEnabled: False
IsDcThrottleActive: False
IsDcThrottleEnabled: False
PowerDrawnInWatts: 45.0
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 40

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show Manager PowerMeter Limit
Description: This command shows racks’ power limit policy.
Syntax:
RScmCli# show manager powermeter limit [-h]

Sample output:
RScmCli# show manager powermeter limit
AlertLimitInWatts: 66000
Completion Code: Success

Show Manager PowerMeter Throttletype
Description: This command shows the powershelf's thorttle mode.
Syntax:
RScmCli# show manager powermeter throttletype [-h]

Sample output:
RScmCli# show manager powermeter throttletype
ThrottleType: voltage-droop
Completion Code: Success

Show Manager PowerMeter Reading
Description:
This command shows rack’s power readings. Also included are voltage/current readings, power factor
and real power draw readings.
SW: RSCM CLI

Syntax:
RScmCli# show manager powermeter reading [-h]
SampleOutput:
RScmCli# show manager powermeter reading
BottomPlaneInputCurrentInAmperes: 1.2734375
BottomPlaneInputPowerDrawnInWatts: 67.0
BottomPlaneOutputCurrentInAmperes: 0.4609375
BottomPlaneOutputPowerDrawnInWatts: 22.0
ForceThrottleActive: 0

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 41

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

ForceThrottleCount: 0
InputPowerC13InWatts: 0.0
MaxPowerInWatts: 48.0
ThrottleCount: 0
TopPlaneInputCurrentInAmperes: 2.171875
TopPlaneInputPowerDrawnInWatts: 106.0
TopPlaneOutputCurrentInAmperes: 0.515625
TopPlaneOutputPowerDrawnInWatts: 23.0
TotalInputCurrentInAmperes: 3.4453125
TotalInputPowerInWatts: 173.0
TotalOutputCurrentInAmperes: 0.9765625
TotalOutputPowerInWatts: 45.0
Completion Code: Success

Show Manager PowerMeter Multipolicy Active
Description:
This command shows multi-policy power configuration for active requestor.
Syntax:
RScmCli# show manager powermeter multipolicy active [-h]
SampleOutput:
RScmCli# show manager powermeter multipolicy active
Status Description: GetActivePowerPolicy - No active requestor in
multi-policy configuration
Completion Code: Failure

Show Manager PowerMeter Multipolicy Single
Description:

Syntax:
RScmCli# show manager powermeter multipolicy single -i rquestor-id

[-h]

SampleOutput:
RScmCli# show manager powermeter multipolicy single -i 0
AlertLimitInWatts: 66000
IsAlertActive: False
IsAlertEnabled: False
IsDcThrottleActive: False

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 42

SW: RSCM CLI

This command shows multi-policy power configuration for the specified requestor.

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

IsDcThrottleEnabled: False
Completion Code: Success

Show Manager PowerMeter Multipolicy All
Description:
This command shows multi-policy power configuration for all configured requestors.
Syntax:
RScmCli# show manager powermeter multipolicy all [-h]

SampleOutput:
RScmCli# show manager powermeter multipolicy all
requestors
Completion Code: Success
RScmCli#

Show Manager Power Meter Version [Not Supported]
Description:
This command shows the manager’s PRU version.
Syntax:
RScmCli# show manager powermeter version [-h]

Sample Usage:
RScmCli# show manager power fruversion

Sample OutPut:

SW: RSCM CLI

usage: show manager power [-h] {status,reading} ...
show manager power: error: argument ocspower: invalid choice:
'fruversion' (choose from 'status', 'reading')

Show Manager Power Reading
Description:
This command shows the manager’s power reading.
Syntax:
RScmCli# show manager power reading [-h]

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 43

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample Usage:
RScmCli# show manager power reading
Sample Output:

RScmCli# show manager power reading
12V HSC PowerInWatts: 6.09
48V HSC PowerInWatts: 0.25
Completion Code: Success

Show Manager Power Status
Description:
This command shows the manager’s power status.
Syntax:
RScmCli# show manager power status[-h]

Sample Usage:
RScmCli# show manager power status

Sample OutPut:
RScmCli# show manager power status
12V HSC Status: Healthy
48V HSC Status: Healthy

Completion Code: Success

Show Manager NTP Status
Description:
SW: RSCM CLI

Show the status of the NTP service.
Syntax:

RScmCli# show manager ntp status [-h]

Sample Usage:
RScmCli# show manager ntp status

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 44

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample Output:
RScmCli# sh manager ntp status
NTPService: Enabled
NTPState: Running
Completion Code: Success

Show Manager NTP Server
Description:
Show the time server being used by the NTP service
Syntax:
RScmCli# show manager ntp server [-h]

Sample Usage:
RScmCli# show manager ntp status

Sample OutPut:
RScmCli# sh manager ntp server
NTPServer: 127.127.1.0
Completion Code: Success

Show manager throttle local [Not Supported]
Description:
This command shows rack manager throttle control status

SW: RSCM CLI

Syntax:
RScmCli# show manager throttle [-h] local

Sample Usage:
RScmCli# show manager throttle local

Sample OutPut:
Local Bypass: False
Local Enable: True

Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 45

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show manager throttle count
Description:
This command shows rack manager throttle count
Syntax:
RScmCli# show manager throttle [-h] count

The ‘remote’ option is only available for the row manager
Sample Usage:
RScmCli# show manager throttle count

Sample OutPut:
ForceThrottleCount: 0
SmartThrottleCount: 0

Completion Code: Success

Show manager throttle count debug
Description:
This command shows multiple power shelf events counts
Syntax:
RScmCli# show manager throttle count [-h] debug

SW: RSCM CLI

Sample Usage:
RScmCli# show manager throttle count debug

Sample OutPut:
AcLostCount:
1: 0
2: 0
3: 0
4: 0
5: 0
6: 0
7: 0
8: 0
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 46

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

9: 0
10: 0
11: 0
12: 0
FeedLossCount:
1: 0
2: 0
FeedRestoreCount:
1: 0
2: 0
ForceThrottleCount: 0
PsuAlertCount:
1: 0
2: 0
3: 0
4: 0
5: 0
6: 0
7: 0
8: 0
9: 0
10: 0
11: 0
12: 0
SmartThrottleCount: 0
Completion Code: Success

Show manager throttle row [Not Supported]
Description:
This command shows row manager throttle control status
Syntax:sh

RScmCli# show manager throttle [-h] {local,count, row}

SW: RSCM CLI

The “row” option is only available for the row manager
Sample Usage:
RScmCli# show manager throttle row

Sample OutPut:

usage: show manager throttle [-h] {count,force} ...
show manager throttle: error: argument throttle: invalid choice: 'row'
(choose from 'count', 'force')

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 47

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

Show manager recovery (boot strap) [Not Supported]
NOTE: This command is only available for the ROW Manager
Description:
This command shows row manager boot strap status
Syntax:
RScmCli# show manager recovery <-i port-id>[-h]

Sample Usage:
RScmCli# show manager recovery -i 1

Sample Output:
usage: show manager [-h] ...
show manager: error: argument : invalid choice: 'recovery' (choose from 'version', 'type', 'fwupdate',
'pubsub', 'dns', 'userconfigs', 'cert', 'acl', 'rsyslog', 'telemetry', 'tftp', 'menu', 'healthmonitor',
'iptables', 'scandevice', 'time', 'health', 'nfs', 'session', 'led', 'log', 'logread', 'ntp', 'power', 'throttle',
'ssh', 'serialstats', 'serialcheck', 'port', 'powermeter', 'info', 'inventory', 'fru', 'cpld', 'cerberus')

Completion Code: Success

Show Manager Session list
Description:
SW: RSCM CLI

This command shows active manager ssh sessions
Syntax:
RScmCli# show manager session list [-h]

Sample usage:
RScmCli# sh manager session list
Sample output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 48

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

sessions:
1:
ClientIP: 10.91.231.133
ClientPort: 60621
ID: 50480
Completion Code: Success

Show Manager Tftp list
Description:
This command lists files under TFTP location.
Syntax:
RScmCli# show manager tftp list [-h]
Sample usage:
RScmCli# show manager tftp list

Sample output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

TFTPFiles:
1:
MD5: 48a3dc5fa8a03350d959b712ecec730a
Modified: 2024-10-04 16:34:43
Name: m4010fwimage-1.17.4.tgz
Size: 53174046 bytes
2:
MD5: d9beb41cdaef0bda36ca2b1a78176cd9
Modified: 2024-10-25 00:06:59
Name: m4010fwimage-1.558.26.tgz
Size: 53195145 bytes
3:
MD5: 812aa3f631168a2f356e978bb9aa4ffd
Modified: 2024-10-25 14:06:09
Name: m4010fwimage-1.558.27.tgz
Size: 53188793 bytes
4:
MD5: d6129c6cdbcc465ee848f2d615f469e3
Modified: 2024-10-25 11:47:56
Name: m4010fwimage-1.558.8.tgz
Size: 52816436 bytes
5:
MD5: a18bbaafd6bd3c4a3c3bfdfaf8636002
Modified: 2024-10-28 07:03:56
Name: m4010fwimage-1.558.9.tgz
Page | 49

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Size: 52816353 bytes
6:
MD5: f18096c5e258b1de6ea082d4bb1fc5bf
Modified: 2025-12-08 15:35:40
Name: remount-rscm.sh
Size: 487 bytes
Completion Code: Success

Show Manager Time
Description:
This command displays manager system time and date in UTC
Syntax:
RScmCli# show manager time [-h]

Sample usage:
RScmCli# show manager time

Sample output:
DateTime: 2024-10-28 19:34:20
Completion Code: Success

Show Manager Type
Description:
SW: RSCM CLI

This command displays manager type.
Syntax:
RScmCli# show manager type [-h]
Sample usage:
RScmCli# show manager type

Sample output:
Manager Type: 3OU_POWER_SHELF
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 50

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show Manager menu
Description:
This command tells if the recovery menu that is displayed at Rack Manger U-Boot bootup is on or off
Syntax:
RScmCli# show manager recoverymenu [-h]

Sample usage:
RScmCli# show manager menu

Sample output:
Recovery Menu: Enabled
Completion Code: Success

Show Manager fwupdate status
Description:
This command shows the most recent firmware update status
Syntax:
RScmCli# show manager fwupdate status [-h]
Sample usage:
RScmCli# show manager fwupdate status
SW: RSCM CLI

Sample output:
FWUpdate status: Complete
Completion Code: Success

Show Manager fwupdate list
Description:
This command lists versions of available Rack Manager firmware packages that could be used for
recovery
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 51

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# show manager fwupdate list [-h]
Sample usage:
RScmCli# show manager fwupdate list

Sample output:
active: 1.17.4
factory: 1.16.0
rollback: 1.558.9
upgrade: 1.17.4
Completion Code: Success

Show manager powermeter calibration [Not Supported]
Description:
This command shows the calibration values set in the PRU (powermeter)
Syntax:
RScmCli# show manager powermeter calibration
Sample Usage:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

RScmCli# show manager powermeter calibration
Current:
Feed1:
Phase1:
Gain: 17123
Offset: 33143
Phase2:
Gain: 17101
Offset: 33117
Phase3:
Gain: 17190
Offset: 33174
Feed2:
…
Voltage:
Feed1:
Phase1:
Gain: 17683
Offset: 33165
Phase2:
Gain: 17912
…

Page | 52

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show manager throttle count
Description:
This command displays the number of throttle events since the last reset time. This command also
shows the last reset time.
Syntax:
RScmCli# show manager throttle count

Sample Usage:
RScmCli# show manager throttle count
ForceThrottleCount: 0
SmartThrottleCount: 0
Completion Code: Success

Show manager pubsub config
Description:
This command displays pubsub settings “Brokers”, “Topic”, and “Ssl”.
Syntax:
RScmCli# show manager pubsub
Sample Usage:
RScmCli# show manager pubsub
Brokers: 10.91.16.89:9092

SW: RSCM CLI

ClientId: b3833d53-1ecc-4139-b726-b6bb6a20af1a
Ssl: 0
Topic: HHS_Lab_03
Completion Code: Success

Show manager userconfigs
Description:
This command displays user configuration parameter settings.
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 53

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# show manager userconfigs
Sample Usage:
usage: show manager userconfigs [-h] [-k KEY | -g GREPSTR]
This command shows persistent UserConfigs
optional arguments:
-h, --help show this help message and exit
-k KEY Key for which value is needed
-g GREPSTR grep the string in keys: at least 3 characters

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

RScmCli# show manager userconfigs
userconfigs:
1:
Dhcpv6Enable
1
2:
MxDefaultPortmap
0
3:
ServerDataPollInterval
1800
4:
ServerDataFeaturePresence
1
5:
SFTPPollInterval
1800
6:
LanplusEnableConfig
1
7:
RustEnableConfig
0
8:
MsrCpuRetryReadLogEnable
0
9:
MsrDumpEnable
0
10:
AcdDumpEnable
1
11:
RelayCableOverride
0
12:
HpSdDcPowerOpConfig
0
Page | 54

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

13:
sshAdvancedCipherEnable
1
14:
sshSha1SupportEnable
1
15:
PollCriticalDataInSeconds
60
16:
PollNonCriticalDataInMinutes
5
17:
PollNonCriticalLogInMinutes
30
18:
PollSlowThreadInMinutes
360
19:
RmCertRotationMaxPeriodInDays
60
20:
RmM365Config
0
21:
DumpTelemetryEnable
3
22:
OutputTelemetryFormat
0
23:
BMCPasswordRotationEnable
1
24:
ForcePortOffEnable
1
25:
ConfigurableAclEnable
1
26:

SW: RSCM CLI

ConfigurableAclLogsEnable
1
27:
BmcLogFeatureSwitch
0
28:
RmSyslogFeatureSwitch
0
29:
RmAuditlogFeatureSwitch
0
30:
FabricCustomConfig
0
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 55

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

31:
CsrHostSuffix
.rackmanager.ms
32:
EnableSFTPCopyViaOpenssh
1
33:
SwPowercapControlReg
0
34:
EventSubPollIntervalInMinutes
30
35:
ServiceId
00000000-0000-0000-0000-000000000000
36:
RmEnableDoorBellAlert
1
37:
LowLatencySignalEnable
1
38:
ClientCertAuthEnable
0
39:
ConfigSerialPortFlowControl
0
40:
PowercapMultiPolicyEnable
1
41:
PollPowerInSeconds
600
42:
SwPowermeterInterval
30
43:
PollPsuPowerInSecs
60
44:

SW: RSCM CLI

ConfigFileTelemetryEnable
1
45:
RmHealthMonitorConfig
23
46:
PollPsuPolicyInSecs
600
47:
RscmInterrackConfig
127
48:
InterrackShutdownTimeoutSeconds
60
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 56

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

49:
NventIpAddress
192.168.1.2
Completion Code: Success
RScmCli# sh manager userconfigs -g lan
userconfigs:
1:
LanplusEnableConfig
1
Completion Code: Success

Show manager serialstats
Description:
This command will run serial terminal statistics based on user requested timed intervals.
Syntax:
RScmCli# show manager serialstats -i interval( 1

-i 5
tx: 0 frame error 0 overuns 0 parity:
tx: 0 frame error 0 overuns 0 parity:
tx: 0 frame error 0 overuns 0 parity:
tx: 0 frame error 0 overuns 0 parity:
tx: 0 frame error 0 overuns 0 parity:
tx: 0 frame error 0 overuns 0 parity:
tx: 0 frame error 0 overuns 0 parity:
tx: 0 frame error 0 overuns 0 parity:

Show manager serialcheck
Description:
This command will run the serial terminal health based on user requested count.
Syntax:
RScmCli# show manager serialcheck -l loop < 1 – 1000 times>

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 57

SW: RSCM CLI

Sample Usage:
RScmCli# show manager serialstats
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 0
0 break: 0 buffer overrun: 0
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 0
0 break: 0 buffer overrun: 0
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 0
0 break: 0 buffer overrun: 0
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 0
0 break: 0 buffer overrun: 0
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 0
0 break: 0 buffer overrun: 0
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 0
0 break: 0 buffer overrun: 0
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 0
0 break: 0 buffer overrun: 0
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 0
0 break: 0 buffer overrun: 0

- 60 secs)

SW: RSCM CLI

Sample Usage:
RScmCli# show manager serialcheck -l 10
1+0 records in
1+0 records out
Needed 0 reads 1 writes loops 10 / 10
cts: 0 dsr: 0 rng: 0 dcd: 0 rx: 1570 tx: 41856 frame 0 ovr 0 par: 0 brk:
0 buf_ovrr: 0
Completion Code: Success

Classified
as
Microsoft
Highly
Confidenti
al

Show manager ssh status
Description:
This command will display the SSH cipher security configuration level along with health, process
status, and user config details
Syntax:
RScmCli# show manager ssh status

Sample Usage:
RScmCli# show manager ssh status
Ciphers: aes256-gcm@openssh.com,aes192-ctr,aes256-ctr
KexAlgorithms: ecdh-sha2-nistp521,ecdh-sha2-nistp384
MACs: hmac-sha2-512-etm@openssh.com,hmac-sha2-256etm@openssh.com,hmac-sha2-256,hmac-sha2-512
SSHCompliance: OK
SSHProcess: Running
SSHUserconfig: Enabled
Completion Code: Success

SW: RSCM CLI

Show manager healthmonitor log
Description:
This command displays the logs collected by RM health monitoring module
Syntax:
RScmCli# show manager healthmonitor log -h
- usage: show manager healthmonitor log [-h]
- optional arguments:
- -h, --help show this help message and exit

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 58

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample Usage:

SW: RSCM CLI

RScmCli# sh man healthmonitor log
CrashMonitorModule:
DirectoryMonitorModule:
Directory: 89
LogTs: 04/09/2025 11:16:45
ProcessMonitoringModule:
LogTs: 04/09/2025 11:16:46
ProcessRestarts:
{
Process: /usr/bin/ocskafka_daemon
ProcessRestartStatus: Disabled
}
SystemMonitorModule:
LogTs: 04/09/2025 11:17:22
cpu_used: 24
emmc_health:
FirmwareVersion: 02
Health: OK
MLC: 0%-10% MLC device life time used
Pre_EOL: eMMC Pre EOL is Normal
SLC: 0%-10% SLC device life time used
fd_open: 2240
hm_status:
crash: 0
dir_purge: 1
dir_size: 0
proc_resources: 0
proc_restart: 0
lock_status:
corrupt_locks:
87: OCSSMARTITRACK
login_stats:
failed: 0
invalid: 0
success: 2
Completion Code: Success

Show manager iptables profiles
Description:
This command displays the list of configurable profiles
Syntax:
RScmCli# sh manager iptables profiles -h

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 59

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

usage: show manager iptables profiles [-h]
optional arguments:
-h, --help

show this help message and exit

RScmCli#

Sample Usage:
RScmCli# sh man iptables profiles
Profile ID list:
===========
SSH-CONFIG
REDFISH-CONFIG
Completion Code: Success

__________________________________________________________________________________

Show manager iptables rules
Description:
This command displays the list of iptables IPv4 rules by default. The name of the profile needs to be
provided if the profile specific rules are required.
Syntax:
RScmCli#

sh manager iptables rules -h

usage: show manager iptables rules [-h] [-v {4,6}] [-a] [profile]
positional arguments:
Profile of rules(default all)
SW: RSCM CLI

profile

optional arguments:
-h, --help

show this help message and exit

-v {4,6}

IPv4/IPv6 default: 4

-a

Display raw iptables output

RScmCli#

Sample Usage:
RScmCli# sh man iptables rules -a
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 60

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-P INPUT DROP
-P FORWARD DROP
-P OUTPUT DROP
-N REDFISH-IN
-N SSH-IN
-A INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -i eth1 -p tcp -m multiport --dports 111,2049,9000 -j ACCEPT
-A INPUT -i eth1 -p udp -m multiport --dports 111,2049,9000 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j SSH-IN
-A INPUT -i eth0 -p tcp -m multiport --dports 8000,8080,8443 -j
REDFISH-IN
-A INPUT -i eth1 -p udp -m udp --dport 123 -j ACCEPT
-A INPUT -i eth1 -p tcp -m tcp --dport 8081 -j ACCEPT
-A INPUT -i eth0 -p tcp -m tcp --dport 8081 -j DROP
-A INPUT -i eth1 -p tcp -m tcp --dport 8082 -j ACCEPT
-A INPUT -i eth0 -p tcp -m tcp --dport 8082 -j DROP
-A INPUT -p icmp -j ACCEPT
-A INPUT -i eth1 -p udp -m udp --dport 162 -j ACCEPT
-A INPUT -i eth0 -p udp -m conntrack --ctstate NEW -m comment -comment RsyslogBmcStreaming -j ACCEPT
-A FORWARD -d 10.10.10.10/32 -i eth1 -o eth0 -p udp -m udp --dport
514 -m comment --comment RsyslogBmcStreaming -j ACCEPT
-A OUTPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A OUTPUT -o lo -j ACCEPT
-A OUTPUT -o eth1 -j ACCEPT
-A OUTPUT -p udp -m udp --dport 53 -j ACCEPT
-A OUTPUT -p udp -m udp --dport 69 -j ACCEPT

SW: RSCM CLI

-A OUTPUT -p udp -m udp --dport 123 -j ACCEPT
-A OUTPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A OUTPUT -p tcp -m multiport --dports 9092,9093 -j ACCEPT
-A OUTPUT -o eth0 -p tcp -m tcp --dport 23001 -j ACCEPT
-A OUTPUT -p icmp -j ACCEPT
-A OUTPUT -p udp -m udp --dport 514 -m comment --comment
RsyslogBmcStreaming -j ACCEPT
-A REDFISH-IN -m hashlimit --hashlimit-upto 12/hour --hashlimit-burst
1 --hashlimit-mode srcip --hashlimit-name redfish-in -j NFLOG -nflog-prefix "REDFISH-IN: "
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 61

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-A REDFISH-IN -m comment --comment REDFISH-CONFIG -j ACCEPT
-A SSH-IN -j NFLOG --nflog-prefix

"SSH-IN: "

-A SSH-IN -m comment --comment SSH-CONFIG -j ACCEPT
Completion Code: Success
RScmCli#

__________________________________________________________________________________

Show manager rsyslog
Description:
This command will display the current external server used for rsyslog streaming and BMC log
forwarding
Syntax:
RScmCli# show manager rsyslog
usage: show manager rsyslog [-h]
optional arguments:
-h, --help show this help message and exit

Sample Usage:
• RScmCli# show manager rsyslog
ActiveRsyslogServer: 127.0.0.1
Completion Code: Success

Show manager portmap
Description:
This command shows port mapping details for RSCM connections and managed BMCs from the
MX switch.
Syntax:
RScmCli# show manager portmap -h
usage: show manager portmap [-h]
optional arguments:
-h, --help show this help message and exit
Sample Udage:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 62

SW: RSCM CLI

__________________________________________________________________________________

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# show manager portmap
BMCPortPairs:
Pairs:
PortCount: 0
ManagedBMCPorts:
PortCount: 21
PortList:
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
R-SCM:
IPAddress: 172.17.0.81
PortNumber: 21
Completion Code: Success

__________________________________________________________________________________

Show manager loglevel
Description:

SW: RSCM CLI

This command shows loglevel of ocsevent.log
Syntax:

RScmCli# show manager loglevel

The ‘remote’ option is only available for the row manager
Sample Usage:
RScmCli# show manager loglevel

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 63

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample Output:
LogLevel: WARNING_LEVEL
Completion Code: Success

Set Commands
set manager led on
set manager led off
set manager relay on
set manager relay off
set manager port on
set manager port off
set manager port pairing add
set manager port pairing remove
set manager log clear
set manager fru
set manager power clear faults
set manager powermeter Alert
set manager powermeter limit
set manager powermeter multipolicy
set manager powermeter clearmax
set manager powermeter clearfaults
set manager tftp start
set manager tftp stop
set manager nfs start
set manager nfs stop
Set manager nfs enable
set manager nfs disable
Set manager ntp start
set manager ntp stop
set manager ntp restart
set manager ntp enable
set manager ntp disable
set manager ntp serverset manager hostname

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Page | 64

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Classified
as
Microsoft
Highly
Confidenti
al

set manager throttle local
set manager throttle count clear
set manager throttle force enable
set manager throttle row (ROW manager command)
set manager recovery on
set manager recovery off
set manager session kill
set manager tftp get
set manager tftp put
set manager tftp delete
set manager time
set manager menu on
set manager menu off
set manager fwupdate
set manager defaults
set manager throttle_force_enable
set manager throttle_count_clear
set manager pubsub
Set manager userconfigs
Set manager ssh config
Set manager loglevel

User Commands
show user info
set user add
set user update
set user delete

SW: RSCM CLI

•
•
•
•

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 65

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Set Manager LED On
Description:
This command turns the Manger LED ON.
Syntax:
RScmCli# set manager led on

Sample output:
Completion Code: Success

Set Manager LED Off
Description:
This command turns the Manger LED OFF.
Syntax:
RScmCli# set manager led off

Sample output:
Completion Code: Success

Set Manager Log Export [Future]
Description:
This command exports system and Rack Manager logs.
Syntax:
RScmCli# set manager log export [-h]
-h – Help, display the correct syntax

SW: RSCM CLI

Sample usage:
RScmCli# set manager log export
Sample output:
The log files will be ready in about five minutes
Filename: exportlogs_2025-03-19T06-09-24Z.tgz
Completion Code: Success

Set Manager Log Clear
Description:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 66

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

This command clears all log entries.
Syntax:
RScmCli# set manager log clear [-h]
-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager log clear
Sample output:
Completion Code :

Success

Set Manager Fru
Description:
This command is used to update the Mnager FRU information
Syntax:
RScmCli# set manager fru -h
usage: set manager fru [-h] -b {mb,ps} -f FILENAME -s SIZE
optional arguments:
-h, --help
show this help message and exit
required arguments:
-b {mb,ps}
Rack Manager board name
-f FILENAME fru file path
-s SIZE
number of bytes
Sample Usage:
RScmCli# set manager fru -b mb -f bytes-fru.txt -s 168
Output:
i2c target: 2 50
01 0
00 1
...
SW: RSCM CLI

==============================
write completion code: 0
==============================
Completion Code: Success

Sample output:
Completion Code: Success

Set Manager GCA Refresh
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 67

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Description:
This command is used to refresh GCA cache
Syntax:
RScmCli# set manager gca refresh -h
usage: set manager gca refresh [-h]
optional arguments:
-h, --help
show this help message and exit
Sample Usage:
RScmCli# set manager gca refresh
Completion Code: Success
Sample output:
Completion Code: Success

Set Manager Power Faults
Description:
This command clears manager power faults.
Syntax:
RScmCli# set manager power faults [-h]
-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager power faults
Sample output:
Completion Code : Success

Set Manager PowerMeter Alert
SW: RSCM CLI

Description:
This command sets rack power alert policy.
Syntax:
RScmCli# set manager powermeter alert [-h] -e poweralertpolicy
-d dcthrottlealertpolicy
-p powerlimit

-e
-d
-p

poweralertpolicy
poweralertpolicy (0 disable, 1 enable)
dcthrottlealertpolicy dcthrottlealertpolicy (0 disable, 1 enable)
powerlimit
power limit in watts

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 68

SW: RSCM CLI

-h

Help

Classified
as
Microsoft
Highly
Confidenti
al

display the correct syntax

Sample usage:
RScmCli# set manager powermeter alert -e 1 -d 0 –p 500

Sample output:
Completion Code : Success

Set Manager PowerMeter Limit
Description:
This command sets rack power limit.
Syntax:
RScmCli# set manager powermeter limit [-h] -p power limit
-p
-h

powerlimit
Help

power limit in watts
display the correct syntax

Sample usage:
RScmCli# set manager powermeter limit –p 500
Sample output:
Completion Code : Success

SW: RSCM CLI

Set Manager PowerMeter Multipolicy
Description:
This command sets multi-policy power configuration for rack and systems .
Syntax:
RScmCli# set manager powermeter multipolicy [-h] -i requestor-id
-a rack-alert-policy
-t dc-throttle-enable
-l rack-power-limit
-p blade-power-limit
-e alert-action -f
-f throttle-duration
-d remove-delay
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 69

SW: RSCM CLI

[-r remediation-action]
-h, --help
-i requestor-id
-a rack-alert-policy

show this help message and exit
Requestor ID (0-32)
Rack level alert policy (-1: forceDisable, 0:
Disable,1: Enable)
-t dc-throttle-enable Rack level DC throttle (0: disable, 1: Enable)
-l rack-power-limit
Rack level power limit
-p blade-power-limit power limit in watts
-e alert-action
alert action, 0:nothing, 1:power limit only,
2:throttle and limit
-f throttle-duration fast throttle duration in milliseconds
-d remove-delay
auto remove power limit delay in seconds
-r remediation-action remediation action, 0:nothing, 1:remove limit and
re-arm alert, 2:re-arm alert

Classified
as
Microsoft
Highly
Confidenti
al

Sample usage:
RScmCli# set manager powermeter multipolicy -i 1 -a 1 -t 0 -l 6000 -p
300 -e 1 -f 10 -d 20 -r 1
Sample output:
Completion Code : Success

Set Manager PowerMeter ClearMax
Description:
This command clears rack max power.
Syntax:
RScmCli# set manager powermeter max [-h]
-h – Help, display the correct syntax

SW: RSCM CLI

Sample usage:
RScmCli# set manager powermeter max

Sample output:
Completion Code : Success

Set Manager PowerMeter ClearFaults
Description:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 70

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

This command clears rack power faults.
Syntax:
RScmCli# set manager powermeter faults [-h]
-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager powermeter faults
Sample output:
Completion Code : Success

Set Manager TFTP Start[Not Supported]
Description:
This command starts the TFTP server on the manager.
Syntax:
RScmCli# set manager tftp start[-h]
-h

Help

display the correct syntax

Sample usage:
RScmCli# set manager tftp start
Sample output:
Completion Code: Success

SW: RSCM CLI

Set Manager TFTP Stop[Not Supported]
Description:
This command stops the TFTP server on the manager.
Syntax:
RScmCli# set manager tftp stop[-h]

-h

Help

display the correct syntax

Sample usage:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 71

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set manager tftp stop

Sample output:
Completion Code: Success

Set Manager NFS Start
Description:
This command starts the NFS server on the rack manager.
Syntax:
RScmCli# set manager nfs start[-h]

-h

Help

display the correct syntax

Sample usage:
RScmCli# set manager nfs start
Sample output:
Completion Code : Success

Set Manager NFS Stop
Description:
This command stops the NFS server on the rack manager.

-h

Help

SW: RSCM CLI

Syntax:
RScmCli# set manager nfs start[-h]

display the correct syntax

Sample usage:
RScmCli# set manager nfs start
Sample output:
Completion Code : Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 72

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Set Manager NFS Enable
Description:
This command enables the NFS server on the rack manager so that it will be automatically started by
linux whenever RM reboots.
Syntax:
RScmCli# set manager nfs enable[-h]
-h Help

display the correct syntax

Sample usage:
RScmCli# set manager nfs enable
Sample output:
Completion Code : Success

Set Manager NFS Disable
Description:
This command disables the NFS server on the rack manager so it is not started at RM reboot.
Syntax:
RScmCli# set manager nfs disable[-h]
-h Help

display the correct syntax

Sample usage:
RScmCli# set manager nfs disable
Sample output:

SW: RSCM CLI

Completion Code : Success

Set Manager NTP Start
Description:
Start the NTP service.
Syntax:
RScmCli# set manager ntp start [-h]
-h – Help, display the correct syntax

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 73

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample usage:
RScmCli# set manager ntp start
Sample output:

Set Manager NTP Stop
Description:
Stop the NTP service.
Syntax:
RScmCli# set manager ntp stop [-h]
-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager ntp stop
Sample output:

Set Manager NTP Restart
Description:
Restart the NTP service
Syntax:
RScmCli# set manager ntp restart [-h]
-h – Help, display the correct syntax

SW: RSCM CLI

Sample usage:
RScmCli# set manager ntp restart
Sample output:

Set Manager NTP Enable
Description:
Configure the NTP service to start automatically on boot
Syntax:
RScmCli# set manager ntp enable [-h]
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 74

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager ntp enable
Sample output:

Set Manager NTP Disable
Description:
Configure the NTP service to not start automatically on boot
Syntax:
RScmCli# set manager ntp disable [-h]
-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager ntp disable
Sample output:

Set Manager NTP Server
Description:
Set the time server to be used by the NTP service

SW: RSCM CLI

Syntax:
RScmCli# set manager ntp server [-h] -s <server IP>
-s -> The IP address of the time server.
-h – Help, display the correct syntax
Sample usage:
RScmCli# set manager ntp server -s <server-ip>
Sample output:

Set Manager Hostname
Description:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 75

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Set the hostname of the system
Syntax:
RScmCli# set manager hostname [-h] -n <hostname>
-n -> The name to use as the system hostname.
-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager hostname -n ocsmanager01
Sample output:
Completion Code: Success

Set Manager throttle local [Not Supported]
Description:
This command controls rack manager throttle configuration.
Syntax:
RScmCli# set manager throttle local {bypass, enable} -e {0,1}
1. Set the state of the 4 throttle GPIOs. The -e argument indicates the disable/enable state of
the GPIO.
2. Local and remote GPIOs each have a ‘bypass’ and ‘enable’ option.
usage: set manager throttle local bypass [-h] -e {0,1}
optional arguments:
-h, --help

show this help message and exit

required arguments:
Disable (0)/Enable (1)
SW: RSCM CLI

-e {0,1}

Sample output:
Completion Code: Success

Set Manager throttle count
Description:
This command controls rack manager throttle count.
This command clears the throttle count.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 76

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
set manager throttle count [-h] {clear} ...
positional arguments:
{clear}
throttle count clear action
clear
This command clears throttle count

optional arguments:
-h, --help

show this help message and exitSample output:

Usage:
RScmCli# set manager throttle count clear

Sample output:
Completion Code: Success

Set Manager throttle row
The ‘row” option is only available for the row manager
Description:
This command controls row manager throttle configuration.
Syntax:
RScmCli# set manager throttle row {bypass, enable} -e {0,1}

SW: RSCM CLI

usage: set manager throttle row bypass [-h] -e {0,1}
optional arguments:
-h, --help

show this help message and exit

required arguments:
-e {0,1}

Disable (0)/Enable (1)

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 77

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager throttle row bypass -e 0
RScmCli# set manager throttle row local -e 0
ROW MANAGER Throttle Commands:
RScmCli# set manager throttle row bypass -e 0
RScmCli# set manager throttle local bypass -e 0
RScmCli# set manager throttle local enable -e 0
RScmCli# set manager throttle row enable -e 0
RScmCli# set manager throttle count clear
RScmCli# set manager throttle force

Sample output:
Completion Code: Success

Set Manager Recovery On [Not Supported]
NOTE: This command is only available for the ROW Manager
“ON : This option forces the rack manager into network recovery boot.
“OFF : This option sets the rack manager to normal boot.”

SW: RSCM CLI

Note: A power reset is required for the command to take effect.”
[STEPS]
1. Set Network boot ON
2. Power Cycle target Rack Manager
3. HTTP_OK for Imaging to start
4. Set Network boot OFF
If you don’t set it off it will perpetually boot to network.
Description:
This command sets bootstrap on for Rack Manager.
Syntax:
RScmCli# set manager recovery on

[-h] -i <port-id>

-i -> Port-Id Manager power port id <1 to 24>.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 78

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager recovery on -i 1
Sample output:
Completion Code : Success

Set Manager Recovery Off [Not Supported]
NOTE: This command is only available for the ROW Manager
Description:
This command sets bootstrap off for Rack Manager.
Syntax:
RScmCli# set manager recovery off

[-h] -i <port-id>

-i -> Port-Id Manager power port id <1 to 24>.
-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager recovery off -i 1
Sample output:
Completion Code : Success

Set Manager Session Kill

SW: RSCM CLI

Description:
Kills an existing active SSH session in the Rack manager
Note:
-

Use show manager session list command to obtain the session id

Syntax:
RScmCli# set manager session kill [-h] -s <session-id>

Sample usage:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 79

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set manager session kill -s 15405

Sample output:
Completion Code : Success

Set Manager TFTP Get
Description:
Allows you to download the specified file to the RM from a specified TFTP server
Syntax:
RScmCli# set manager tftp get [-h] -f <filename in the TFTP server> -s
<server-ip>

Sample usage:
Filename:myfile
RScmCli# set manager tftp get -s 172.16.138.219 -f myfile
Filename:My File.txt
RScmCli# set manager tftp get -s 172.16.138.219 -f My File.txt
RScmCli# set manager tftp get -s 172.16.138.219 -f /My folder/My
File.txt

Sample output:
Completion Code : Success

SW: RSCM CLI

Set Manager TFTP Put
Description:
Allows to upload the specified target file from the R_SCM to the specified TFTP location.
Syntax:
RScmCli# set manager tftp put [-h] -f <filename in the TFTP
<local file name and path> -s <server-ip> -t <target>

server> -l

Available targets:
{auditlog,debuglog,telemetrylog,redfishtelemetrylog,restlog,systemlog,fi

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 80

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

rmwareupdatelog,kernellog,bootlog,file,sellog,hmlog}

Sample usage:
RScmCli# set manager tftp put -s 172.16.138.221 -l myfile -f myfile -t
file

Sample output:
Completion Code: Success

Set Manager TFTP Delete
Description:
Deletes the specified file from the TFTP location in the RM
Note: Use show manager tftp list command to obtain the filename
Syntax:
RScmCli# set manager tftp delete [-h] -f <filename>

Sample usage:
RScmCli# set manager tftp delete -f tftpfile1

Sample output:
Completion Code: Success

SW: RSCM CLI

Set Manager SFTP Get
Description:
Allows you to download the specified file to the RM from a specified TFTP or SFTP server
Note:
-

Use show manager tftp list to see the downloaded file (after execution of this command)

Syntax:
RScmCli# set manager sftp get [-h] -f <filename in the sftp server> -s
<server-ip> -u <user>
Sample usage:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 81

SW: RSCM CLI

Filename:myfile
RScmCli# set manager sftp get -s 172.16.138.219 -f myfile -u admin

Classified
as
Microsoft
Highly
Confidenti
al

Filename:My File.txt
RScmCli# set manager sftp get -s 172.16.138.219 -f My File.txt -u admin
RScmCli# set manager sftp get -s 172.16.138.219 -f /My folder/My
File.txt -u admin

Sample output:
Completion Code : Success

Set Manager Sftp Put
Description:
Allows to upload the specified target file from the R_SCM to the specified TFTP or SFTP server location
Syntax:
RScmCli# set manager sftp put [-h] -f <filename in the sftp server> -s
<server-ip> -t <target> -u <user>

Sample usage:
RScmCli# set manager sftp put -s 172.16.138.221 -f audit.log -t auditlog
-u admin

Sample output:
Completion Code: Success

Set Manager Time
Description:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 82

SW: RSCM CLI

Available targets:
- auditlog
- debuglog
- telemetrylog
- restlog
- firmwareupdatelog
- systemlog
- kernellog
- hmlog
- blade<#>sel

SW: RSCM CLI

This sets the manager’s system time and date in UTC.
Syntax:
RScmCli# set manager time -h
usage: set manager time [-h] -y YEAR -m MONTH -d DAY -r HOUR -n MIN -s
SEC

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help show this help message and exit
required arguments:
-y YEAR
4-digit Year
-m MONTH
Numerical Month (1-12)
-d DAY
Numerical Day (1-31)
-r HOUR
Hour (0-23)
-n MIN
Minute (0-59)
-s SEC
Second (0-59)

Sample usage:
To change day and month, use the following command.
RScmCli# set manager time –m 9 -d 1 ...
Sample output:
Completion Code: Success

Set Manager menu On
Description:
This command enables the display of recovery menu that is displayed at Rack Manger U-Boot bootup
Syntax:
RScmCli# set manager menu on

[-h]

SW: RSCM CLI

-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager menu on
Sample output:
Completion Code : Success

Set Manager menu Off
Description:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 83

SW: RSCM CLI

This command disables the display of recovery menu that is displayed at Rack Manger U-Boot bootup
Syntax:
RScmCli# set manager menu off

Classified
as
Microsoft
Highly
Confidenti
al

[-h]

-h – Help, display the correct syntax

Sample usage:
RScmCli# set manager menu off
Sample output:
Completion Code : Success

Set Manager fwupdate
Description:
This command starts a FW update using provided firmware image file. The image file shall first be
loaded to the predefined location using the tftp command get option.
Syntax:
RScmCli# set manager fwupdate [-h] <-f>
usage: set manager fwupdate [-h] -f FILE [-n] [-s] [-t UPDATEFT]

Sample usage:
RScmCli# set manager fwupdate -f <filename> / < recovery image type >
Sample output:
Completion Code : Success

Notes: Upgrade file <filename> should exist in RM TFTP path: /usr/srvroot/shared

Set manager defaults
Description:
Removes all user configuration and restores the default settings.
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 84

SW: RSCM CLI

optional arguments:
-h, --help
show this help message and exit
-f FILE
Upgrade filename or recovery image type [rollback,
active, factory]
-n, --nobackup
Do not backup user settings - Non-default user
adds, passwords, network config, NTP config will not be backed up
-s, --skipuboot Skip uboot upgrade
-t UPDATEFT

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# set manager defaults

Sample usage:
RScmCli# set manager defaults

Sample output:
Restore default settings initialized
Removing /rwparts/overlay/home/work
Removing /rwparts/overlay/home/files
Overlay directory removed.
FW Restore settings operation started, system will reboot in 10s...

Completion Code: Success

Note: This command will reboot the unit to restore the default settings.

Set manager iptables add
Description:
This command adds a specific source IP address to all profiles unless explicitly specified. To get the list
of supported profiles, run “show manager iptables profiles”
Syntax:
RScmCli# set man iptables add -h

positional arguments:
profile
all)

This option adds a rule to specific profile (default

optional arguments:
-h, --help

show this help message and exit

-s IPaddr

IP address

-v {4,6}

IP version(4/6) default: 4

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 85

SW: RSCM CLI

usage: set manager iptables add [-h] Profile -s IPaddr [-v {4,6}]

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli#

Sample usage:
RScmCli# set man iptables add REDFISH-CONFIG -s 1.1.1.1
Completion Code: Success
RScmCli#

RScmCli# set man iptables add REDFISH-CONFIG -s 1::1 -v 6
Completion Code: Success
RScmCli#

___________________________________________________________________________________

Set manager iptables bulkadd
Description:
This command adds the comma separated values which can include a fixed IP address, IP range or
CIDR notation to all profiles unless specified explicitly. To get the list of supported profiles, run “show
manager iptables profiles”
Syntax:
RScmCli# set man iptables bulkadd -h
usage: set manager iptables bulkadd [-h] Profile -s IPaddr [-v {4,6}]
positional arguments:
profile
This option adds bulk rule to specific profile (default
all)

SW: RSCM CLI

optional arguments:
-h, --help show this help message and exit
-s IPaddr
IP address
-v {4,6}
IP version(4/6) default: 4
RScmCli#

Sample usage:
RScmCli# set manager iptables bulkadd -s
1.1.1.1,12.12.12.0/24,123.1.1.5-123.1.2.0,44.55.66.1
Completion Code: Success
RScmCli#

___________________________________________________________________________________

Set manager iptables delete
Description:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 86

SW: RSCM CLI

This command deletes a specific source IP address from all profiles unless explicitly specified. To get
the list of supported profiles, run “show manager iptables profiles”

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli#

set man iptables delete -h

usage: set manager iptables delete [-h] Profile -s IPaddr [-v {4,6}]
positional arguments:
profile
This option deletes the rule from specific profile
(default all)
optional arguments:
-h, --help

show this help message and exit

-s IPaddr

IP address

-v {4,6}

IP version(4/6) default: 4

RScmCli#

Sample usage:
RScmCli# set man iptables delete REDFISH-CONFIG -s 1.1.1.1
Completion Code: Success
RScmCli# set man iptables delete REDFISH-CONFIG -s 1::1 -v 6
Completion Code: Success
RScmCli#

___________________________________________________________________________________

Set manager iptables enable
This command is to enable all the profiles unless explicitly specified. Using this command, default
iptables rules for all the profiles will be active unless explicit profile specified. To get the list of
supported profiles, run “show manager iptables profiles”
Syntax:
RScmCli# set man iptables enable -h
usage: set manager iptables enable [-h] [-v {both,4,6}] [profile]
positional arguments:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 87

SW: RSCM CLI

Description:

SW: RSCM CLI

profile
all)

This option enables the specific profile (default

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help

show this help message and exit

-v {both,4,6}

IP version(4/6/both) default: both

RScmCli#

Sample usage:
RScmCli# set manager iptables enable SSH-CONFIG
Completion Code: Success
RScmCli#

Set manager iptables disable
Description:
This command is to disable the specified profile. By default, RM configures a profile to accept all
packets reaching the chain corresponding to that profile. Using this command, all the packets will
be dropped for the given profile. To get the list of supported profiles, run “show manager iptables
profiles”

Syntax:
RScmCli# set manager iptables disable -h
usage: set manager iptables disable [-h] [-v {both,4,6}] profile
positional arguments:
profile

This option disables the specific profile

-h, --help

show this help message and exit

-v {both,4,6}

IP version(4/6/both) default: both

SW: RSCM CLI

optional arguments:

RScmCli#

Sample usage:
RScmCli#

set manager iptables disable SSH-CONFIG

Completion Code: Success
RScmCli#

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 88

SW: RSCM CLI

_____________________________________________________________________

Set manager iptables restore

Classified
as
Microsoft
Highly
Confidenti
al

Description:
This command restores the default iptables rules

Syntax:
RScmCli# set manager iptables restore -h
usage: set manager iptables restore [-h]
optional arguments:
-h, --help

show this help message and exit

RScmCli#

Sample usage:
RScmCli# set manager iptables restore
Completion Code: Success
RScmCli#

_______________________________________________________________________________

Show user info

Syntax:
RScmCli# show user info [-h] -t {users,roles} [-u USERNAME]
[-r {admin, operator, user}]
-h, --help
show this help message and exit
-t {users,roles}
Provide list operations type, users or roles
-u USERNAME
User name
-r {admin, operator, user}
User roles: supported admin, operator, and
user
Sample usage:
RScmCli# show user info
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 89

SW: RSCM CLI

Description:
Displays all the users

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample output:
RScmCli# show user info
accounts:
admin:
root
testroot
operator:
testope
user:
testusr
testuser1
num_accounts: 5
Completion Code: Success

Set User add
Description:
This command changes the Manager security role for an existing user in the manager controller.
Note that the user will be removed from other Manager security roles and added to the new role
specified. Users can belong to only one security role.
Syntax:
RScmCli# set user add -h
usage: set user add [-h] -u USERNAME -p PASSWORD -r
{admin,operator,user}
optional arguments:
-h, --help

show this help message and exit

-u USERNAME

Username

-p PASSWORD

Password for user

User roles: supported admin, operator, and user
Sample usage:
To change the user role to operator, use the following command:
RScmCli# set user add –u myname <6 characters> -p <password> –r
ocs_user

Sample output:
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 90

SW: RSCM CLI

-r {admin,operator,user}

SW: RSCM CLI

Set user update
Description:
This command changes the Manager security role for an existing user in the manager controller.

Classified
as
Microsoft
Highly
Confidenti
al

Note that the user will be removed from other Manager security roles and added to the new role
specified. Users can belong to only one security role.
Syntax:
RScmCli# set user update -h
usage: set user update [-h] -t {password,role} -u USERNAME [-p
PASSWORD] [-r {admin,operator,user}]
optional arguments:
-h, --help
-t {password,role}
-u USERNAME

show this help message and exit
Provide update type user or role.
Username

-p PASSWORD
Password for user
-r {admin,operator,user}
User roles: supported admin, operator, and
user
Sample usage:
To change the user role to operator, use the following command:
RScmCli# set user update -t role -u myname

-r ocs_operator

Sample output: Completion Code: Success

Set User Delete
Description:
This command removes an existing user from the manager controller.
SW: RSCM CLI

Syntax:
RScmCli# set user delete [-h] -u USERNAME
-u username – Username
-h – Help, display the correct syntax

Sample usage:
To remove a user, use the following command:
RScmCli# set user delete –u myname
Sample output:
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 91

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Set manager powermeter calibration [Not Supported]
Description:
This command sets the calibration values for the PRU using an input file.
Note1: The file has to be in the correct calibration file format. Sample file adccalibration.txt will be
provided which should be used as a template.
Note2: Calibration values from the file will be programmed both in the EEPROM (for persistence) as
well as in the PRU. Frequent execution of this command should be avoided since it will wear out the
EEPROM.
Syntax:
RScmCli# set manager powermeter calibration -h
usage: set manager powermeter calibration [-h] -f FILENAME

optional arguments:
-h, --help
-f FILENAME

show this help message and exit
calibration file path (syntax must match)

Sample Usage:

RScmCli# set manager powermeter calibration -f adccalibration.txt
Completion Code: Success

Set manager throttle force enable
SW: RSCM CLI

Description:
This command enables or disables the throttle signal.
Syntax:
RScmCli# set manager throttle force -h
usage: set manager throttle force [-h] {enable} ...

positional arguments:
{enable}
enable

Force throttle action
This command enables force throttle signal

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 92

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set manager throttle force enable -h
usage: set manager throttle force enable [-h] {on,off} ...
positional arguments:
{on,off}
Disable(off)/Enable(on)
on
This command enables force throttle signal
off
This command disables force throttle signal

Sample usage:

Disable force throttling:
RScmCli# set manager throttle force enable off
Completion Code: Success
Enable force throttling:
RScmCli# set manager throttle force enable on1
Completion Code: Success

Set manager throttle count clear
Description:
This command clears the throttle count and reset the last throttle count rest time.
Syntax:
RScmCli# set manager throttle count -h
usage: set manager throttle count [-h] {clear} ...

positional arguments:
throttle count clear action
This command clears throttle count

SW: RSCM CLI

{clear}
clear

Sample usage:
RScmCli# set manager throttle count clear
Completion Code: Success

Show manager throttle force
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 93

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Description:
This command indicates if the throttle signal is active and enabled.
Syntax:
RScmCli# show manager throttle force -h
usage: set manager throttle force [-h]

Sample usage:
RScmCli# show manager throttle force
IsForceThrottleActive: False
IsForceThrottleEnable: False
Completion Code: Success

Set manager pubsub config
Description:
This command add/update PubSub configs(Brokers, Topic, and Ssl) settings.
Syntax:
RScmCli# set manager pubsub -h
usage: set manager pubsub [-h] [-l BROKERS] [-t TOPIC] [-s SSL]
optional arguments:
-h, --help show this help message and exit
-l BROKERS PubSub broker IP addresses
-t TOPIC
PubSub topic name
-s SSL
PubSub SSL authentication enable

SW: RSCM CLI

Sample usage:
RScmCli# set manager pubsub -l 10.10.10.500 -t CSIRM -s 0
Sample Output:
Completion Code: Success

Set manager userconfigs
Description:
This command set the userconfig “keyname” to the value “value”
Syntax:
RScmCli# set manager userconfigs -h
usage: set manager userconfigs [-h] -k KEYNAME -v VALUE
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 94

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help show this help message and exit
-k KEYNAME User configs key to set
-v VALUE
User configs value to set

Sample usage:
RScmCli# set manager userconfigs -k PowercapMultiPolicyEnable -v 1
Sample output:
Completion Code: Success

Set manager powercycle
Description:
This command AC power cycles the RSCM
Syntax:
RScmCli# set manager powercycle
usage: set manager powercycle[-h]
optional arguments:
-h, --help
show this help message and exit

Sample usage:
RScmCli# set manager powercycle
Status Description: Manager will power cycle in 5 seconds.
Completion Code: Success

___________________________________________________________________________________

Set manager loglevel
SW: RSCM CLI

Description:
This command is to change loglevel of ocsevent.log
Syntax:
RScmCli# set manager loglevel -h
usage: set manager loglevel [-h] -l {0,1,2,3}
optional arguments:
-h, --help

show this help message and exit

required arguments:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 95

SW: RSCM CLI

-l {0,1,2,3}

Log level, 0: Silent, 1: Error, 2: Warning, 3: Info

RScmCli#

Classified
as
Microsoft
Highly
Confidenti
al

Sample usage:
RScmCli# set manager loglevel -l 2
LogLevel: WARNING_LEVEL
Completion Code: Success

Set manager rsyslog
Description:
This command sets the external server used for rsyslog streaming and BMC log forwarding.
Syntax:
Sample Usage:
RScmCli# set manager rsyslog -s 10.10.10.10
Completion Code: Success

RScmCli# set manager rsyslog -h
usage: set manager rsyslog [-h] [-s SERVER]
optional arguments:
-h, --help show this help message and exit
-s SERVER
server ip to set

Commands

SW: RSCM CLI

3.4Server

Show Commands
•
•
•
•
•
•
•

show system info
show system health
show system fru
show system state
show system presence
show system default Power
show system power Limit

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 96

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Classified
as
Microsoft
Highly
Confidenti
al

show system power reading
show system power Alert
show system power Throttle
show system fpga health
show system fpga temp
show system fpga i2cversion
Show system fpga assetinfo
show system boot
show system Log read
show system bios config
show system bios code
show system bios update
show system tpm Presence
Show system type
show system datasafe policy
show system datasfe trigger
show system nvme
show system led
show system file list
show system cerberus version
show system cerberus pfm version
show system cerberus pfm id
show system cerberus log
show system user list

Set Commands
set system log clear
set system power alert
Set system tpm presence
set system on
set system off
set system reset
set system led on
set system led off
set system default power on
set system default power off
set system power limit value
set system power limit on
set system power limit off
set system nextboot

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•
•
•

Page | 97

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•

Classified
as
Microsoft
Highly
Confidenti
al

set system bios config
set system bios update
set system rmedia mount
set system rmedia unmount
set system file delete
set system file get
set system file put
set system cerberus update
set system cerberus pfm update
set system soc update
set system cerberus clear
set system user password

Serial Commands
•
•

Start Serial Session
Stop Serial Session

show system info
Description:
This command shows information about the system, including serial number and version information.
Syntax:
RScmCli# show/sh system info <-i server_index > [-h]
-i – Server index (1-48)
-h – Help, display the correct syntax
SW: RSCM CLI

Sample usage:
To get information for system 1, execute the following command:
RScmCli# show system info -i 1
Sample output:
RScmCli# show system info -i 6
Id: 6
Name: Server6
HostName: 172.17.0.21
ChassisId: N/A
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 98

SW: RSCM CLI

Classified
as
Microsoft
Boot_BootSourceOverrideEnabled: True
Highly
Boot_BootSourceOverrideTarget: Force Boot from remote drive (virtual USB)
Confidenti
SystemType: Blade Enclosure
al

AssetTag: N/A
Manufacturer: Microsoft
Model: C44AD
SKU: N/A
SerialNumber: P44804454000903A
PartNumber: M1334480-900
Description: N/A
UUID: 04272826-0891-288a-2e10-c1456c2b4fd6
Mac Address: 04:27:28:26:08:91
Server:
HWVersion: C44AD
IndicatorLED: Off
PowerState: On
BMCMacAddress: 5c:fe:9e:0e:5d:a5
BiosVersion: C44AD.0.BS.1B06.GN.1
BMCVersion: M1120_C44AD.OBMC.25.01.03-20250103.3
DCSCMCpldVersion: 030200
CpldVersion: 000C00
Status:
State: On
Health: Ok
HealthRollUp: Ok
ProcessorSummary:
Count: 2
Status:
State: Present
Health: Ok
SW: RSCM CLI

HealthRollUp: Ok
Model: Granite Rapids
MemorySummary:
TotalSystemMemoryGib: 1536
Status:
State: Enabled
Health: Ok
HealthRollUp: Ok
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 99

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

show system health
Description:
This command gets the health information of the specified server.
Syntax:
RScmCli# show system health -i <serverId>
-i – Server index (1-48)
-h – Help, display the correct syntax
-p PCIE information
-n NVME information [Not Supported]
Sample usage:
To get the health information for server 1, use the following command:
RScmCli# show system health -i 31 -p

0xca0

0xa812

0xa812

0x100

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Sample Output:
PCIE Information:
1:
Device Id: 0xb211
PCIe Index: 5
PCIe Status: Present
SubSystem Id: 0x1414
SubSystem vendor Id:
Vendor Id: 0x1414
2:
Device Id: 0xa80a
PCIe Index: 13
PCIe Status: Present
SubSystem Id: 0x144d
SubSystem vendor Id:
Vendor Id: 0x144d
3:
Device Id: 0xa80a
PCIe Index: 14
PCIe Status: Present
SubSystem Id: 0x144d
SubSystem vendor Id:
Vendor Id: 0x144d
4:
Device Id: 0x2a49
PCIe Index: 15
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id:
Vendor Id: 0x1c5c
5:
Device Id: 0x2a49
PCIe Index: 16
PCIe Status: Present

Page | 100

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
6:
Device Id: 0x2a49
PCIe Index: 17
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
7:
Device Id: 0x2a49
PCIe Index: 18
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
8:
Device Id: 0x2a49
PCIe Index: 19
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
9:
Device Id: 0x2a49
PCIe Index: 20
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
10:
Device Id: 0x2a49
PCIe Index: 21
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
11:

SW: RSCM CLI

Device Id: 0x2a49
PCIe Index: 22
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
12:
Device Id: 0x2a49
PCIe Index: 23
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
13:
Device Id: 0x2a49
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 101

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

PCIe Index: 24
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
14:
Device Id: 0x2a49
PCIe Index: 25
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
15:
Device Id: 0x2a49
PCIe Index: 26
PCIe Status: Present
SubSystem Id: 0x1c5c
SubSystem vendor Id: 0x100
Vendor Id: 0x1c5c
Completion Code: Success

show system fru
Description:
This command gets the FRU information of the specified server.
Syntax:
RScmCli# show system fru -f <fru-id> -i <serverId>
-i – Server index (1-48)
-f - display fru apart from 0
-h – Help, display the correct syntax
Sample usage:
To get the asset (FRU) information for server 1, use the following command:
RScmCli# show system fru -i 1

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Sample output:
AssetTag: N/A
Board Mfg: Microsoft
Board Mfg Date: Tue Aug 30 08:19:00 2016
Board Part Number: X943064-005
Board Product: C2012
Board Serial Number: B5500T01D0116340014EJ0LC
Manufacturer: Microsoft
Model: N/A
Product Part Number: M1011544-001
Product Serial: B8100T01003063500007J0SA
Product Version: 4.0
Completion Code: Success
Page | 102

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

show system state

Description:
This command gets the ON/OFF state of the server (whether the server chipset is receiving power).
When ON, server is receiving AC power (hard power state) and the chipset is receiving power (soft power state).
When OFF, server chipset is not receiving power.
This command also returns the status of the data save status (NVDIMM save and non-plp PCIe save) using
“DatasaveStatus” and the amount of time in seconds to wait for save operation to complete using
“DatasaveRemainingTime” (when save is pending).
Possible values for DatasaveStatus are,
Unknown
NotApplicable
SaveNotStarted
SavePending
SaveCompleted
DatasaveRemainingTime in seconds is reported when DatasaveStatus is SavePending
Syntax:
RScmCli# show system <-i server_index> [-h]
-i – Server index (1-48)
-h – Help, display the correct syntax
Sample usage:
To get the ON/OFF state of server 1, use the following command:
RScmCli# show system state -i 2
DatasaveStatus: SaveNotStarted
State: ON
Completion Code: Success

SW: RSCM CLI

When save is pending,
RScmCli# show system state -i 2
DatasaveRemainingTime: 365
DatasaveStatus: SavePending
State: ON
Completion Code: Success

show system presence
Description:
This command shows the system physical presence

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 103

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# show system presence <-i server_index > [-h]
-i – server index (1-48)
-h – Help, display the correct syntax

Sample usage:
To get the power state for server 1, use the following command:
RScmCli# show system presence –i 1

Sample output:
Port Presence: True
Completion Code: Success

show system default power
Description:
This command gets the default power state of the server ON/OFF.
Syntax:
RScmCli# show system default power <-i server_index >
-i – server index, the number of servers (1-48)
-h – Help, display the correct syntax

[-h]

Sample usage:
To get the default power state of of server 1 , use the following command:
RScmCli# show system default power –i 1

SW: RSCM CLI

Sample output:
Default Power State: OFF
Completion Code: Success

show system power limit
Description:
This command shows the power limit for a server.
Syntax:
RScmCli# show system power limit <-i server_index> [-h]
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 104

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-i – server index, the number of servers (1-48)
-h – Help, display the correct syntax

Sample usage:
To show the power limit for server 1, use the following command:
RScmCli# show system power limit –i 1

Sample output:
StaticLimitInWatts: 740 Watts
StaticState: No Active Power Limit
Completion Code: Success

show system power reading
Description:
This command gets the power reading for a server. The command can be used for monitoring and or other power
control mechanism (refer to the SetSystemPowerLimit command).
Syntax:
RScmCli# show system power reading <-i server_index > [-h]
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

Sample usage:
To show the power reading for server 1, use the following command:
RScmCli# show system power reading –i 1

SW: RSCM CLI

Sample output:
AvgPowerReadingWatts: 940
MaxPowerReadingWatts: 1040
MinPowerReadingWatts: 46
PowerReadingWatts: 940
SamplingPeriodSeconds: 176
Completion Code: Success

show system power alert
Description:
This command gets the power alert policy for a system.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 105

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# show system power alert <-i server_index > [-h]
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

Sample usage:
To show the power alerpolicy for server 1, use the following command:
RScmCli# show system power alert -i 1
Sample output:
AlertAction: NoAction
AlertLimitInWatts: 800
AutoRemoveLimitDelayInSecs: 20
FastThrottleDurationInMsecs: 10
IsAlertActive: False
PowerDrawnInWatts: 940
Server ID: 10
Completion Code: Success

show system power throttle
Description:
This command gets the throttling statistics for a System
Syntax:
RScmCli# show system power throttle [-h] -i system-id
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

RScmCli#

SW: RSCM CLI

Sample usage:
To show the power throttling statistics for server 1, use the following command:
show system power throttle -i 1

Sample output:
AlertLimitInWatts: 800
AutoProchotStatus: False
BladeProchotStatus: False
PowerDrawnInWatts: 940
Server ID: 10
StaticLimitInWatts: 16309
StaticLimitStatus: No Active Power Limit Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 106

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

show system fpga health
Description:
This command gets the system FPGA health
Syntax:
RScmCli# show system fpga health [-h] -i system-id
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

Sample usage:
To show the fpga health for server 1, use the following command:
RScmCli#

show system fpga health -i 1

Sample output:
Link 0 Rx Activity: 0
Link 0 Tx Activity:
Link 0 Tx Ready: 1
Link 0 Up: 1
Link 1 Rx Activity:
Link 1 Tx Activity:
Link 1 Tx Ready: 0
Link 1 Up: 0
Link 2 Rx Activity:
Link 2 Tx Activity:
Link 2 Tx Ready: 0
Link 2 Up: 0
PCIe HIP 0 Up: 1
PCIe HIP 1 Up: 1

1
1
1
0
0

Completion Code: Success

SW: RSCM CLI

If server has Celestial FPGA, SOC network link2 status shown as below:
RScmCli# show system fpga health -i 31

Sample output:
Link 0 Rx Activity: 0
Link 0 Tx Activity:
Link 0 Tx Ready: 1
Link 0 Up: 1
Link 1 Rx Activity:
Link 1 Tx Activity:
Link 1 Tx Ready: 0
Link 1 Up: 0
Link 2 Rx Activity:

1
1
1
0

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 107

SW: RSCM CLI

Link
Link
Link
PCIe
PCIe

Classified
as
Microsoft
Highly
Confidenti
al

2 Tx Activity: 0
2 Tx Ready: 0
2 Up: 0
HIP 0 Up: 1
HIP 1 Up: 1
Completion Code: Success

show system fpga temp
Description:
This command gets the system FPGA temperature in Celsius.
Syntax:
RScmCli# show system fpga temp [-h] -i system-id
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

Sample usage:
To show the fpga temp for server 1, use the following command:
RScmCli# show system fpga temp -i 1

Sample output:
Temperature in Celsius: 44
Completion Code: Success

show system fpga i2cversion
Description:
This command gets the system FPGA I2C version.

SW: RSCM CLI

Syntax:
RScmCli# show system fpga i2cversion [-h] -I system-id
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

Sample usage:
To show the fpga i2c version for server 1, use the following command:
rScmCli# show system fpga i2cversion -i 1

Sample output:
I2C Version: 0
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 108

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

show system fpga assetinfo
Description:
This command gets the system FPGA assert information.
Syntax:
RScmCli# show system fpga assetinfo [-h] -i system-id
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

Sample usage:
To show the fpga assetinfo for server 1, use the following command:
RScmCli# show system fpga assetinfo -i 1
Sample output:
Product Custom Field 1: 03A
Product Custom Field 2: 439403165248323232323232
Product FRU File ID: 3
Product Manufacturer: Microsoft
Product Model Number: M1262026-002
Product Name: A2051
Product Serial Number: P20264044030203A
Product Version: 4.0
Completion Code: Success

show system boot
Description:
This command gets the pending boot order to be applied the next time the server boots.
Once the boot order is applied, GetNextBoot will return the default value of NoOverRide.

SW: RSCM CLI

Syntax:
RScmCli# show system boot -h
usage: show system boot [-h] [-b {0,1}] -i server-id
optional arguments:
-h, --help

show this help message and exit

-b {0,1}

device id (0:Host OS or 1:Soc)

required arguments:
-i server-id

server-id

Sample usage:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 109

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

To get the next boot device type for server 1, use the following command:
RScmCli# show system boot -i 21

Sample output:
BootSourceOverrideEnabled: Once
BootSourceOverrideMode: Legacy
BootSourceOverrideTarget: Force PXE
Next boot is: Force PXE
Completion Code: Success
To get next boot device type for Soc on server 1
RScmCli# show system boot -i 1 -b 1
SocBootMode: Emmc

show system Log read
Description:
This command reads the log from a server. The server log (system event log) contains information about
events/warnings/alerts pertaining to that server like thermal throttling of servers due to overheating, etc.
Syntax:
RScmCli# show system log read <-i server_index> [-h]
-i – Server index, the number of servers (1-24)
-h – Help, display the correct syntax

Sample usage:

Sample output:
1d | 11/09/2016
reset/clear
1e | 11/09/2016
Supply AC l
1f | 11/09/2016
Supply AC l
20 | 11/09/2016
Supply AC l
21 | 11/09/2016
Supply AC l
22 | 11/09/2016

| 19:49:13 | Event Logging Disabled SEL | Log area
ed | Asserted
| 19:49:30 | Power Supply PSU_Status_Event | Power
ost | Asserted
| 19:49:30 | Power Supply PSU_Status_Event | Power
ost | Asserted
| 19:49:31 | Power Supply PSU_Status_Event | Power
ost | Deasserted
| 19:49:31 | Power Supply PSU_Status_Event | Power
ost | Deasserted
| 22:39:36 | Unknown NM SmaRTCLST | State Deasserted | Asserted

Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 110

SW: RSCM CLI

To read the server log for server 1, use the following command:
RScmCli# show system log read -i 21

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

show system bios Config

Description:
GetServerBiosConfiguration API returns the following information corresponding to the server’s BIOS configuration,
1. BiosConfiguration currentConfig
- ‘currentConfig’ specifies the Bios configuration setting that is currently active in the server.
2. BiosConfiguration chosenConfig
‘chosenConfig’ specifies the Bios configuration setting that is chosen by the user (via the
SetServerBiosConfiguration API) and will be activated in the subsequent server reboot operation.
3. List<AvailableBiosConfiguration> availableConfigs
- ‘availableConfigs’ is the list of BIOS configurations that are supported in the BIOS. The user can review the list
- and choose the appropriate configuration for the server via the SetServerBiosConfiguration API.
‘BiosConfiguration’ is a 4 value tuple that uniquely identify a certain configuration in the BIOS,
- Int majorConfig
o Specifies the major configuration identifier (see AvailableBiosConfiguration below)
- Int minorConfig
o Specifies the minor configuration identifier (see AvailableBiosConfiguration below)
‘AvailableBiosConfiguration’ list the available Bios configurations and provides a semantic association to the
configuration in the form of a 3-character ‘ConfigName’. Example of ‘ConfigName’ are, GN1, AZ1, BN1, BN2 etc.
Syntax:
RScmCli# show system bios config -i <server-index>
-i - server Id
-h - help; display the correct syntax

Sample usage:
RScmCli# show system bios config -i 3

Sample Output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

AvailableConfigurations :
1 :
Config Name : GN
Config Value : 0.0
2 :
Config Name : AE
Config Value : 1.15
3 :
Config Name : ZC
Config Value : 4.14
4 :
Config Name : ZD
Config Value : 4.12
Current BIOS Configuration : 0.0
Chosen BIOS Configuration : 0.0
Page | 111

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

show system bios Code
Description:
This command gets the post code for the server with specified server id.
Syntax:
RScmCli# show system bios code <-i server_index> [-h]
server_index - the target server number. Typically 1-48
-h - help; display the correct syntax

Sample usage:
RScmCli# show system bios code -i 27
Sample output:
Bios Code:
a9 aa ae af e0
be b9 b7 b8 ba
4f 61 9a 78 68
94 95 96 ef 92
a2 a2 a2 a0 a2
92 92 92 92 92
0 0 0 0 0
0 0 0 0 0
Completion

2 3 4 4 5 5 6 19 a1 a3 a3 a3 a3 a3 a3 a7 a9 a7 a7 a7 a7 a8 a9
e1 e4 e3 e1 e4 e3 e5 b0 b0 b1 b4 b2 b3 b3 b3 b6 b6 b6 b6 b6 b6 b7 b7
b9 bb b9 b9 b7 bc bf e6 e7 e8 e9 eb ec ed ee e6 e7 e8 e9 eb ec ed ee
70 d0 d1 d3 d4 91 92 94 94 94 94 94 94 94 94 94 94 94 94 94 94 94 94
92 92 92 92 92 92 99 91 d5 92 92 92 92 92 92 92 92 97 98 9d 9c a0 a2
a2 a2 a2 a2 a2 a2 a2 92 a0 a2 a2 a2 a0 a2 a2 a2 a2 a2 a2 a2 a2 99 92
92 ad 78 d9 ad 78 79 b1 a0 ee ee ee 84 aa e3 e3 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
Code: Success

show system bios update
SW: RSCM CLI

Description:
This command shows BIOS firmware update status.
Syntax:
RScmCli# show system bios update [-h] -i <server-id>
server_index - the target server number. Typically 1-48
-h - help; display the correct syntax

Sample usage:
RScmCli# show system bios update -i 30

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 112

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample output:
FW Status: FW update not started
Completion Code: Success

show system bmc update
Description:
This command shows BMC firmware update status.
Syntax:
RScmCli# show system bmc update [-h] -i server-id [-c FW_FLASH_REGION]
-i server-id the target server number.
Typically 1-48
-c FW_FLASH_REGION. Index of BMC to be queried. (1 [Default])
-h - help; display the correct syntax

Sample usage:
RScmCli# show system bmc update -i 30
Sample output:
FW Status: FW update not started
Completion Code: Success

show system cpld update
Description:

Syntax:
usage: show system cpld update [-h] -i server-id [-s INDEX]
optional arguments:
-h, --help
show this help message and exit
-s INDEX
Index of HPM CPLD/FPGA to be queried. (1 [Default])
required arguments:
-i server-id server-id

Sample usage:
RScmCli# show system cpld update -i 30
Sample output:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 113

SW: RSCM CLI

This command shows CPLD firmware update status for the System/HPM CPLD.

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

FW Status: FW update not started
Completion Code: Success

show system cpld2 update
Description:
This command shows CPLD firmware update status for the System/HPM CPLD 2.
Syntax:
usage: show system cpld2 update [-h] -i server-id [-s INDEX]
optional arguments:
-h, --help
show this help message and exit
-s INDEX
Index of HPM CPLD/FPGA 2 to be queried. (1 [Default])
required arguments:
-i server-id server-id

Sample usage:
RScmCli# show system cpld2 update -i 30
Sample output:
FW Status: FW update not started
Completion Code: Success

show system scmcpld update
Description:
This command shows the SCM (Security and Control Module) CPLD’s firmware update status
Syntax:

optional arguments:
-h, --help
show this help message and exit
-t {0,1,2}

Type of the firmware image {0: bootloader , 1:Image_A, 2: Image_B}.

If not give, 1 (Image_A) is considered
-s INDEX
Index of SCM CPLD to be queried. (1 [Default])
required arguments:
-i server-id server-id

Sample usage:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 114

SW: RSCM CLI

usage: show system scmcpld update [-h] -i server-id [-t {0,1,2}] [-s INDEX]

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# show system scmcpld update -i 10
Sample output:
FW Status: FW update not started
Completion Code: Success

show system globalcpld update
Description:
This command shows CPLD firmware update status for the Global CPLD.
Syntax:
usage: show system globalcpld update [-h] -i server-id
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i server-id server-id

Sample usage:
RScmCli# show system globalcpld update -i 30
Sample output:
FW Status: FW update not started
Completion Code: Success

show system tpm presence
Description:
This command checks whether TPM physical prsence is set.
SW: RSCM CLI

Syntax:
RScmCli# show system tpm presence [-h] -i <server-id>
server_index - the target server number. Typically 1-48
-h - help; display the correct syntax

Sample usage:
RScmCli# show system tpm presence -i 27
Sample output:
PhysicalPresence: False
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 115

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

show system nvme
This command shows nvme status.
Syntax:
RScmCli# show system nvme [-h] -i <server-id>
server_index - the target server number. Typically 1-48
-h - help; display the correct syntax

Sample usage:
RScmCli# show system nvme -i 30

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Sample output:
RScmCli# show system nvme -i 3
1:
Device: 1
Drive Functional: True
Drive Not Read: False
Drive Presence: True
Drive Status:
No Reset Required: True
Port Type: M.2
Port1 Link Active: False
Port2 Link Active: True
SMART Warn: FF
SMBUS Arbitration: True
Serial No: S5XMNC1TA06774
M.2
Slot: 1
Temp: 25
Vendor: 0x144d
2:
Device: 2
Drive Functional: True
Drive Not Read: False
Drive Presence: True
Drive Status:
No Reset Required: True
Port Type: M.2
Port1 Link Active: False
Port2 Link Active: True
SMART Warn: FF
SMBUS Arbitration: True
Serial No: S5XMNC1TA06945
M.2
Slot: 2
Temp: 26
Vendor: 0x144d
Page | 116

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

3:
Device: 1
Drive Functional: True
Drive Not Read: False
Drive Presence: True
Drive Status:
No Reset Required: True
Port Type: E1.x
Port1 Link Active: False
Port2 Link Active: True
SMART Warn: FF
SMBUS Arbitration: True
Serial No: 3023KNC7N5139I180Q2V
E1.x
Slot: 1
Temp: 22
Vendor: 0x1c5c
4:
Device: 2
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 2
Temp: Vendor: 5:
Device: 3
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 3
Temp: Vendor: 6:

SW: RSCM CLI

Device: 4
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 4
Temp: Vendor: 7:
Device: 5
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 5
Temp: Vendor: 8:
Device: 6
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 117

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Slot: 6
Temp: Vendor: 9:
Device: 7
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 7
Temp: Vendor: 10:
Device: 8
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 8
Temp: Vendor: 11:
Device: 9
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 9
Temp: Vendor: 12:
Device: 10
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 10
Temp: Vendor: 13:

SW: RSCM CLI

Device: 11
Drive Presence: Unknown
Drive Status:
Port Type: E1.x
Slot: 11
Temp: Vendor: 14:
Device: 12
Drive Functional: True
Drive Not Read: False
Drive Presence: True
Drive Status:
No Reset Required: True
Port Type: E1.x
Port1 Link Active: False
Port2 Link Active: True
SMART Warn: FF
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 118

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

SMBUS Arbitration: True
Serial No: 3023KNC7N5139I180Q3Q
E1.x
Slot: 12
Temp: 23
Vendor: 0x1c5c
Completion Code: Success

show System Type
Description:
This command shows system type.
Syntax:
RScmCli# show system type [-h] -i <server-id>
server_index - the target server number. Typically 1-48
-h - help; display the correct syntax
Sample usage:
RScmCli# show system type -i 30
Sample output:
RScmCli# show system type -i 30
Control Interface Type: IPMI
OEM ID: 311
System Type: C41A8
Completion Code: Success

show system datasafe policy
Description:
This command show datasafe (NVDIMM, PCIe) policy settings
Syntax:
SW: RSCM CLI

RScmCli# show system datasafe policy [-h] -i <server-id>
server_index - the target server number. Typically 1-48
-h - help; display the correct syntax

Sample usage:
RScmCli# show system datasafe policy -i 30
Sample output:
RScmCli# show system datasafe policy -i 30
NVDIMM Backup Delay: 0
PCIe Reset Delay: 2
Completion Code: Success
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 119

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

show system datasafe trigger
Description:
This command shows datasafe trigger status
Syntax:
RScmCli# show system datasafe trigger [-h] -i <server-id>
server_index - the target server number. Typically 1-48
-h - help; display the correct syntax

Sample usage:
RScmCli# show system datasafe trigger -i 30
Sample output:
RScmCli# show system datasafe trigger -i 30
NVDIMM Backup Delay: 0
PCIe Reset Delay: 2
Completion Code: Success

show system led
Description:
This command shows system led state.
Syntax:
RScmCli# show system led [-h] -i <server-id>
server_index - the target server number. Typically 1-48
SW: RSCM CLI

-h - help; display the correct syntax

Sample usage:
RScmCli# show system led -i 30
Sample output:
RScmCli# show system type -i 30
LED Status: Off
Completion Code: Success

show system file list

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 120

SW: RSCM CLI

Description:
This command list files in the server available for file transfer operations
Syntax:
RScmCli# show system file list [-h] -i server-id [-d target directory]
-i – server index, the number of servers (1-48)
-h – Help, display the correct syntax

Classified
as
Microsoft
Highly
Confidenti
al

Sample usage:
RScmCli# show system file list –i 1
Sample output:
FTPFiles:
Completion Code: Success

show system cerberus version
Description:
This command reads platform cerberus and soc cerberus version from a server.
Syntax:
RScmCli# show system cerberus version [-h] -i server-id [-t {0,1}] [-b {0,1}]
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax
-t – display Cerberus version or RIOT version
-b device id (0:Platform Cerberus or 1:Soc Cerberus)
-c CERBERUS_INDEX

cerberus component index

To read the platform Cerberus version for server 1, use the following command:
RScmCli# show system cerberus version -i 1 -b 0 -t 0
Sample output:
FirmwareVersion: 3.1.2.5-40913034
Completion Code: Success
To read both platform Cerberus and Soc Cerberus version for server 1, use the following command:
RScmCli# show system cerberus version -i 1
Sample output:
Platform:
FirmwareVersion: 3.1.2.5-40913034
Soc:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 121

SW: RSCM CLI

Sample usage:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

FirmwareVersion: 2.4.12.4

Completion Code: Success

show system cerberus pfm version
Description:
This command reads pfm version of platform cerberus and soc cerberus from a server.
Syntax:
RScmCli# show system cerberus pfm version -i server-id [-b {0,1}] [-p {0,1}]
[-r {0,1}]
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax
-b device id (0:Platform Cerberus or 1:Soc Cerberus)
-c CERBERUS_INDEX

cerberus component index

-p port id Platform (0:BMC, 1:BIOS), Soc (0:FIP 1:NITRO)
-r

Region id Platform [0, 1], Soc [0, 1]

Sample usage:
To read the pfm version of platform Cerberus for server 1, use the following command:
RScmCli# show system cerberus pfm version -i 1 -b 0 -p 0 -r 0

SW: RSCM CLI

Sample output:
ActivePFMSupportedVersions:
3.01.0
3.02.0
3.03.0
3.04.0
9.04.117
3.10.0
9.10.118
9.11.119
3.15.0
3.16.0
3.20.0
3.25.0
Completion Code: Success

To read pfm version of both platform Cerberus and Soc Cerberus pfm version for server 1, use the following command:
RScmCli# show system cerberus pfm version -i 1
Sample output:
Platform:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 122

SW: RSCM CLI

BmcActivePfmSupportedVersions:
No valid PFM found for port
BmcPendingSupportedVersions:
No valid PFM found for port
BiosActivePfmSupportedVersions:
No valid PFM found for port
BiosPendingSupportedVersions:
No valid PFM found for port

Classified
as
Microsoft
Highly
Confidenti
al

0, region 0
0, region 1
1, region 0
1, region 1

Soc:
FipActivePfmSupportedVersions:
FIP
03.08.2201312136
03.09.2203031806
03.10.2203260120
03.11.2205030043
03.12.2205310338
03.13.2206090448
03.14.2206242151
03.15.2207292213
03.16.2208302020
03.17.2209101822
03.18.2210070422
03.19.2210212003
03.20.2212020030
03.21.2301282058
03.22.2302242333
03.23.2304080040
03.24.2305012341
03.25.2306030134
03.26.2307111850
03.27.2307290134
03.28.2309051849
03.29.2310040339
FipPendingSupportedVersions:
No valid PFM found for port 0, region 1
NitroActivePfmSupportedVersions:
No valid PFM found for port 1, region 0
NitroPendingSupportedVersions:
No valid PFM found for port 1, region 1
SW: RSCM CLI

Completion Code: Success

show system cerberus pfm id
Description:
This command reads platform cerberus and soc cerberus pfm id from a server.
Syntax:
RScmCli# show system cerberus pfm id -i server-id [-b {0,1}] [-p {0,1}][-r {0,1}]
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 123

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-b device id (0:Platform Cerberus or 1:Soc Cerberus)
-c CERBERUS_INDEX

cerberus component index

-p port id Platform (0:BMC, 1:BIOS), Soc (0:FIP 1:NITRO)
-r

Region id Platform [0, 1], Soc [0, 1]

Sample usage:
To read the pfm version of platform Cerberus for server 1, use the following command:
RScmCli# show system cerberus pfm id -i 1 -b 0 -p 0 -r 0
Sample output:
ActiveIdentifier: 50
Completion Code: Success

To read pfm id from both platform Cerberus and Soc Cerberus for server 1, use the following command:
RScmCli# show system cerberus pfm id -i 1
Sample output:
Platform:
BiosPfmActiveIdentifier: No valid PFM found for port 1, region 0
BiosPfmPendingIdentifier: No valid PFM found for port 1, region 1
BmcPfmActiveIdentifier: No valid PFM found for port 0, region 0
BmcPfmPendingIdentifier: No valid PFM found for port 0, region 1
Soc:
FipPfmActiveIdentifier: 25
FipPfmPendingIdentifier: No valid PFM found for port 0, region 1
NitroPfmActiveIdentifier: No valid PFM found for port 1, region 0
NitroPfmPendingIdentifier: No valid PFM found for port 1, region 1
Completion Code: Success

SW: RSCM CLI

show system cerberus log
Description:
This command reads debug/tcg log of platform cerberus and soc cerberus from a server.
Syntax:
RScmCli# show system cerberus log {debug,tcg} -i server-id [-b {0,1}]
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax
-b device id (0:Platform Cerberus or 1:Soc Cerberus)
-c CERBERUS_INDEX

cerberus component index

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 124

SW: RSCM CLI

Sample usage:
To read the platform Cerberus pfm update status for server 1, use the following command:
RScmCli# show system cerberus log tcg -i 1 -b 0

Classified
as
Microsoft
Highly
Confidenti
al

Sample output:
members:
0:
Id: 0
MeasurementIndex: 0
TCGEventType: 0xE1000000
Digest:
E6D14D4F19803474483F516201D8B822F10FF1D0CF0F995C946BC79AC2643BADB3F099C72AD8513FA3F81
E840EF5CF5A
Measurement:
52A2A90A9F7ABE89D1349352839064301600A2CBE1F82042214D8B19CB3964A4D3605114F13DEB0AC444C
BDBEEF4FA89
...
Completion Code: Success

show system cerberus fpga version
Description:
This command lists cyclone-v FPGA version on Overlake cards.
Syntax:
RScmCli# show system cerberus fpga version -h
usage: show system cerberus fpga version [-h] -i server-id -b {1} -t {1}
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i server-id server-id
-b {1}
device id (1:Soc)
-t {1}
fpga type (1:cyclonev)

SW: RSCM CLI

Sample usage:
RScmCli# show system cerberus fpga version -i 34 -b 1 -t 1
Version: 0.16.1
Completion Code: Success

show system user list
Description:
This command lists all the users in a server connected to RM.
Syntax:
RScmCli# show system user list [-h] -i server-id
-i – Server index, the number of servers (1-48)

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 125

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-h – Help, display the correct syntax

Sample usage:
To list all users in BMC connected to slot 31:
RScmCli# show system user list -i 31
Sample output:
accounts:
{
enabled: true
id: 1
name: admin
role: ADMINISTRATOR
}
num_accounts: 1
Completion Code: Success

Show system gpu update (Only for C44AD)
Description:
This command show the system gpu firmware update status
Syntax:
RScmCli# show system gpu update -h
usage: show system gpu update [-h] -i server-id -s index
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i server-id server-id
-s index
component index of the GPU to be updated

SW: RSCM CLI

Sample usage:
RScmCli# show system gpu update -i 6 -s 1
FW Status: FW update not started
Completion Code: Success

Show system mcu update (Only for C44AD)
Description:
This command show the system mcu firmware update status
Syntax:
RScmCli# show system mcu update -h
usage: show system mcu update [-h] -i server-id -s index
optional arguments:
-h, --help
show this help message and exit

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 126

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

required arguments:
-i server-id server-id
-s index
component index of the MCU to be updated

Sample usage:
RScmCli# show system mcu update -i 6 -s 1
FW Status: FW update completed successfully
Completion Code: Success

set system log clear
Description:
This command clears the logs from a server.
Syntax:
RScmCli# set system log clear [-h] -i server-id
-i – server index, the number of servers (1-48)
-h – Help, display the correct syntax
Sample usage:
To clear the server log for server 1, use the following command:
RScmCli# set system log clear –i 1
Sample output:
Clearing SEL.

Please allow a few seconds to erase.

Completion Code: Success

set system power alert
Description:
This command sets the power alert policy for a system.
SW: RSCM CLI

Syntax:
RScmCli# set sys power alert -h
usage: set system power alert [-h] -i SERVERID [-r remediation-action] -p POWERLIMIT
-e alert-action -f throttle-duration -d remove-delay
optional arguments:
-h, --help
show this help message and exit
-r remediation-actio remediation action, 0:nothing, 1:remove limit and re-arm
alert, 2:re-arm alert
required arguments:
-i SERVERID
server-id
required arguments:
-p POWERLIMIT
power limit in watts
-e alert-action
alert action, 0:nothing, 1:power limit only,
2:throttle and limit
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 127

SW: RSCM CLI

-f throttle-duration
-d remove-delay

Classified
as
Microsoft
Highly
Confidenti
al

fast throttle duration in milliseconds
auto remove power limit delay in seconds

To show the power alerpolicy for server 1, use the following command:
RScmCli# set system power alert -i 1 ..
Sample output:

set system on
Description:
This command supplies the power to the server chipset, initializing the boot process. This command is used to soft
power the server ON.
This command is an asynchronous command - the command will return immediately but it may take from a few
seconds to a few minutes to complete due to potential data save operation (NVDIMM or non-PLP PCIe save).
The command succeeds when there is no pending save operation (from a previously initiated system off/reset
toperation) on the blade. The command fails when there is pending save operation. The returned failure message
(StatusDescription) will include the amount of time to wait for save operation to complete, at which point this
command may be re-attempted. The user may also use "show system state" command to query the status of the save
operation.
Note: Please note for Celestial peak FPGA (Overlake support only set system reset command, Power Off/On are not
enabled/supported from FPGA)
Syntax:
RScmCli# set system on

<-i server_index | -a> [-h]

Optional arguments:
-h, --help
show this help message and exit
-b DEVICEID device id (0:Host OS or 1:Soc), by default 0
Required arguments:
server-id

SW: RSCM CLI

-i SERVERID

Sample usage:
To soft power ON server 1, use the following command:
RScmCli# set system on –i 1
Sample output:
When save is not pending,
RScmCli# set system on -i 2
State: ON
Completion Code: Success
When save is pending,
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 128

SW: RSCM CLI

Classified
as
Microsoft
RScmCli# set system on -i 2
Highly
Status Description: Operation not permitted for blade (2) due to pending
save,
Confidenti
retry after (365) seconds.
al

Completion Code: Failure

set system off
Description:
This command removes the power from the server chipset. This command is used to soft power the server OFF.
This command is an asynchronous command - the command will return immediately but it may take from few seconds
to few minutes to complete due to potential data save operation (NVDIMM or non-PLP PCIe save).
The command succeeds when there is no pending save operation (from a previously initiated system off/reset
operation) on the blade. The command fails when there is pending save operation. The returned failure message
(StatusDescription) will include the amount of time to wait for save operation to complete, at which point this
command may be re-attempted. The user may also use "show system state" command to query the status of the save
operation.
Note: Please note for Celestial peak FPGA (Overlake support only set system reset command, Power Off/On are not
enabled/supported from FPGA)
Syntax:
RScmCli# set system off <-i server_index | -a> [-h]
Optional arguments:
-h, --help
show this help message and exit
-b DEVICEID device id (0:Host OS or 1:Soc), by default 0
Required arguments:
-i SERVERID

server-id

Sample usage:
To soft power OFF server 1, use the following command:
RScmCli# set system off –i 1
SW: RSCM CLI

Sample output:
When save is not pending (this command will return success and initiate save)
RScmCli# set system off -i 2
State: OFF
Completion Code: Success
When save is pending,
RScmCli# set system off -i 2
Status Description: Operation not permitted for blade (2) due to pending save,
retry after (365) seconds.
Completion Code: Failure

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 129

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

set system reset
Description:
This command power cycles or soft resets the server(s).

Power cycle resets the server (causing a software reboot sequence). Server AC power signal remains ON throughout
This process. Any serial session active on that server will continue to be active during this process.
This command is an asynchronous command - the command will return immediately but it may take from few seconds
to few minutes to complete due to potential data save operation (NVDIMM or non-PLP PCIe save).
The command succeeds when there is no pending save operation (from a previously initiated system off/reset
operation) on the blade. The command fails when there is pending save operation. The returned failure message
(StatusDescription) will include the amount of time to wait for save operation to complete, at which point this
command may be re-attempted. The user may also use "show system state" command to query the status of the save
operation.
Syntax:
RScmCli# set system reset [-h] -i server-id
Optional arguments:
-h, --help
show this help message and exit
-b DEVICEID device id (0:Host OS or 1:Soc), by default 0.
Required arguments:
-i SERVERID

server-id

Sample usage:
To power cycle server 3, use the following command:
RScmCli# set system reset –i 3

Sample output:
When save is not pending (this command will succeed and initiate save),
SW: RSCM CLI

RScmCli# set system reset -i 2
Completion Code: Success
When save is pending,
RScmCli# set system reset -i 2
Status Description: Operation not permitted for blade (2) due to pending save,
retry after (365) seconds
Completion Code: Failure

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 130

SW: RSCM CLI

set system led on
Description:
This command turns the server UID LED On. The purpose of this UID LED is to identify the server.

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# set system led on <-i server_index> [-h]
-i – server index, the number of servers (1-48)
-h – Help, display the correct syntax
Sample usage:
To turn the server UID LED for server 1 ON, use the following command:
RScmCli# set system led on –i 1
Sample output:
Completion Code: Success

set system led off
Description:
This command turns the server UID LED Off. The purpose of this UID LED is to identify the server.
Syntax:
RScmCli# set system led off <-i server_index> [-h]
-i – server index, the number of servers (1-48)
-h – Help, display the correct syntax
Sample usage:

SW: RSCM CLI

To turn the server UID LED for server 1 OFF, use the following command:
RScmCli# set system led off –i 1
Sample output:
Completion Code: Success

set system default power on
Description:
This command sets the default power state of the server ON.
The default server power state denotes the behavior of the server after receiving AC power, either when a server is
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 131

SW: RSCM CLI

Classified
as
Microsoft
initially inserted in to its slot or power returns after a utility failure. If the server default power state is setHighly
to OFF,
the server won’t be powered ON after receiving AC input power. An explicit SetServerOn command needs
to be sent
Confidenti
al
to power ON the server. If the server default power state is set to ON, the server will be powered ON after receiving

AC input power.
Note that the server default power state does not affect the active power state of the server, only their behaviors
after a hard power recycle.
Syntax:
RScmCli# set system default power on <-i server_index > [-h]
-i – Server index (1-48)
-h – Help, display the correct syntax

Sample usage:
To set the default power state of server 1 to ON, use the following command:
RScmCli# set system default power on -i 1

Sample output:
Default Power State: ON
Completion Code: Success

set system default power off
Description:
This command sets the default power state of the server OFF.
Syntax:
RScmCli# set system default power off <-i server_index > [-h]
-i – Server index (1-48)
-h – Help, display the correct syntax
SW: RSCM CLI

Sample usage:
To set the default power state of server 1 to OFF, use the following command:
RScmCli# set system default power off -i 1

Sample output:
Default Power State: OFF
Completion Code: Success

set system power limit value

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 132

SW: RSCM CLI

Classified
as
Microsoft
Description:
Highly
This command sets the power limit for a server.
Confidenti
The power limit can be set for a variety of reasons including energy savings and under provisioning (consolidate
more
al

servers under a power hierarchy).
Syntax:
RScmCli# set system power limit value <-i server_index> <-l power_limit> [-h]
-i – Server index, the number of servers (1-48)
-l – Server power limit, in W
-h – Help, display the correct syntax
Sample usage:
To set the power limit for server 1 to 750 W, use the following command:
RScmCli# set system power limit value -i 1 -l 500
Sample output:
Completion Code: Success

set system power limit on
Description:
This command activates the power limit for a server and enables power throttling.
Syntax:
RScmCli# set system power limit on <-i server_index> [-h]
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax

SW: RSCM CLI

Sample usage:
To activate the power limit for server 1, use the following command:
RScmCli# set system power limit on –i 1
Sample output:
Completion Code: Success

set system power limit off
Description:
This command deactivates the power limit for a server and disables power throttling.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 133

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# set system power limit off <-i server_index > [-h]
-i – Server index, the number of servers (1-48)
-h – Help, display the correct syntax
Sample usage:
To deactivate the power limit for server 1, use the following command:
RScmCli# set system power limit off –i 1
Sample output:
Completion Code: Success

set system boot
Description:
This command sets the device boot type of the start boot device during the subsequent reboot for a server. A soft
power cycle (setserveractivepowercycle or setserveroff, then setserveron) after setting the boot options is required
for the boot setting to take effect.
Syntax:
RScmCli# set system boot -h
usage: set system boot [-h] [-b {0,1}] [-m boot-mode] [-p is-persistent] -i
SERVERID -t boot-type
show this help message and exit
device id (0:Host OS or 1:Soc)
Boot mode 0- Legacy or 1- UEFI
0- Non-persistent or 1- Persistent

required arguments:
-i SERVERID
server-id
-t boot-type
boot-type: 1. none: No override ;
2. pxe:Force PXE boot;
3. disk: Force boot from default Hard-drive;
4. bios:Force boot into BIOS Setup;
5. remotedrive: Force boot from remote drive –
virtual USB
6. emmc: Force boot from eMMC
7. usb: Force boot from attached USB
8. netunlock: Network Unlock
-m bootmode : 0 Legacy 1 UEFI
-p Persistent : 0 Non-persistent 1 persistent

Note: when Optional argument -b is set to 1(SoC), boot-type can only be set to: eMMC, USB, PXE and netunlock
Sample usage:
To set the boot device for server 1, use the following command:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 134

SW: RSCM CLI

optional arguments:
-h, --help
-b {0,1}
-m boot-mode
-p is-persistent

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set system boot -i 1 -t pxe

SW: RSCM CLI

Sample output:
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 135

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

set system bios config
Description:

SetServerBiosConfiguration sets the configuration that the users expects in the subsequent reboot of the server. We
expect the user to use the GetServerBiosConfiguration API and review the AvailableBiosConfiguration list and select
the chosen configuration which can be set with this API.
Syntax:
RScmCli# set system bios config <-i server_id> <-j majorConfig> <-n minorConfig> [h]
-i - server Id
-j - major configuration number (refer to getServerBiosConfig available
configurations)
-n - minor configuration number (refer to getServerBiosConfig available
configurations)
-h - help; display the correct syntax

Sample usage:
RScmCli# set system bios config -i 8 -j 0 -n 0

Sample output:
Completion Code: Success

set system bios update
Description:
The firmware update for the server BIOS firmware
Syntax:
SW: RSCM CLI

set system bios update [-h] -i SERVERID -f FILE [-c {1,2}] [-a]

optional arguments:
-h, --help

show this help message and exit

-c {1,2}
Update primary or secondary BIOS flash. (1 [Default] : Primary BIOS
flash, 2 : Secondary BIOS flash)
-a, --async

Run BIOS update in asynchronous mode

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 136

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

required arguments:
-i SERVERID

server-id

-f FILE

BIOS firmware bin file name and it should be in the TFTP location

Sample usage:
usage: set system psu update [-h] -i server-id -f </tftp/psufw.txt>
-i <Server-id> Serever id <1 to 48 ids>
-f file-path

firmware file path to update.

Sample output:
Completion Code: Success

set system bmc update
Description:
The firmware update for the server BMC firmware
Syntax:
set system bmc update [-h] -i SERVERID -f FILE [-c FW_FLASH_REGION] [-a]

optional arguments:
-h, --help

show this help message and exit

-c FW_FLASH_REGION Index of BMC to be queried. (1 [Default])
Run BMC update in asynchronous mode

required arguments:
-i SERVERID
-f FILE
Sample usage:

server-id
BMC firmware bin file name and it should be in the TFTP location

usage: set system bmc update [-h] -i server-id -f </tftp/bmcfw.txt>
-i <Server-id> Serever id <1 to 48 ids>
-f file-path

firmware file path to update.

Sample output:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 137

SW: RSCM CLI

-a, --async

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code : Success

set system cpld update
Description:
The firmware update for the server CPLD (HPM CPLD).
Syntax:
usage: set system cpld update [-h] -i SERVERID -f FILE [-s INDEX] [-a]
optional arguments:
-h, --help
show this help message and exit
-s INDEX
Index of HPM FPGA/CPLD to be updated. (1 [Default])
-a, --async Run CPLD/FPGA update in asynchronous mode

required arguments:
-i SERVERID server-id
-f FILE
CPLD/FPGA firmware bin file name and it should be in the TFTP
location

Sample usage:
usage: set system cpld update [-h] -i server-id -f </tftp/cpldfw.txt>
-i <Server-id> Serever id <1 to 48 ids>
-f file-path

firmware file path to update.

Sample output:
Completion Code: Success

set system cpld2 update

The firmware update for the server CPLD 2(HPM CPLD2).
Syntax:
usage: set system cpld2 update [-h] -i SERVERID -f FILE [-s INDEX] [-a]
optional arguments:
-h, --help
show this help message and exit
-s INDEX
Component index of HPM FPGA/CPLD 2 to be updated. (1 [Default])
-a, --async Run CPLD/FPGA 2 update in asynchronous mode
required arguments:
-i SERVERID server-id
-f FILE
CPLD/FPGA 2 firmware bin file name and it should be in the TFTP
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 138

SW: RSCM CLI

Description:

SW: RSCM CLI

location

Sample usage:
usage: set system cpld2 update [-h] -i server-id -f </tftp/cpldfw.txt>

Classified
as
Microsoft
Highly
Confidenti
al

-i <Server-id> Serever id <1 to 48 ids>
-f file-path

firmware file path to update.

Sample output:
Completion Code: Success

set system scmcpld update
Description:
The firmware update for the SCM (Security and Control Module) CPLD firmware
Syntax:
usage: set system scmcpld update [-h] -i SERVERID -f FILE [-a] [-t {0,1,2}] [-s
INDEX]
optional arguments:
-h, --help
show this help message and exit
-a, --async Run SCM CPLD update in asynchronous mode
-t {0,1,2}
Type of the firmware image {0: bootloader , 1:Image_A, 2: Image_B}
-s INDEX Index of DC-SCM CPLD to be updated. (1 [Default])
required arguments:
-i SERVERID server-id
-f FILE
SCM CPLD firmware bin file name and it shoulde be in the TFTP
Location

Sample Usage:
SW: RSCM CLI

RScmCli# set system scmcpld update -i 10 -f scmcpld.bin

Sample Output:
Completion Code: Success

set system globalcpld update
Description:
The firmware update for the server global CPLD.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 139

SW: RSCM CLI

Syntax:
usage: set system globalcpld update [-h] -i SERVERID -f FILE [-a]

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help
show this help message and exit
-a, --async Run Global CPLD update in asynchronous mode
required arguments:
-i SERVERID server-id
-f FILE
Global CPLD firmware bin file name and it should be in the TFTP
location

Sample usage:
usage: set system globalcpld update [-h] -i server-id -f </tftp/cpldfw.txt>
-i <Server-id> Serever id <1 to 48 ids>
-f file-path

firmware file path to update.

Sample output:
Completion Code: Success

set system tpm presence
Description:
This command sets TPM physical presence
Syntax:
RScmCli# set system tpm presence [-h] -i <server-id> -p presence
server_index - the target server number. Typically 1-48
-h - help; display the correct syntax

SW: RSCM CLI

Sample usage:
RScmCli# set system tpm presence -i 27 -p 1
Sample output:
Completion Code: Success

set system remotedrive mount
Description:
This command mounts an iso image as a boot drive for the specified blade/server

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 140

SW: RSCM CLI

Note:
-

Classified
as
Microsoft
Highly
Confidenti
The ISO image file name specified in the command below is expected to be in the TFTP location before
al
this

command is run. Use ’set manager tftp get’ command to place the file before using this command.
After the execution of this command, setnextboot command on the blade/server should be used if this remote
media is expected to be used as a boot medium.

Syntax:
RScmCli# set system remotedrive mount -h
usage: set system remotedrive mount [-h] [-b {0,1}] [-m {1,2}] -i SERVERID -n
remotedrive-image-name

optional arguments:
-h, --help

show this help message and exit

-b {0,1}

device id (0:Host OS and 1:Soc)

-m {1,2}

image mount file type (1:hd(default) 2:cd)

required arguments:
-i SERVERID

server-id

-n remotedrive-image-name
Remote media image name

Sample usage:
RScmCli# set system remotedrive mount -i 6 -n overlake-rmedia.img

SW: RSCM CLI

RScmCli# set system remotedrive mount -i 6 –b 1 -n overlake-rmedia.img

Sample output:
Completion Code: Success

set system remotedrive unmount
Description:
This command unmounts an iso image from the specified blade/server.
Note:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 141

SW: RSCM CLI

Classified
as
Microsoft
Highly
- This command is expected to be used after the rmedia mount command has been successfully used.
Confidenti
Syntax:
al

RScmCli# set system remotedrive unmount -h
usage: set system remotedrive unmount [-h] [-b {0,1}] -i SERVERID [-m {1,2}]
optional arguments:
-h, --help

show this help message and exit

-b {0,1}

device id (0:Host OS and 1:Soc)

-m {1,2}

image mount file type (1:hd(default) 2:cd)

required arguments:
-i SERVERID

server-id

Sample usage:
RScmCli# set system remotedrive unmount -i 30
RScmCli# set system remotedrive unmount -i 30 -b 1

Sample output:
Completion Code: Success

set system file delete
Description:
This command deletes the specified file from the server.
Syntax:
RScmCli# set system file delete [-h] -i server-id -f file-name [-d target_directory]

SW: RSCM CLI

optional arguments:
-h, --help
show this help message and exit
[-d target_directory] target directory to delete file from
required arguments:
-i server-id server-id
-f file-name file-name

Usage:
RScmCli# set system file delete

-i

1 -f file-name

Sample Output:
Completion Code: Success
Usage with optional argument:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 142

SW: RSCM CLI

RScmCli# set system file get -f a.txt -i 19 -d /var/wcs/home/xyz

Sample Output:
Completion Code : Success

Classified
as
Microsoft
Highly
Confidenti
al

set system file get
Description:
This command gets the specified file from the server (to Rack Manager TFTP location)
Syntax:
RScmCli# set system file get [-h] -i server-id -f file-name [-d target_directory]
optional arguments:
-h, --help
show this help message and exit
[-d target_directory] target directory to copy file from to the RM
required arguments:
-i server-id server-id
-f file-name file-name

Usage:
RScmCli# set system file get

-i

1 -f file-name

Sample Output:
Completion Code : Success
Usage with optional argument:
RScmCli# set system file get -f a.txt -i 19 -d /var/wcs/home/xyz
Sample Output:
Completion Code: Success

set system file put
This command puts/copies the specified file to the server (from Rack Manager TFTP location)
Syntax:
RScmCli# set system file put [-h] -i server-id -f file-name [-d target_directory]
optional arguments:
-h, --help
show this help message and exit
[-d target_directory] target directory to copy file to from the RM
required arguments:
-i server-id server-id
-f file-name file-name
Usage:
RScmCli# set system file put -i 1 -f file-name

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 143

SW: RSCM CLI

Description:

SW: RSCM CLI

Sample Output:
Completion Code: Success
Usage with optional argument:
RScmCli# set system file put -f a.txt -i 19 -d /var/wcs/home/xyz

Classified
as
Microsoft
Highly
Confidenti
al

Sample Output:
Completion Code: Success

set system cerberus update
Description:
This command updates firmware of Platform Cerberus or SoC Cerberus.
Syntax:
RScmCli# set system cerberus update [-h] -b {0,1} -i SERVERID -f CERBERUS_FW_FILE
optional arguments:
-h, --help
show this help message and exit
required arguments:
-b DEVICEID device id (0:Platform or 1:Soc[CMC] or 2:Soc[OMC - OVL3 only] or 3x:MCTP Endpoint devices)
-c CERBERUS_INDEX cerberus component index
-i SERVERID server-id
-f CERBERUS_FW_FILE firmware file
-m IMPACTFUL impactful manticore update
-t TOKEN_FILE tokenfile for manticore authfwupdate

Usage:
RScmCli# set system cerberus update -i 1 -b 0 -f cerberus_v1.4.0.7.bin
Sample Output:
Completion Code : Success

Sample Output:
Status Description: The firmware update was applied successfully but the device
needs to be reset
Completion Code : Success

For mantocore authorized update:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 144

SW: RSCM CLI

For manticore impactful update:
RScmCli# set system cerberus update -i 1 -b 0 -f cerberus_v3.2.0.1.bin -m 1

SW: RSCM CLI

Classified
as
Microsoft
RScmCli# set system cerberus update -i 1 -b 0 -f cerberus_v3.2.1.2.bin -t
Highly
manticore_update_auth_v3.3.1.2.bin -m 1
Confidenti
al
Sample Output:

Status Description: The firmware update was applied successfully but the device
needs to be reset
Completion Code : Success

set system cerberus pfm update
Description:
This command update pfm of Platform Cerberus or Soc Cerberus
Syntax:
RScmCli# set system cerberus pfm update -b {0,1} -i SERVERID -p PORTID -f PFMFILE [a {0,1}]
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i server-id server-id
-b 0:platform cerberus 1: Soc cerberus
-c CERBERUS_INDEX Cerberus component index
-f file-name
-p port id Platform (0:BMC, 1:BIOS), Soc (0:FIP 1:NITRO)
-a 0:activate after reboot, 1:activate immediately

Usage:
RScmCli# set system cerberus pfm update -i 1 -b 0 -p 0 -f C2030.BC.PFM.55.bin -a 0

set system soc update
Description:
This command update Fip and Nitro firmware of Soc
Syntax:
RScmCli# set system soc update [fip, nitro] -i SERVERID -p PORTID -f
SOC_COMPONENT_FW_FILE
optional arguments:
-h, --help
show this help message and exit
required arguments:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 145

SW: RSCM CLI

Sample Output:
Completion Code: Success

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-i server-id server-id
-f file-name
-p port id Soc (0:FIP 1:Nitro)

Usage:
RScmCli# set system soc update fip -i 1 -p 0 -f fip_padded.bin
Sample Output:
Completion Code: Success

set system cerberus clear
Description:
This command clear platform cerberus and Soc cerberus debug/tcg log from a server
Syntax:
RScmCli# set system cerberus clear debug [-h] [-b {0,1}] -i SERVERID
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i server-id server-id
-b 0:platform cerberus 1: Soc cerberus
-c CERBERUS_INDEX cerberus component index

Usage:
RScmCli# set system cerberus clear debug -i 1

-b 0

Sample Output:
Completion Code : Success

set system user password
This command sets the password for a given user of the specified BMC.
Syntax:
set system user password [-h] -i SERVERID -u USERNAME -p PASSWORD
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i SERVERID server-id
-u USERNAME username to change the password for
-p PASSWORD the new password to set
-h, --help
show this help message and exit

Usage:
RScmCli# set system user password -i 31

-u admin -p new_password

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 146

SW: RSCM CLI

Description:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample Output:
enabled: true
id: 2
role: ADMINISTRATOR
Completion Code: Success

set system vreset
Description:
This command is used to virtual reset the BMC. (Applicable for Gen 11 and later)
Syntax:
RScmCli# set system vreset -h
usage: set system vreset [-h] -i SERVERID
optional arguments:
-h, --help

show this help message and exit

required arguments:
-i SERVERID

server-id

Usage:
RScmcli# set system vreset -i <Server_id>

Sample output:
Completion Code: Success

SW: RSCM CLI

start serial session
Description:
This command is used to start a serial session to a server. The command will open a Serial-Client-terminal for the serial
session.
Users might want to open a serial session to a server for debugging purposes, to view blade boot messages, or for
executing BIOS commands. A VT100 console will be provided that will continuously poll the blade for any serial session
data. Any user command entered using the VT100 console will be sent to the server.
Syntax:
RScmCli# start serial session <-i server_id>
-i - SERVERID server-id (1 to 48)
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

[-h] [-b DEVICEID] [-f] [-p PORTID]

Page | 147

SW: RSCM CLI

Classified
as
Microsoft
-b - DEVICEID device id (0 or 1)
Highly
-f - Force start
Confidenti
al
-b (device type) it is optional, by default it accepts 0: Host OS and 1 redirects
to

Soc
-f force start serial connection.
-p PORTID
Custom port id. This port id will be picked up only if deviceid == 1

Sample usage:
usage: start serial session -i server-id
provide ‘superuser’ password when prompted

Sample output:
SAC>
Keyboard shortcut to exit from SAC prompt: ~&

stop serial session
Description:
This command is used to force the termination of an active serial session to a blade.
Syntax:
RScmCli# stop serial session <-i server_index> [-h]
-i -SERVERID server-id (1 to 48)
-b - DEVICEID device id (0 or 1)
-h - help; display the correct syntax
-p PORTID
Custom port id. This port id will be picked up only if deviceid == 1

-b (device type) it is optional, by default it accepts 0: Host OS and 1 redirects
to Soc

SW: RSCM CLI

Commands to escape the serial session are as follows:

Shift + ~ + &
Sample usage:
To stop a serial session on a server, use the following command:
RScmCli# stop serial session –i server_index
Sample Output:
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 148

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Set system jtag start
Description:
This command starts the JTAG/ITP server on the BMC
Syntax:
set system jtag start [-h] -i SERVERID
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i SERVERID server-id
Usage:
Wcscli# set system jtag start -i 15
Sample Output:
Completion Code: Success

Set system jtag stop
Description:
This command stops the JTAG/ITP server on the BMC
Syntax:
set system jtag stop [-h] -i SERVERID
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i SERVERID server-id

SW: RSCM CLI

Usage:
Wcscli# set system jtag stop -i 15
Sample Output:
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 149

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show system pcieswitch update
Description:
This command displays PCIe switch firmware update status
Syntax:
RScmCli# show system pcieswitch update -h
usage: show system pcieswitch update [-h] -i server-id
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i server-id server-id
Usage:
RScmCli# show system pcieswitch update -i 25
FW Status: FW update not started
Completion Code: Success

Set system pcieswitch update
Description:
This command updates the PCIe switch firmware on the system
Syntax:
RScmCli# set system pcieswitch update -h
usage: set system pcieswitch update [-h] -i SERVERID -f FILE
optional arguments:
-h, --help
show this help message and exit
required arguments:
-i SERVERID server-id
-f FILE
PCIe Switch firmware bin file name and it should be in the TFTP
location

SW: RSCM CLI

Usage:
RScmCli# set system pcieswitch update -i 25 -f <file>
FW Status: FW update in progress
Completion Code: Success

Set system gpu update (Only for C44AD)
Description:
This command updates the GPU firmware on the system
Syntax:
RScmCli# set system gpu update -h
usage: set system gpu update [-h] -i SERVERID -f FILE -s INDEX [-a]

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 150

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help
show this help message and exit
-a, --async Run GPU update in asynchronous mode

required arguments:
-i SERVERID server-id
-f FILE
GPU firmware bin file name and it should be in the TFTP location
-s INDEX
Component index of the GPU to be updated
Usage:
RScmCli# set system gpu update -i 6 -f MCU_GPU.tar -s 1
FW Status : FW update in progress
FW Status : FW update in progress
FW Status: FW update completed successfully
Completion Code: Success

Set system mcu update (Only for C44AD)
Description:
This command updates the MCU firmware on the system
Syntax:
RScmCli# set system mcu update -h
usage: set system mcu update [-h] -i SERVERID -f FILE -s INDEX [-a]
optional arguments:
-h, --help
show this help message and exit
-a, --async Run MCU update in asynchronous mode

3.5Help

SW: RSCM CLI

required arguments:
-i SERVERID server-id
-f FILE
MCU firmware bin file name and it should be in the TFTP location
-s INDEX
Component index of the MCU to be updated
Usage:
RScmCli# set system mcu update -i 6 -f MCU_GPU.tar -s 1
FW Status : FW update in progress
FW Status: FW update completed successfully
Completion Code: Success

Commands

Help
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 151

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Description:
Shows list of categories
Syntax:
RScmCli# help
Sample output:
RScmCli# help
Command Types (type help <topic>)
=================================
show sh set exit help
Command Groups (type help <topic>):
===================================

help show
RScmCli# help show
Execute ocscli show commands
usage:
show group command <parameters>

SW: RSCM CLI

-------------------------------------Supported groups
-------------------------------------1. network
2. manager
3. system
4. user
5. switch
6. mte
7. version
8. powershelf
9. cdu
10. interrack

help set
RScmCli# help set
Execute ocscli set commands
usage:
set group command <parameters>

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 152

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

--------------------------------------Supported groups
--------------------------------------1. network
2. manager
3. system
4. user
5. switch
6. powershelf
7. cdu
8. interrack
9. sblcmd

help start
RScmCli# help start
Execute ocscli start commands.
Usage:
start command <parameters>
------------------------------Supported commands
------------------------------1. serial
2. mte
3. auxiliary
4. cdu
RScmCli# start mte -h
usage: ocsshell.py [-h] -u UTIL [-p [PARAMS [PARAMS ...]]] [-t TIMES]
[-d DURATION]

Execute MTE utility

SW: RSCM CLI

optional arguments:
-h, --help
show this help message and exit
-u UTIL
Utility name
-p [PARAMS [PARAMS ...]]
Utility parameters
-t TIMES
Run times
-d DURATION
Run duration

help stop
RScmCli# help stop

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 153

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Execute ocscli stop commands.
Usage:
stop command <parameters>
------------------------------Supported commands
------------------------------1. serial
2. mte

help user
RScmCli# help user
Ocscli User "show" Commands :
=======================================================
display
Ocscli User "set" Commands:
========================================================
add
update
delete
RScmCli# help network
RScmCli# help manager

RScmCli# help ledon
ledon: This command turns the server UID LED on.
====================================================================
Usage:
set system led on -i {serverid}
-i -- serverid, the target server number. Typically 1-48

3.6MTE

SW: RSCM CLI

[-h] -help; display the correct syntax
RScmCli# set manager -h
RScmCli# set network -h

Commands

1. Syntax to execute any MTE utility:
RscmCli#: start mte [-h] -u UTIL [-p [PARAMS [PARAMS ...]]] [-t TIMES] [-d DURATION]

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 154

SW: RSCM CLI

Classified
as
Microsoft
Note: ocs-fru and ocs-mac utilities expect a text file as user input. These text files are expected to be Highly
placed under Rack Manager TFTP location (via tftp get command). For this version, the filenames are Confidenti
hard coded and is expected as follows,
al

ocs-fru: fruupdate.txt
ocs-mac: macupdate.txt
Format for macupdate.txt:
mac: {MAC Addr 1}
mac: {MAC Addr 2}
Format for fruupdate.txt:
01
00
00
01
0A
00
00
F4
…
The aforementioned format expects a stream of bytes (2 characters per line) adhering to the following
specifications:

Size

Format

Hex/ASCII Value

1

Binary

01h

1

Binary

00h

1
1

Binary
Binary

00h
01h

1

Binary

0Ah

1
1
1

Binary
Binary
Binary

00h
00h
F4h

Board Info Area
Offset Descriptor

Size

Format

Hex/ASCII Value

8

1

Binary

01h

Board Area Format Version

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Comment/Example

SW: RSCM CLI

Common Header Area
Offset Descriptor
Common Header Format
0
Version
Internal Use Area Starting
1
Offset
Chassis (System) Info Area
2
Starting Offset
3
Board Area Starting Offset
Product Info Area Starting
4
Offset
MultiRecord Area Starting
5
Offset
6
Unused
7
Common Header Checksum

Comment/Example
7:4 - reserved,
write as 0000b 3:0 format version

Page | 155

SW: RSCM CLI

Board Area Length
Language Code

11~13 Mfg. Date / Time

1
1

Binary
Binary

09h
19h

3

Binary

-

1
9

Binary
ASCII

C9h
Microsoft

14
15-23

Board Manufacturer
type/length byte
Board Manufacturer

24

Board Product Name
type/length byte

1

Binary

C7h

25-31

Board Product Name

7

ASCII

M4010

32

Board Serial Number
type/length byte

1

Binary

D0h

33-48

Board Serial Number

16

ASCII

-

49

Board Part Number
type/length byte

1

Binary

CCh

50-61

Board Part Number

12

ASCII

M1202846-900

62

FRU File ID type/length byte

1

Binary

C9h

63-71

FRU File ID

9

ASCII

FRU v0.16

72

Board Custom Field 1
type/length byte

1

Binary

C3h

73-75

Board Custom Field 1

3

ASCII

EV

76

Indicate no more info fields

1

Binary

C1h

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

7:6 – Type Code
5:0 – Number of
data bytes
Replace <product
name> with
Microsoft Assigned
Product Name
7:6 – Type Code
5:0 – Number of
data bytes
Generated by PCBA
MFG
7:6 – Type Code
5:0 – Number of
data bytes
Reference latest
ECO for PCBA Part
Number
7:6 – Type Code
5:0 – Number of
data bytes
Version to keep
track of changes to
FRU format (ie
structure)
7:6 – Type Code
5:0 – Number of
data bytes
OnePDM PCBA
Revision
C1h (type/length
byte encoded to

Page | 156

SW: RSCM CLI

9
10

number = 1h for
this specification.
Board Area Length
(in multiples of 8
bytes)
English
Number of minutes
from 0:00 hrs
1/1/96. LSbyte first
(little Endian)
7:6 – Type Code
5:0 – Number of
data bytes

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

Reserved

2

Binary

0000h

79

Board Area Checksum

1

Binary

-

Product Info Area
Offset Descriptor

Size

Format

Hex/ASCII Value

80

Product Area Format Version

1

Binary

01h

81
82

Product Area Length
Language Code

1
1

Binary
Binary

0Bh
19h

83
84-92

Product Manufacturer
type/length byte
Product Manufacturer

1
9

Binary
ASCII

C9h
Microsoft

93

Product Name type/length
byte

1

Binary

C7h

94100

Product Name

7

ASCII

M4010

Product Part/Model Number
type/length byte

1

Binary

CCh

Product Part/Model Number

12

ASCII

M1199147-900

Product Version type/length
byte

1

Binary

C3h

Product Version

3

ASCII

4

101
102113

114
115117

118
119134

135

Product Serial Number
type/length byte

1

Binary

D0h

Product Serial Number

16

ASCII

-

Reserved type/length byte

1

Binary

07h

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Comment/Example
7:4 - reserved,
write as 0000b
Product Area
Length (in multiples
of 8 bytes)
English
7:6 – Type Code
5:0 – Number of
data bytes
7:6 – Type Code
5:0 – Number of
data bytes
Replace <product
name> with
Microsoft Assigned
Product Name
7:6 – Type Code
5:0 – Number of
data bytes
PCBA ASSY Part
Number
7:6 – Type Code
5:0 – Number of
data bytes

7:6 – Type Code
5:0 – Number of
data bytes
Generated by MFG
7:6 – Type Code
5:0 – Number of
data bytes

Page | 157

SW: RSCM CLI

77-78

indicate no more
info fields)
PAD, write as 00h
The modulo 256
sum of the Board
Area bytes plus this
checksum byte
equals zero.

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

Reserved

7

Binary

00000000000000
h

143

Product FRU File ID
type/length byte

1

Binary

C2h

144
145

Product FRU File ID
Reserved

1
1

ASCII
Binary

3
20h

146

Product Custom Field 1
type/length byte

1

Binary

02h

147
148

Product Custom Field 1
Reserved

1
1

Binary
Binary

41
20h

Product Custom Field 2
type/length byte

1

Binary

0Ch

Product Custom field 2

12

Binary

-

162
163166

Indicate no more info fields

1

Binary

C1h

Reserved

4

Binary

00000000h

167

Product Info Area Checksum

1

Binary

-

149
150161

Reserved. Populate
bytes with 00h.
7:6 – Type Code
5:0 – Number of
data bytes
Version to keep
track of changes to
FRU format (ie
structure)
PAD, write as 20h
7:6 – Type Code
5:0 – Number of
data bytes
See Table
“Manufacturer
Codes Table” in
Appendix
PAD, write as 20h
7:6 – Type Code
5:0 – Number of
data bytes
Mac address
C1h (type/length
byte encoded to
indicate no more
info fields)
PAD, write as 00h
The modulo 256
sum of the Product
Area bytes plus this
checksum byte
equals zero.

Note: Before running network test commands (like iperf, ping etc) disable firewall using the mte
firewall command (see below). You may want to enable firewall after completing the network tests.
Note: After completing the mte test, as a final step, the mte lock write command (see below) shall
be executed which will fuse/lock mte commands from future usage on that RM.
Available utilities:
Utility
ocs-gpio

Usage
start mte –u ocs-gpio –p setupgpio

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 158

SW: RSCM CLI

136142

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

ocs-mac
ocs-hsc

ocs-pmic

stream
sysbench
memtester
ttyS1
ttyS2
iperf
minicom
reboot
date
i2cdetect
i2cdump
i2cset
i2cget
cpuinfo
meminfo
qspiinfo
mmcinfo
ping
firewall
lock
cpld-keyupdate
cpld-lock-publickey
cpld-program-cfg1
cpld-feature-rowprogram
cpld-programauthdone
turn-on-isolationvalve
turn-off-isolationvalve

start mte -u cpld-program-cfg1 –p <file name>
start mte -u cpld-feature-row-program –p <file name>
start mte -u cpld-program-authdone -p <0/1>
start mte -u turn-on-isolation-valve
start mte -u turn-off-isolation-valve

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 159

SW: RSCM CLI

ocs-fru

start mte –u ocs-gpio –p setupgpio <Pin> <Input/Output : 0/1>
start mte –u ocs-gpio –p cleanupgpio
start mte –u ocs-gpio –p readgpio <Pin>
start mte –u ocs-gpio –p setgpio <Pin> <Value>
start mte –u ocs-gpio –p readboardid
start mte –u ocs-gpio –p readrevid
start mte –u ocs-fru –p read <i2c bus> <i2c slave address>
start mte –u ocs-fru –p write <i2c bus> <i2c slave address> <num bytes>
start mte –u ocs-mac –p read
start mte –u ocs-mac –p write
start mte -u ocs-hsc -p getstatus <hsc<1/2>>
start mte -u ocs-hsc -p getpower <hsc<1/2>>
start mte -u ocs-hsc -p getinputvoltage <hsc<1/2>>
start mte -u ocs-pmic -p initialize <pmic<1/2>>
start mte -u ocs-pmic -p getstatus <pmic<1/2>>
start mte -u ocs-pmic -p setfseal <pmic<1/2>>
start mte –u stream [-t TIMES] or [-d DURATION]
start mte –u sysbench [-t TIMES] or [-d DURATION]
start mte –u memtester –p <mem> <loop>
start mte –u ttys1
start mte –u ttys2
start mte –u iperf –p <tcp/udp> <IP address>
start mte –u minicom
start mte –u reboot
start mte –u date –p <date>
start mte –u i2cdetect –p <i2c bus>
start mte –u i2cdump –p <i2c bus> <chip address>
start mte –u i2cset –p <i2c bus> <chip address> <data address> <value>
start mte –u i2cget –p <i2c bus> <chip address> <data address>
start mte –u cpuinfo
start mte –u meminfo
start mte –u qspiinfo
start mte –u mmcinfo
start mte –u ping -p <IP address>
start mte -u firewall -p <on/off>
start mte –u lock -p <read/write>
start mte -u cpld-key-update –p <file name>
start mte -u cpld-lock-public-key

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

read-isolationvalve-status

Classified
as
Microsoft
Highly
Confidenti
al

start mte -u read-isolation-valve-status

Expected output for ocs-mac:
RScmCli# start mte -u ocs-mac -p write
i2c target: 0 50
Write Succeeded
RScmCli# start mte -u ocs-mac -p read
i2c target: 0 50

==============================
reading from eeprom
==============================
MAC[1]: 12:
34:
56:
78:
90:
13
MAC[2]: aa:
bb:
cc:
dd:
ee:
ff
==============================
eeprom read completion code: 0

Expected output for ocs-fru:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Board Address1: F01DBCFB7930
Board Address2: F01DBCFB7931
Board Build: PV-T
Board Fru Id: v1.0
Board Manufacturer: Ingrasys
Board Manufacturer Date: Thu Aug 5 09:04:00 2027
Board Name: M2010 - MB
Board Part Number: M1039935-001
Board Serial: B99357435022500C
Board Version: C
Product Assettag: N/A
Product Build: PV-T
Product Fru Id: V1.0
Product Manufacturer: Ingrasys
Product Name: M2010 - Mainboard
Product Serial: P13197435022500C
Product Subproduct: N/A
Page | 160

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Product Version: M1041319-001
Completion Code: Success

2. Show all executing MTE utilities
Syntax:
Ocscli: show mte

3. Stop all executing MTE utilities
Syntax:
Ocscli: stop mte
Test result of all MTE utils:

Ball Number

Schematic Name

Schematic Name

GPIO
Direction

Y1

ARM_PSU_ALERT_10_IN

288

IN

R4

ARM_PSU_VOUT_SEL_OUT

289

OUT

U2

ARM_PSU_AC_OK_7_IN

290

IN

V2

ARM_PSU_PSON_4_OUT

291

OUT

AA2

ARM_PSU_AC_OK_4_IN

292

IN

R3

ARM_PSU_AC_OK_1_IN

293

IN

T3

ARM_PSU_THROTTLE_OUT

294

OUT

T1

ARM_PSU_PSON_12_OUT

295

OUT

T2

ARM_PSU_SYN_START_OUT

296

IN

Y3

ARM_PSU_ALERT_12_IN

299

IN

AA3

ARM_PSU_PSON_2_OUT

300

OUT

R6

ARM_PSU_ALERT_9_IN

301

IN

V4

ARM_PSU_PSON_6_OUT

302

OUT

T5

ARM_PSU_PRESENT_18_IN

303

IN

U4

ARM_PSU_AC_OK_8_IN

304

IN

U1

ARM_PSU_AC_OK_6_IN

305

IN

V1

ARM_PSU_PSON_3_OUT

306

OUT

W1

ARM_PSU_PSON_16_OUT

307

OUT

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 161

SW: RSCM CLI

The following table maps various gpio numbers to their respective ball numbers:

SW: RSCM CLI

ARM_PSU_ALERT_11_IN

308

IN

W2

ARM_PSU_PSON_17_OUT

309

OUT

V3

ARM_PSU_PSON_5_OUT

310

OUT

T4

ARM_PSU_PRESENT_17_IN

311

IN

W3

ARM_PSU_PSON_18_OUT

312

OUT

P4

ARM_PSU_PSON_15_OUT

313

OUT

R5

ARM_PSU_ALERT_8_IN

314

IN

R1

ARM_PSU_PSON_13_OUT

316

OUT

W4

ARM_PSU_ALERT_1_IN

319

IN

Y4

ARM_PSU_ALERT_13_IN

320

IN

T6

ARM_12V_HSK_SMB_Alert

321

IN

U6

ARM_PSU_AC_OK_10_IN

322

IN

U5

ARM_PSU_AC_OK_9_IN

323

IN

AA4

ARM_PSU_AC_OK_2_IN

324

IN

P2

ARM_VPP_EN

328

OUT

P3

ARM_48V_HSK_SMB_Alert

329

IN

B14

ARM_FW_READY_BUFF_EN_N

335

OUT

C14

ARM_CPLD_DEBUG_3

337

IN

B15

ARM_I2C0_ALERT_CERBERUS

338

IN

E15

ARM_THROTTLE_IN2

344

IN

E14

ARM_THROTTLE_OUT

345

OUT

D16

ARM_THROTTLE_IN0

346

IN

E16

ARM_THROTTLE_IN1

347

IN

B17

ARM_CPLD_DEBUG_1

349

IN

C17

ARM_CPLD_DEBUG_2

350

IN

D18

ARM_CPLD_DEBUG_4

356

IN

357

OUT

A19
L20

ARM_CPLD_DEBUG_5

363

IN

J19

ARM_CPLD_DEBUG_6

364

IN

D19

ARM_CPLD_DEBUG_7

365

OUT

C20

ARM_ATTENTION_LED

366

OUT

E19

ARM_CPLD_DEBUG_8

367

OUT

N18

PCB_Rev_ID_1

385

IN

L17

PCB_Rev_ID_0

390

IN

T20

ARM_PSU_PRESENT_1_IN

391

IN

U21

ARM_PSU_PRESENT_2_IN

392

IN

T18

ARM_PSU_PRESENT_3_IN

393

IN

U20

ARM_PSU_PRESENT_4_IN

394

IN

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 162

SW: RSCM CLI

Y2

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

ARM_PSU_ALERT_14_IN

396

IN

V20

ARM_PSU_PRESENT_7_IN

397

IN

V21

ARM_PSU_PRESENT_8_IN

398

IN

V19

ARM_PSU_PRESENT_9_IN

399

IN

T17

ARM_PSU_PRESENT_10_IN

400

IN

R16

ARM_PSU_PRESENT_11_IN

401

IN

W20

ARM_PSU_PRESENT_12_IN

402

IN

W21

ARM_PSU_PRESENT_13_IN

403

IN

V18

ARM_PSU_PRESENT_14_IN

404

IN

Y21

ARM_PSU_PRESENT_15_IN

405

IN

Y20

ARM_PSU_PRESENT_16_IN

406

IN

R17

ARM_PSU_AC_OK_15_IN

407

IN

R18

ARM_PSU_AC_OK_16_IN

409

IN

T21

ARM_PSU_AC_OK_5_IN

410

IN

T19

ARM_PSU_AC_OK_3_IN

412

IN

W19

ARM_PSU_ALERT_7_IN

413

IN

N17

PCB_Rev_ID_2

416

IN

Y7

ARM_PSU_ALERT_16_IN

421

IN

U8

ARM_PSU_AC_OK_12_IN

422

IN

W8

ARM_PSU_ALERT_5_IN

423

IN

V8

ARM_PSU_PSON_10_OUT

424

OUT

Y8

ARM_PSU_ALERT_17_IN

425

IN

V13

ARM_PSU_PSON_8_OUT

426

OUT

AA7

ARM_PSU_AC_OK_17_IN

427

IN

U13

ARM_PSU_AC_OK_14_IN

428

IN

W13

ARM_PSU_ALERT_3_IN

429

IN

AA8

ARM_PSU_AC_OK_18_IN

432

IN

U9

ARM_PSU_AC_OK_13_IN

433

IN

W9

ARM_PSU_ALERT_6_IN

434

IN

AA9

ARM_PSU_PSON_14_OUT

435

OUT

Y9

ARM_PSU_ALERT_18_IN

436

IN

V9

ARM_PSU_PSON_11_OUT

437

OUT

U7

ARM_PSU_AC_OK_11_IN

438

IN

V7

ARM_PSU_PSON_9_OUT

439

OUT

W7

ARM_PSU_ALERT_4_IN

440

IN

AA13

ARM_PSU_ALERT_2_IN

446

IN

U12

ARM_PSU_PSON_1_OUT

449

OUT

U18

ARM_PSU_PRESENT_5_IN

458

IN

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 163

SW: RSCM CLI

Y13

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

ARM_PSU_PRESENT_6_IN

459

IN

V12

ARM_PSU_PSON_7_OUT

460

OUT

Y6

ARM_PSU_ALERT_15_IN

462

IN

E8

ARM_RELAY_CNTL_2

463

OUT

D8

ARM_RELAY_CNTL_5

464

OUT

A8

ARM_PMIC_nINT_N

465

IN

A9

ARM_PMIC_Wakeup_N

466

IN

A7

ARM_SMART_THROTTLE_OUT

468

OUT

B7

ADDR_ID_0

469

IN

D7

ARM_RELAY_CNTL_4

470

OUT

C7

ARM_RELAY_CNTL_7

471

OUT

C8

ARM_RELAY_CNTL_6

472

OUT

E7

ARM_RELAY_CNTL_1

473

OUT

E6

ARM_RELAY_CNTL_0

474

OUT

C6

ADDR_ID_3

475

IN

D6

ARM_RELAY_CNTL_3

476

OUT

B8

ADDR_ID_1

479

IN

B9

ADDR_ID_2

480

IN

SW: RSCM CLI

U19

Classified
as
Microsoft
Highly
Confidenti
al

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 164

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

4 Powershelf Commands
4.1PSU
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Commands
Show powershelf psu info
Show powershelf psu battery [RESERVED]
Show powershelf psu update
Show powershelf psu version
Show powershelf psu limits
Show powershelf psu reading
show powershelf psu faulthistory
show powershelf psu eventlog
show powershelf psu state [Report covers it]
show powershelf psu report
set powershelf psu alertmask enable / disabled [Not used]
set powershelf psu limit
set powershelf psu clear
Set powershelf psu battery [Not Used]
Set powershelf psu updateSet powershelf psu raw
Set powershelf psu recovery
Show powershelf fru

Description:
Shows the PSU info (manufacturer id, manufacturer model, manufacturer revision, manufacturer
serial number, ic device id, version, and PSU readings)
Syntax:
RScmCli# show powershelf psu info -h
usage: show powershelf psu info [-h] [-s psu-id] [-f forceread] [-p
{0,1,2}]

optional arguments:
-h, --help
-s psu-id
-f forceread

show this help message and exit
psu-id
force-read

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 165

SW: RSCM CLI

Show powershelf psu info

SW: RSCM CLI

-p {0,1,2}
details

psu info with phase options defult show all phase

Sample output:

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# show powershelf psu info -s 1
Capability: b0
IC Device ID: M1278691-900
Manufacturer ID: Delta
Manufacturer Model: P4000-101-900
Manufacturer Revision: 01
Manufacturer Serial: P869133140178041
Completion Code: Success

Commented [PR3]: Powershelf doesnt have backup battery
right now

Show powershelf psu battery [RESERVED]
This command shows psu battery presence
Syntax:
RScmcli# show powershelf psu info [-h] [-i < psu -id>]
-i - psu-id - the target psu number. Typically, 1-18
-h - help; display the correct syntax

Sample output:
RScmcli# show powershelf psu battery -i 10
Battery: No
Capability: 0xb4
Completion Code: Success

Show powershelf psu update

Syntax:
RScmCli# show powershelf psu update -h
usage: show powershelf psu update [-h] [-s psu-id] [-f forceread]
optional arguments:
-h, --help
show this help message and exit
-s psu-id
psu-id
-f forceread force-read

Sample output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 166

SW: RSCM CLI

Description:
This command shows psu firmware update status.

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmcli# show powershelf psu update -s 10
FW Status: FW update yet to start
Completion Code: Success

Show powershelf psu version
Description:
This command shows psu firmware version.
Syntax:
usage: show powershelf psu version [-h] [-s psu-id] [-f forceread]

optional arguments:
-h, --help
-s psu-id
-f forceread

show this help message and exit
psu-id
force-read

Sample output:
RScmCli# show powershelf psu version -s 1
Active Image: ImageA
Bootloader Version: 00000000
ImageA Version: 00090F00
ImageB Version: 00090F00
Completion Code: Success

SW: RSCM CLI

Show powershelf psu limits
Description:
Shows different PSU related alert limits
• Output overcurrent fault limit
• Output overcurrent warning limit
• Input overvoltage fault limit
• Input overvoltage warning limit
• Input overcurrent fault limit
• Input overcurrent warning limit
• Input overpower warning limit

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 167

SW: RSCM CLI

Syntax:
usage: show powershelf psu limits [-h] [-s psu-id] [-f forceread]

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help
-s psu-id
-f forceread

show this help message and exit
psu-id
force-read

Sample output:
RScmCli# show powershelf psu update -s 10
Status Description: Update yet to start
Completion Code: Success
RScmCli# show powershelf psu limits -s 1
Input Overcurrent Fault Limit: 23.0
Input Overcurrent Warning Limit: 18.0
Input Overpower Warning Limit: 3448.0
Input Overvoltage Fault Limit: 279.0
Input Overvoltage Warning Limit: 260.0
Output Overcurrent Fault Limit: 70.0
Output Overcurrent Warning Limit: 63.0
Completion Code:
Success

Show powershelf psu reading

SW: RSCM CLI

Description:
Shows following parameters of the PSU:
• Ein
• Eout
• Vin
• Vout
• Iin
• Iout
• Inlet, outlet, and internal hotspot Temperature
• Fanspeed
• Frequency
• Pout
• Pin

Commented [YH4]: inlet, outlet, and internal hotspot
temperature

Syntax:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 168

SW: RSCM CLI

RScmCli# show powershelf psu reading -h
usage: show powershelf psu reading [-h] [-s psu-id] [-f forceread]

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help
-s psu-id
-f forceread

show this help message and exit
psu-id
force-read

Sample output:
RScmCli# show powershelf psu reading -s 1
Fan Fault: 0
Fan Speed: 3420.0
Fan Speed Percent: 0
Hotspot Temperature: 54.0
Inlet Temperature: 29.0
Input Current: 1.1640625
Input Energy: 0.7225568890571594
Input Frequency: 50.0
Input Power: 256.0
Input Voltage: 228.25
Outlet Temperature: 50.0
Output Curent: 4.5234375
Output Energy: 1.060612678527832
Output Power: 233.0
Output Voltage: 51.375
Status Word: 0000
Completion Code: Success

Description:
Shows recent failure history log. The failure history event is stored into non-volatile flash of PSU if any
submodule encounters a fault that causes its output to shut off. It is recommended to call set
powershelf psu clear faults command after this command, as the fault history will not be overwritten
unless fault is cleared.
Syntax:
usage: show powershelf psu faulthistory [-h] [-s psu-id] [-f forceread]

optional arguments:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 169

SW: RSCM CLI

show powershelf psu faulthistory

SW: RSCM CLI

-h, --help
-s psu-id
-f forceread

Classified
as
Microsoft
Highly
Confidenti
al

show this help message and exit
psu-id
force-read

Sample output:
RScmcli# show powershelf psu faulthistory -i 10

Sample output:
RScmCli# show powershelf psu
AmbientTemperature: 0.0
FanSpeed: 0.0
Hours: 0
InputCurrent: 0.0
InputPower: 0.0
InputVoltage: 0.0
Minutes: 0
OutputCurrent: 0.0
OutputPower: 0.0
OutputVoltage: 0.0
Phase: 24
ResetFlagIVSRegister: 0
SecurityStatus: 0
StatusWord: 0000
Completion Code: Success

faulthistory -s 1

show powershelf psu eventlog
Description:
Shows recent 5 eventlogs. PSU stores at most 5 events in the eventlog and oldest event is overwritten
when a new event occurs

Commented [YH5]: Why only 5 events?
Commented [PR6R5]: PSU only maintains last 5 events inside
its EEPROM

usage: show powershelf psu eventlog [-h] [-s psu-id] [-f forceread]

optional arguments:
-h, --help
-s psu-id
-f forceread

show this help message and exit
psu-id
force-read

Sample Output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 170

SW: RSCM CLI

Syntax:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

RScmCli# show powershelf psu eventlog -s 10
Event 1:
CmlStatus: 00
EventNumber: 0
FanSpeed: 0.0
InletTemperature: 0.0
InputCurrent: 0.0
InputPower: 0.0
InputStatus: 00
InputVoltage: 0.0
InternalTemperature: 0.0
IoutStatus: 0
OutputCurrent: 0.0
OutputPower: 0.0
OutputVoltageStatus: 00
RealtimeCounter: 0
ShutdownEvent: 0000
StatusWord: 0000
TemperatureStatus: 00
TotalRealTimeCounter: 0
Event 2:
CmlStatus: 00
EventNumber: 0
FanSpeed: 0.0
InletTemperature: 0.0
InputCurrent: 0.0
InputPower: 0.0
InputStatus: 00
InputVoltage: 0.0
InternalTemperature: 0.0
IoutStatus: 0
OutputCurrent: 0.0
OutputPower: 0.0
OutputVoltageStatus: 00
RealtimeCounter: 704
ShutdownEvent: 0000
StatusWord: 0000
TemperatureStatus: 00
TotalRealTimeCounter: 0
Event 3:
CmlStatus: 00
EventNumber: 0
FanSpeed: 0.0
InletTemperature: 0.0
InputCurrent: 0.0
InputPower: 0.0
InputStatus: 00
InputVoltage: 0.0
InternalTemperature: 0.0
IoutStatus: 0
OutputCurrent: 0.0
OutputPower: 0.0
OutputVoltageStatus: 00
Page | 171

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

RealtimeCounter: 0
ShutdownEvent: 0000
StatusWord: 0000
TemperatureStatus: 00
TotalRealTimeCounter: 0
Event 4:
CmlStatus: 00
EventNumber: 0
FanSpeed: 0.0
InletTemperature: 0.0
InputCurrent: 0.0
InputPower: 0.0
InputStatus: 00
InputVoltage: 0.0
InternalTemperature: 0.0
IoutStatus: 0
OutputCurrent: 0.0
OutputPower: 0.0
OutputVoltageStatus: 00
RealtimeCounter: 6
ShutdownEvent: 0000
StatusWord: 0000
TemperatureStatus: 00
TotalRealTimeCounter: 0
Event 5:
CmlStatus: 00
EventNumber: 0
FanSpeed: 0.0
InletTemperature: 0.0
InputCurrent: 0.0
InputPower: 0.0
InputStatus: 00
InputVoltage: 0.0
InternalTemperature: 0.0
IoutStatus: 0
OutputCurrent: 0.0
OutputPower: 0.0
OutputVoltageStatus: 00
RealtimeCounter: 0
ShutdownEvent: 0000
StatusWord: 0000
TemperatureStatus: 00
TotalRealTimeCounter: 0
Completion Code: Success

show powershelf psu state [Report covers it]
Description:
Shows the state of PSU (presence status, current state etc)
Syntax:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 172

SW: RSCM CLI

usage: show powershelf psu state [-h] [-s psu-id] [-f forceread]

optional arguments:
-h, --help
-s psu-id
-f forceread

Classified
as
Microsoft
Highly
Confidenti
al

show this help message and exit
psu-id
force-read

Sample Output:
RScmCli# show powershelf psu
AC Status: Healthy
Alert Status: No Alert
Presence Status: Present

state -s 10

Completion Code: Success

show powershelf psu report
Description:
Shows a table having the information related to psus (like show system report)

Commented [YH7]: Which PMBus command to know the Power
State and Device Presence?
Commented [PR8R7]: Rack-SCM board directly has the Device
Presence as GPI pins, so no PMBus command will be used

Syntax:
usage: show powershelf psu report [-h] [-s psu-id]

optional arguments:
-h, --help
-s psu-id

show this help message and exit
psu-id

RScmCli#
| Psu Id
|
1
|
2
|
3
|
4
|
5
|
6
|
7
|
8
|
9
|
10
|
11

SW: RSCM CLI

Sample output:
show powershelf psu report
| Alert Status | Device Presence
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present
|
No Alert
|
Present

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 173

SW: RSCM CLI

|

12

|

No Alert

|

Classified
as
Microsoft
Highly
Confidenti
al

Present

Completion Code: Success
RScmCli# show powershelf psu report -s 1
| Psu Id | Alert Status | Device Presence
|
1
|
No Alert
|
Present
Completion Code: Success

Commented [YH9]: What is the use case for this CLI?

set powershelf psu alertmask enable / disabled [Not used]
Description:
Sets the masks for different alert types of PSU

Commented [PR10R9]: SMBALERT_MASK command will be
used to determine what events raise SMBALERT and what events are
masked. It can mask events for - under/over voltage / current/power
/ temperature etc..

Syntax:

Commented [PR11R9]: Use type and direction

set powershell psu limit enable / disable -i <psu-id> -d <direction> -t
<type>
-i
PSU slot number
-d
<INPUT:0|OUTPUT:1>
-t
<OC_FAULT|OC_WARN|OV_FAULT|OV_WARN|OP_WARN>
-h
- help; display the correct syntax

Sample output:
set powershelf psu alertmask -i 10 -d 0 -t OC_FAULT
Completion Code: Success

set powershelf psu limit

SW: RSCM CLI

Description:
Shows different PSU related alert limits
• Output overcurrent fault limit
• Output overcurrent warning limit
• Input overvoltage fault limit
• Input overvoltage warning limit
• Input overcurrent fault limit
• Input overcurrent warning limit
• Input overpower warning limit
Syntax:
RScmCli# set powershelf psu alertmask -h
usage: set powershelf psu alertmask [-h] {enable,disable} ...

positional arguments:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 174

SW: RSCM CLI

{enable,disable}
enable
disable

Classified
as
Microsoft
Highly
Confidenti
al

PSU Alertmask config
This command sets the alertmask of psu
This command resets the alertmask of psu

optional arguments:
-h, --help
show this help message and exit
RScmCli# set powershelf psu alertmask enable -h
usage: set powershelf psu alertmask enable [-h] [-s psu-id] -d direction
-t
parameter

optional arguments:
-h, --help
-s psu-id
-d direction
-t parameter

show this help message and exit
psu-id
Input:0, Output:1
OC_FAULT/OC_WARN/OV_WARN/UV_WARN/OT_WARN

Sample output:
RScmCli# set powershelf psu alertmask enable -s 1 -d 1 -t OC_FAULT
Completion Code: Success

Commented [PR12]: What all parameters does it reset?

set powershelf psu clear
Description:
This command clears the psu faults
Syntax:
usage: set powershelf psu clear [-h] [-s psu-id] [-p {0,1,2}]

-h, --help
-s psu-id
-p {0,1,2}
all phases})

show this help message and exit
psu-id
phases (0 {phase 1}, 1 {phase 2}, 2 {phase 3}, {default

Sample output:
RScmCli# set powershelf psu clear -s 1
Completion Code: Success
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 175

SW: RSCM CLI

optional arguments:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Set powershelf psu battery [Not Used]
Description:
This command runs the battery health test on the specified PSU.
Syntax:
RScmCli # set powershelf psu battery <-i psu-id>

Sample usage:
usage: set powershelf psu battery [-h] -i psu-id
-i <psu-id> PSU id <1 to 18 ids>

Sample output:
Completion Code: Success

Set powershelf psu update
Description:
The firmware update for the server PSU firmware
Syntax:
RScmCli # set powershelf psu update [-h] -s psu-id [-f FILE] [-r FORCE]

Sample usage:
RScmCli# set powershelf psu update -h
usage: set powershelf psu update [-h] -s psu-id [-f FILE] [-r FORCE]

optional arguments:
show this help message and exit
psu-id
psu update file
force psu update

SW: RSCM CLI

-h, --help
-s psu-id
-f FILE
-r FORCE

Sample output:
set powershelf psu update -s 10 -f abc.hex
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 176

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Set powershelf psu raw
Description:
This command is to send raw commands to PSUs in PMBUS format
Syntax:
RScmCli # set powershelf psu raw [-h] -s psu-id -c [raw-command [rawcommand ...]] [-r rx-length] [-p pec-enable]

Sample usage:
RScmCli# set powershelf psu raw -h
usage: set powershelf psu raw [-h] -s psu-id -c [raw-command [rawcommand ...]] [-r rx-length] [-p pec-enable]

optional arguments:
-h, --help
show this help message and exit
-s psu-id
-c [raw-command [raw-command ...]]
Raw PMBUS command
-r rx-length
Number of bytes in response
-p pec-enable
Send PEC along with raw command

optional arguments:
-h, --help

show this help message and exit

-s psu-id
Sample output:

SW: RSCM CLI

RScmCli# set powershelf psu raw -s 1 -c 8d -r 2
Status Description: PMBUS Response: 16 00
Completion Code: Success
RScmCli# set powershelf psu raw -s 1 -c 03
Completion Code: Success

Set powershelf psu recovery
Description:
The firmware recovery for the server PSU firmware
Syntax:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 177

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli # set powershelf psu recovery [-h] -s psu-id [-f FILE]

Sample usage:
RScmCli# set powershelf psu recovery -h
usage: set powershelf psu recovery[-h] -s psu-id [-f FILE]
optional arguments:
-h, --help
-s psu-id
-f FILE

show this help message and exit
psu-id
psu update file

SW: RSCM CLI

Sample output:
set powershelf psu recovery -s 10 -f abc.hex
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 178

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Show powershelf psu slot config
Description:
The Powershelf PSU Slot configuration, default is {1,1,1,1,1,1,1,1,1,1,1,1}
To identify valid PSU slots, where PSUs are actually Present.
Syntax:
RScmCli # show manager userconfigs

Sample usage:
RScmCli# show manager userconfigs
72:
PsuSlotConfig
1,1,1,1,1,1,1,1,1,1,1,1
Completion Code: Success

Set powershelf psu slot config
Description:
Set Powershelf PSU Slot configuration, default is {1,1,1,1,1,1,1,1,1,1,1,1}
Applicable only for P4200SK type Powershelves
Syntax:
RScmCli # set manager userconfigs –k PsuSlotConfig –v
1,1,1,0,0,0,1,1,1,0,0,0
SW: RSCM CLI

Sample usage:
RScmCli# set manager userconfigs –k PsuSlotConfig –v 1,1,1,0,0,0,1,1,1,0,0,0
Completion Code: Success

show powershelf fru
Description:
This command gets the FRU information of the powershelf.
Syntax:
RScmCli# show powershelf fru
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 179

SW: RSCM CLI

Sample usage:
To get the FRU information for the powershlef, use the following command:
RScmCli# show powershlef fru → returns powershlef board fru deatails

Classified
as
Microsoft
Highly
Confidenti
al

Sample output:
RScmCli# show powershelf fru
Board Area Format Version: 01
Board Area Length: 9
Board Area Offset: 8
Board Custom Field 1: EV5
Board Language Code: 25
Board Manufacturer: Microsoft
Board Part Number: M1278690-900
Board Product Name: P-4300
Board Serial Number: 0000002968471801
Common Header: 1
Common Header Checksum: 244
FRU File ID: FRU v0.16
Mfg. Date / Time: Wed Sep 20 07:05:00 2023
Product Area Format Version: 01
SW: RSCM CLI

Product Area Length: 11
Product Area Offset: 80
Product Assettag: N/A
Product Custom Field 1: 41
Product Custom Field 2: 000000000000
Product FRU File ID: 3

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 180

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Product Language Code: 25
Product Manufacturer: Microsoft
Product Name: P-4300
Product Part/Model Number: ECD90020026-EV5
Product Serial Number: P869033820016041
Product Version: 4

Completion Code: Success

SW: RSCM CLI

RScmCli#

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 181

SW: RSCM CLI

4.2C13
•
•
•
•
•
•
•

Classified
as
Microsoft
Highly
Confidenti
al

Commands
Show powershelf c13 reading
Show powershelf c13 status
Show powershelf c13 Mux Address
Set powershelf c13 on
Set powershelf c13 off
Set powershelf c13 Mux Address
show powershelf c13 fru

4.2.1 Show powershelf c13 reading
Description:
This command shows C13 power reading.
This command is only supported for RSCM Bench-Top Boards and RSCM 3OU boards.
Syntax:
RScmCli# show powershelf c13 reading -h
usage: show powershelf c13 reading [-h] [-c c13-id]

optional arguments:
show this help message and exit
c13-id
SW: RSCM CLI

-h, --help
-c c13-id

Sample Output:
RScmCli# show powershelf c13 reading -c 1
C13s:
1:
PowerReading: 0.0
Completion Code: Success
RScmCli# show powershelf c13 reading
C13s:
1:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 182

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

PowerReading: 6.053945541381836
2:
PowerReading: 111.99798583984375
3:
PowerReading: 0.0
4:
PowerReading: 0.0
5:
PowerReading: 0.0
6:
PowerReading: 0.0
7:
PowerReading: 20.58341407775879
8:
PowerReading: 23.00499153137207
Completion Code: Success

4.2.2 Show powershelf c13 status
Description:
This command shows C13 status on/off.
This command is only supported for RSCM Bench-Top Boards and RSCM 3OU boards.
Syntax:
RScmCli# sh powershelf c13 status -h
usage: show powershelf c13 status [-h] [-c c13-id]
SW: RSCM CLI

optional arguments:
-h, --help show this help message and exit
-c c13-id
c13-id

Sample Output:
RScmCli# sh powershelf c13 status -c 1
C13s:
1:
Status: On
Completion Code: Success
RScmCli# sh powershelf c13 status
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 183

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

C13s:
1:
Status: On
2:
Status: On
3:
Status: On
4:
Status: On
5:
Status: On
6:
Status: On
7:
Status: On
8:
Status: On
Completion Code: Success

4.2.3 Show powershelf c13 Mux Address
Description:
This command shows I2C address of C13 MUX.
This command is only supported for RSCM Bench-Top Boards and RSCM 3OU boards.

Syntax:
RScmCli# sh powershelf c13 muxaddr -h
usage: show powershelf c13 muxaddr [-h] [-c c13-id]
SW: RSCM CLI

optional arguments:
-h, --help show this help message and exit
-c c13-id
c13-id

Sample Output:
RScmCli# sh powershelf c13 muxaddr
MuxAddr: 5a
Completion Code: Success
RScmCli# sh powershelf c13 muxaddr -c 1
MuxAddr: 5a
Completion Code: Success
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 184

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

4.2.4 Set powershelf c13 on
Description:
This command will switch on C13 via software command

Syntax:
RScmCli # set powershelf c13 on [-h] -c c13-id

Sample usage:
RScmCli# set powershelf c13 on -h
usage: set powershelf c13 on [-h] -c c13-id
optional arguments:
-h, --help show this help message and exit
-c c13-id
c13-id

Sample output:
set powershelf c13 on -c 7
Completion Code: Success

4.2.5 Set powershelf c13 off
Description:

SW: RSCM CLI

This command will switch off C13 via software command

Syntax:
RScmCli # set powershelf c13 off [-h] -c c13-id

Sample usage:
RScmCli# set powershelf c13 off -h
usage: set powershelf c13 off [-h] -c c13-id
optional arguments:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 185

SW: RSCM CLI

-h, --help
-c c13-id

Classified
as
Microsoft
Highly
Confidenti
al

show this help message and exit
c13-id

Sample output:
set powershelf c13 off -c 7
Completion Code: Success

4.2.6 Set powershelf c13 MUX Address
Description:
This command will sets I2C address of C13 MUX

Syntax:
RScmCli # set powershelf c13 muxaddr -h

Sample usage:
RScmCli# set powershelf c13 muxaddr -h
usage: set powershelf c13 muxaddr [-h] -a mux-addr
optional arguments:
-h, --help
show this help message and exit
-a mux-addr mux-addr
Sample output:
RScmCli# set powershelf c13 muxaddr -a 5a

6.103.7

show powershelf c13 fru
SW: RSCM CLI

Description:
This command gets the FRU information of the powershelf c13 modules.
Completion Code: Success
Syntax:
RScmCli# show powershelf c13 fru -> for all 4 c13 modules fru
RScmCli# show powershelf c13 fru –i <c13_id> -> for specific c13 module
fru

Sample usage:
To get the FRU information for the all 4 c13 modules, use the following command:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 186

SW: RSCM CLI

RScmCli# show powershlef c13 fru → returns powershlef c13 modules fru
deatails

Sample output:

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# show powershelf c13 fru
C13s:
1:
Board Area Format Version: 01
Board Area Length: 9
<truncated>
Product Version: 4
Completion Code: Success
2:
Board Area Format Version: 01
Board Area Length: 9
<truncated>
Product Version: 4
Completion Code: Success
3:
Board Area Format Version: 01
SW: RSCM CLI

Board Area Length: 9
<truncated>
Product Version: 4
Completion Code: Success
4:
Board Area Format Version: 01
<truncated>
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 187

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Product Version: 4
Completion Code: Success
Completion Code: Success

4.3TODOs

/ Suggestions

RScmCli# show powershelf c13 fru -i 3
C13s:
3:
Board Area Format Version: 01
Board Area Length: 9
<trunated>...
Product Part/Model Number: M1199144-900
Product Serial Number: P914433820172041
Product Version: 4
Completion Code: Success
Completion Code: Success

-

-

References
Compatibility (scope in terms of PSUs):
Will we support multiple PSUs (Power Supply Units)
Suggestions:
o Group multiple logs commands (show psu logs -events -faults)
Powercapping commands
User level considerations (Admin / Operator / User)
Requirements:
o PMIC VOltage control CLI needed?
o I2C disable CLI command?
Set fanspeed command

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Commented [YH13]: Please finish the power alert, throttle
commands

SW: RSCM CLI

-

Page | 188

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

5 Cooling Distribution Unit (CDU) Commands
CDU Platforms
The R-SCM supports and controls various platforms of CDUs used for cooling computation server racks.
These platforms contain different architectures of components used to support cooling functionalities –
such as fans and pumps.
Platform
H7010 (Sidekick)
H7021 / H7022
(Callan)

Number of Fans
Number of Pumps
Number of Fans
Number of Pumps

14
2
32 or 34 (vendor dependent)
5

Unless stated otherwise, the Modbus registers apply to all platforms.

5.1Fans
•
•
•
•

Show cdu fan alarm
Show cdu fan info
Show cdu fan fru
Show cdu fan health

5.1.1 Show cdu fan alarm
Description:
Shows the fan controller alarm status.
SW: RSCM CLI

Syntax:
RScmCli# show cdu fan alarm [-h] [-f FAN-ID]

Arguments:
-h, --help
show this help message and exit.
-f FAN-ID
fan ID (1-# of installed fans). If -f is not specified,
all fan controllers will be displayed.

These are the types of alarms for fan controllers. (1=Alarm, 0=No alarm)
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 189

SW: RSCM CLI

Alarm
General Alarm (555-590 for Delta, 555-586 for Ingrasys)
Fan Speed Too Low (101-114, 306-327 for Delta, 306-323 for Ingrasys)
Fan Modbus Lost: Alarm is triggered when the Modbus connection to the fan
controller is lost. (121-134, 328-349 for Delta, 328-345 for Ingrasys)
Fan Tray Temp Sensor Error: Indicates the sensor is absent from local I2C bus of
the fan tray controller or the value is outside a defined logical range. (141-154)
Fan Tray Humidity Sensor Error: Indicates the sensor is absent from local I2C bus
of the fan tray controller or the value is outside a defined logical range. (161174)

Sidekick Callan
X
X
X
X
X

Classified
as
Microsoft
Highly
Confidenti
al

X
X

Example output:
RScmCli# show cdu fan alarm
Count: 14
1:
Speed Too Low: False
Modbus Lost: False
Tray Temp Sensor Error: False
Tray Humidity Sensor Error: True
2:
Speed Too Low: False
Modbus Lost: True
Tray Temp Sensor Error: False
Tray Humidity Sensor Error: True
3:
…
Completion Code: Success

5.1.2 Show cdu fan info

Syntax:
RScmCli# show cdu fan info [-h] [-f FAN-ID]

Arguments:
-h, --help show this help message and exit.
-f FAN-ID fan ID (1-# of installed fans). If -f is not specified, all fan controllers will be displayed.
Alarm
Fan Speed (452-465, 800-821)
Average Fan Speed (466): The average of all operational fans;
missing fans do not count.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick Callan
X
X
X
X

Page | 190

SW: RSCM CLI

Description:
Shows the fan controller device information.

SW: RSCM CLI

Fan Operating Hours (470-497, 822-865): The number of hours that
this specific device has been in service (1-# of installed fans).
Temp Air Cold Fan Tray (500-513)

X

X

X

Supports only
Fan Trays 1-6
Supports only
Fan Trays 1-6

Temp Air Hot Fan Tray (591-596)
Humidity Air Cold Fan Tray (560-573)

Classified
as
Microsoft
Highly
Confidenti
al

X

Below Fan sensors are common to all fans.
Alarm
Unit Operation Mode (450):
0: OFF, 1: OFF(EN), 2: OFF(OD), 3: Start-up, 4: ON
Requested Fan Speed (451)
Average Fan Speed (466)
Temp Air Cold Average (514)
Temp Air Hot Top (520)
Temp Air Hot Bottom (521)
Temp Air Cold Top (522)
Temp Air Cold Bottom (523)
Temp Liquid Supply (526)
Temp 1 Liquid Supply (527): Temperature from Liquid Supply Pressure Sensor.
Temp 2 Liquid Supply (528): Temperature from Liquid Flow Sensor.
Temp 3 Liquid Supply (529): Temperature from Liquid Suction Pressure Sensor.
Temp Liquid Return (Flow Sensor) (530)
Temp Liquid Return (Return Pressure Sensor) (531): Temperature from Liquid
Return Pressure Sensor.
Temp 2 Liquid Return (866)
Temp 3 Liquid Return (867)
Temp 4 Liquid Return (868)
Temp Diff Liquid Temp Supply Temp Return (532)
Temp Diff Liquid Temp 1 Supply Temp Return (533)
Humidity Air Cold Average (574)
Fan State Machine (940)

Sidekick Callan
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

X
X
X

X
X
X
X
X
X
X
X
X
X
X
X

X
X
X
X
X
X

SW: RSCM CLI

Example output:
RScmCli# show cdu fan info
Count: 14
Unit Operation Mode: OFF(OD)
Requested Fan Speed: 45
Average Fan Speed: 48
…
Temp Liquid Supply: 34.0
Temp 1 Liquid Supply: 87.2
Temp 2 Liquid Supply: 56.1
Temp 3 Liquid Supply: 67.3
Temp Liquid Flow Sensor: 0.0
Temp Liquid Return Pressure Sensor: 66.2
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Commented [PV14]: Our Cli spec in general has one key word
with value, is there a we can merge and ensure to provide right
informatoin ?
Commented [YH15]: What is this output? Fan Control Mode?

Page | 191

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Temp Diff Liquid Temp Supply Temp Return: 23.1
Temp Diff Liquid Temp 1 Supply Temp Return: 24.2
Humidity Air Cold Average: 45.2
1:
Fan Speed: 50
Fan Operating Hours: 15
Temp Air Cold Fan Tray: 50.2
Humidity Air Cold Fan Tray: 40
2:
Fan Speed: 44
Fan Operating Hours: 13
Temp Air Cold Fan Tray: 51.1
Humidity Air Cold Fan Tray: 43
…
Completion Code: Success
RScmCli# show cdu fan info -f 3
Unit Operation Mode: OFF(OD)
Requested Fan Speed: 45
Average Fan Speed: 48
…
Temp Liquid Supply: 34.0
Temp 1 Liquid Supply: 87.2
Temp 2 Liquid Supply: 56.1
Temp 3 Liquid Supply: 67.3
Temp Liquid Flow Sensor: 0.0
Temp Liquid Return Pressure Sensor: 66.2
Temp Diff Liquid Temp Supply Temp Return: 23.1
Temp Diff Liquid Temp 1 Supply Temp Return: 24.2
Humidity Air Cold Average: 45.2
3:
Fan Speed: 50
Fan Operating Hours: 15
Temp Air Cold Fan Tray: 50.3
Humidity Air Cold Fan Tray: 40

SW: RSCM CLI

…
Completion Code: Success

5.1.3 Show cdu fan fru
Description:
Shows the fan controller FRU information.

Syntax:
RScmCli# show cdu fan fru [-h] [-f FAN-ID]
Arguments:
-h, --help show this help message and exit.
-f FAN-ID fan ID (1-# of installed fans). If -f is not specified, all fan controllers will be displayed.
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 192

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Byte order examples:
•

Manufacturer (26-28): “CduCo\0” (6 bytes)
B5 B4 B3 B2 B1 B0
C
d
u
C
o
\0

•

Device Name (29-33): “Fan Module” (10 bytes)
B9 B8 B7 B6 B5 B4 B3 B2 B1 B0
F
a
n
M o
d
u
l
e

•

Fan Tray P/N (34-37): Product number of the device in ASCII values, it consists of eight
bytes. Example for Product number “21991848” (8 bytes).
Fan Tray S/N (38-43): Serial number of the device in ASCII values, it consists of twelve bytes.
Example for Serial number “1280600001AA” (12 bytes).
Fan Tray Firmware P/N (44-47): Firmware part number is in ASCII values, it consists of six
bytes. Example for Firmware Product number "297604" (8 bytes).
Fan Tray Firmware Revision (48): Firmware revision consists of two digits in ASCII and looks
like "51". (2 bytes)

•
•

Alarm
Manufacturer: (6 bytes)
Device Name: (10 bytes)

Sidekick Callan
X
X

Fan #11
Fan Tray P/N: (8 bytes)
Fan Tray S/N: (12 bytes)
Fan Tray Firmware P/N: (8 bytes)
Fan Tray Firmware Revision: (2 bytes)
Repeat for 14 fans

X
X
X
X

Fan Board #12
Fan Board Mfg. Date/Time (1200-1206)
Fan Board Manufacture (1207-1213)
Fan Board Product Name (1214-1220)
Fan Board Serial Number (1221-1227)
Fan Board Part Number (1228-1234)
Fan Board Product Build (1235-1237)
Fan Tray Firmware Revision: (2 bytes)

X
X
X
X
X
X
X

SW: RSCM CLI

•

Fan Board #2
1
2

Sidekick has individual fan trays for each of the 14 fans.
Callan Delta has 34 fans distributed over 9 fan boards.
Open Cloud Server System Specification: Software—Rack SCM CLI

Classified as Microsoft Highly Confidential

Page | 193

SW: RSCM CLI

Fan Board Mfg. Date/Time (1250-1256)
Fan Board Manufacture (1257-1263)
Fan Board Product Name (1264-1270)
Fan Board Serial Number (1271-1277)
Fan Board Part Number (1278-1284)
Fan Tray Firmware Revision: (2 bytes)

Classified
as
Microsoft
Highly
Confidenti
al

X
X
X
X
X
X

Repeat for 9 fan boards for Delta
Repeat for 2 fan boards for Ingrasys

Example output:
RScmCli# show cdu fan fru
Count: 14
1:
Manufacturer: CduCo
Device Name: Fan Module
Fan Tray P/N: 23297604
Fan Tray S/N: 1280600001AA
Fan Tray Firmware P/N: 63998288
Fan Tray Firmware Rev: 51
2:
Manufacturer: CduCo
Device Name: Fan Module
Fan Tray P/N: 23297604
Fan Tray S/N: 1280600001AB
Fan Tray Firmware P/N: 63998288
Fan Tray Firmware Rev: 51
…
Completion Code: Success

Commented [PV16]: Can we add separate command say
show manager cdu fan fru and I think redfish also has similar option.
Essentially the goal is to split static vs dynamic information. ?

SW: RSCM CLI

RScmCli# show cdu fan fru -f 3
3:
Manufacturer: CduCo
Device Name: Fan Module
Fan Tray P/N: 23297604
Fan Tray S/N: 1280600001AA
Fan Tray Firmware P/N: 63998288
Fan Tray Firmware Rev: 51
Completion Code: Success

5.1.4 Show cdu fan health

Description:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 194

SW: RSCM CLI

Shows the fan controller health status.
•
•

The total count of all configured devices will be shown as the “Count” value.
The “Health” indicator will display “OK” if no fan alarms are set. Otherwise, display the
number of faulted fans and the fault status of each fan.

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# show cdu fan health [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:
RScmCli# show cdu fan health
Count: 14
Health: OK
Completion Code: Success
RScmCli# show cdu fan health
Count: 14
Health: 2 Faulted
1: OK
2: Fault
3: Fault
4: OK
…
Completion Code: Success

•
•
•
•

SW: RSCM CLI

5.2Pumps
Show cdu pump alarm
Show cdu pump info
Show cdu pump fru
Show cdu pump health

•

Show cdu pump alarm

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 195

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Description:
Shows the pump controller alarm status.
Syntax:
RScmCli# show cdu pump alarm [-h] [-p PUMP-ID]

Arguments:
-h, --help show this help message and exit
-p PUMP-ID pump ID (1-# of installed pumps). If -p is not specified, all pump controllers will be
displayed.
These are the types of alarms for pump controllers. (Alarm=1, No Alarm=0)
Alarm
In Fault (591-595)
Pump Modbus Lost: Alarm is triggered when the Modbus connection to the
pump controller is lost. (180-181 for Sidekick, 180-181,190-192 for Callan)
Pump Speed Too Low (182-183 for Sidekick, 182-183 & IS 350-352 for Callan)
Pump Temperature Sensor error (184-185)
Pump Temperature Sensor permissible deviation exceeded (186-187)
Pump Fan fault (188-189)
Current pump control mode status feedback (939)

Sidekick Callan
X
X
X
X
X
X
X

X

X

Example output:

SW: RSCM CLI

RScmCli# show cdu pump alarm
Count: 2
1:
Modbus Lost: False
Speed Too Low: True
Temperature Sensor Error: False
Temperature Sensor Permissible Deviation Exceeded: False
Fan fault: False
2:
Modbus Lost: False
Speed Too Low: False
Temperature Sensor Error: False
Temperature Sensor Permissible Deviation Exceeded: False
Fan fault: False
Completion Code: Success
RScmCli# show cdu pump alarm -p 2
Modbus Lost: False
Speed Too Low: True
Temperature Sensor Error: False
Temperature Sensor Permissible Deviation Exceeded: False
Fan fault: False
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 196

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

•

Show cdu pump info

Description:
Shows the pump controller device information.
Syntax:
RScmCli# show cdu pump info [-h] [-p PUMP-ID]
Arguments:
-h, --help
show this help message and exit.
-p PUMP-ID
Pump ID (1-# of installed pumps). If -p is not specified,
all pump controllers will be displayed.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick Callan
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

SW: RSCM CLI

Alarm
Flow Liquid (534)
Liquid Level Pressure (883)
Flow Liquid 2 (884)
Flow Liquid 3 (885)
Flow Liquid 4 (886)
Total Liquid Flow (942)
Pressure Diff Liquid (535)
Preesure Diff Liquid (Filter 2) (876)
Preesure Diff Liquid (Filter 3) (877)
Preesure Diff Liquid (Filter 4) (878)
Pressure Liquid Supply (536): Liquid Supply Pressure Sensor.
Pressure Liquid Return (537): Liquid Pressure Return Sensor.
Pressure Liquid Suction (538): Liquid Suction Pressure Sensor.
Pressure 2 Liquid Supply (869)
Pressure 2 Liquid Return (870)
Pressure 3 Liquid Return (871)
Pressure 4 Liquid Return (872)
Pressure Diff Liquid Supply Return (539)
Speed Pump 1 (540)
Speed Pump 2 (541)
Speed Pump 3 (879)
Speed Pump 4 (880)
Speed Pump 5 (881)
Pressure 3 Liquid Supply (887)
Requested Pump Speed (542)
Temperature Pump 1 (543)
Temperature Pump 2 (544)
Pressure Diff Air (545)
Requested Valve Opening (546)
Valve Opening (547)
Pump 1 Error Code (548)
Pump 2 Error Code (549)
Pump-1 status (894)

Page | 197

SW: RSCM CLI

Pump-2 status (895)
Pump-3 status (896)
Pump-4 status (897)
Pump-5 status (898)
Pump State Machine (941)

Classified
as
Microsoft
Highly
Confidenti
al

X
X
X
X
X

Example output:
RScmCli# show cdu pump info
Count: 2
1:
Flow Liquid: 23
Pressure Diff Liquid: 15
Pressure Liquid Supply: 80
Pressure Liquid Return: 65
Pressure Liquid Suction: 45
Pressure Diff Liquid Supply Return: 92
Speed: 55
Requested Pump Speed: 50
…
2:
Flow Liquid: 23
Pressure Diff Liquid: 15
Pressure Liquid Supply: 82
Pressure Liquid Return: 62
Pressure Liquid Suction: 49
Pressure Diff Liquid Supply Return: 91
Speed: 57
Requested Pump Speed: 50
…
Completion Code: Success

SW: RSCM CLI

RScmCli# show cdu pump info -p 1
1:
Flow Liquid: 23
Pressure Diff Liquid: 15
Pressure Liquid Supply: 80
Pressure Liquid Return: 65
Pressure Liquid Suction: 45
Pressure Diff Liquid Supply Return: 92
Speed: 55
Requested Pump Speed: 50
…
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 198

SW: RSCM CLI

•

Classified
as
Microsoft
Highly
Confidenti
al

Show cdu pump fru

Description:
Shows the pump controller FRU information.
Syntax:
RScmCli# show cdu pump fru [-h] [-p PUMP-ID]
Arguments:
-h, --help
show this help message and exit.
-p PUMP-ID
Pump ID (1-# of installed pumps). If -p is not specified,
all pump controllers will be displayed.
Alarm
Manufacturer (352-354): “CduCo\0” (6 bytes)
Device Name (355-361): (14 bytes)
Pump cassete P/N (362-366): (10 bytes)
Pump cassete S/N (367-372): (12 bytes)
Pump cassete Firmware Revision (373-374): (4 bytes)
Pump cassete Config (375-379): (10 bytes)
Repeat for Pump #2

Sidekick Callan
X
X
X
X
X
X
X

Pump Board Mfg. Date/Time (1100-1106)
Pump Board Manufacture (1107-1113)
Pump Board Product Name (1114-1120)
Pump Board Serial Number (1121-1127)
Pump Board Part Number (1128-1134)
Pump Board Product Build (1135-1137)

X
X
X
X
X
X

Example output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

RScmCli# show cdu pump fru
Count: 2
1:
Manufacturer: CduCo
Device Name: Pump Cassette
Pump Cassete P/N: ????
Pump Cassete S/N: ????
Pump Cassete Firmware Rev: 0172
Pump Cassete Config: ????
2:
Manufacturer: CduCo
Device Name: Pump Cassette
Pump Cassete P/N: ????
Pump Cassete S/N: ????
Pump Cassete Firmware Rev: 0172
Pump Cassete Config: ????

Page | 199

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success
RScmCli# show cdu pump fru -p 1
1:
Manufacturer: CduCo
Device Name: Pump Cassette
Pump Cassete P/N: ????
Pump Cassete S/N: ????
Pump Cassete Firmware Rev: 0172
Pump Cassete Config: ????

Commented [PV17]: Same here,

Completion Code: Success

split in to
show manager cdu pump version
show manager cdu pump fru
show manager cdu pump health
show manager cdu pump presence

•

Show cdu pump health

Description:
Shows the pump controller health status.
The total count of all configured devices will be shown as the “Count” value.
The “Health” indicator will display “OK” if no pump alarms are set. Otherwise, display the number
of faulted pumps and the fault status of each pump.
Syntax:
RScmCli# show cdu pump health [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:

SW: RSCM CLI

RScmCli# show cdu pump health
Count: 2
Health: OK
Completion Code: Success
RScmCli# show cdu pump health
Count: 2
Health: 1 Faulted
1: OK
2: Fault
Completion Code: Success

5.3Leak
•

Detection

Show cdu leak alarm

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 200

SW: RSCM CLI

•
•
•

Classified
as
Microsoft
Highly
Confidenti
al

Show cdu leak info
Show cdu leak fru
Show cdu leak health

5.3.1 Show cdu leak alarm
Description:
Shows the leak detection alarm status.
Syntax:
RScmCli# show cdu leak alarm [-h]

Arguments:
-h, --help

show this help message and exit.

Alarm
Leak Alarm (240): Leak has been detected.
Leak Rope Contamination (241): Rope contamination has been detected.
Leak Rope Break (242): Rope Break has been detected.
Leak 1 Alarm (400)
Leak 1 Rope Break (401)
Leak 2 Alarm (402)
Leak 2 Rope Break (403)
…
Leak 10 Alarm (418)
Leak 10 Rope Break (419)

Sidekick Callan
X
X
X
X
X
X
X
X
X
X
X
X

Example output:
RScmCli# show cdu leak alarm
Alarm: False
Rope Contamination: True
Rope Break: False
Leak 1 Alarm: True
Leak 1 Rope Break: False
Leak 2 Alarm: True

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 201

SW: RSCM CLI

These are the types of alarms for leak detection.

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

…
Completion Code: Success

5.3.2 Show cdu leak info
Description:
Shows the leak detector device information.
Syntax:
RScmCli# show cdu leak info [-h]
Arguments:
-h, --help
show this help message and exit.
Alarm
Leak Detection Circuit (550): 0 – No Leak, 1 – Circuit 1, 2 – Circuit 2, 4 – Circuit 3,
8 – Circuit 4, 16 – Circuit 5, 32 – Circuit 6, 64 – Circuit 7, 128 – Circuit 8
Leak Position (551):
Leak Severity (552): 0 – No leak, 1 – Minor, 2 – Major, 4 – Critical
Liquid Level Sensor (553): 0 – Level OK, 1 – Minor Alert, 2 – Major Alert, 4 –
Critical Alert

Sidekick Callan
X
X
X
X

X

Example output:
RScmCli# show cdu leak info
Leak Detection Circuit: No Leak
Leak Position: 1
Leak Severity: Minor
Liquid Level Sensor: Level OK
Completion Code: Success

SW: RSCM CLI

5.3.3 Show cdu leak fru
Description:
Shows the leak detector FRU information.
Syntax:
RScmCli# show cdu leak fru [-h]
Arguments:
-h, --help show this help message and exit.
Alarm
TT-SIM FW Version (350): TT-SIM is a sensor interface module with capacity to
monitor up to 150 m (500 ft) of sensor cable. It can be used as a leak detection
alarm unit.
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick Callan
X

Page | 202

SW: RSCM CLI

TT-SIM Product ID (351)

Classified
as
Microsoft
Highly
Confidenti
al

X

Example output:
RScmCli# show cdu leak info
TT-SIM Firmware Version: 4201
TT-SIM Product ID: 1
Completion Code: Success

5.3.4 Show cdu leak health
Description:
Shows the health status of the leak detection system.
Syntax:
RScmCli# show cdu leak health [-h]
Arguments:
-h, --help

show this help message and exit.

These are the indicators of health status for the leak detection system.
Alarm
Leak Detection Modbus Lost (243): Alarm is triggered when the Modbus
connection to the TT-SIM is lost.
Fault (244): Any other errors.

Sidekick Callan
X
X

Example output:

SW: RSCM CLI

RScmCli# show cdu leak health
Modbus Lost: False
Fault: True
Completion Code: Success

5.4Sensors
•
•

Show cdu sensor health
Show cdu sensor info

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 203

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

5.4.1 Show cdu sensor health
Description:
Shows the sensor health status.
Process sensors measure physical quantities like pressure, temperature, and flow. These
measurements are transmitted to control systems via some form of electrical signal. While many
sensor interface types exist — digital start/stop, fieldbus variations, synchronous serial interfaces,
and more — simple analog signals remain the standard transmission style for linear position
sensors and industrial automation systems. Most analog instruments will utilize one of two signal
types: analog voltage (0 - 10 V or sometimes 0 - 5V), or analog current (typically 4 - 20 mA).
Syntax:
RScmCli# show cdu sensor health [-h] [-t CONTROLLER-TYPE]
Arguments:
-h, --help show this help message and exit
-t controller-type 1 : fan, 2 : pump, 3 : valve, 4 : gateway sensor

Commented [CC18]: @Randy Kwong Does this need to add
valve type?
Commented [RK19R18]: Correct. I’ve fixed it. Thanks for
catching that.

Production Health (Callan) (IS 618-620 or IR 950-961)
Self Shutdown Status (Callan) (IR 984)
Pump Sensors Broken:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick Callan
X
X

X
X
X

X

X
X
X
X
X
X
X
X
X
X
X
X
X
X
Page | 204

SW: RSCM CLI

Sensor Error
Flow Liquid Sensor Error (200): Sensors with 0-5 V or 0-10 V analog outputs.
Alarm is triggered when the sensor reading (value) is outside a defined logical
range.
Flow Liquid Sensor 2 Error (353)
Flow Liquid Sensor 3 Error (354)
Flow Liquid Sensor 4 Error (355)
Pressure Liquid Supply Sensor Error (201)
Pressure Liquid Return Sensor Error (202)
Pressure Liquid Suction Sensor Error (203)
Pressure 2 Liquid Supply Sensor Error (356)
Pressure 2 Liquid Return Sensor Error (357)
Pressure 3 Liquid Return Sensor Error (358)
Pressure 4 Liquid Return Sensor Error (359)
Pressure Differential Liquid (Filter) Sensor Error (209)
Pressure Differential Liquid (Filter 2) Sensor Error (373)
Pressure Differential Liquid (Filter 3) Sensor Error (374)
Pressure Differential Liquid (Filter 4) Sensor Error (375)

SW: RSCM CLI

Pressure 3 Liquid Supply Sensor Error (376)
Pressure Differential Air Sensor Error (210)
Liquid Supply Pressure Broken (285)
Liquid Return Pressure Broken (286)
Liquid Flow Broken (287)
Liquid Supply Pressure 1 Outlier (671)
Liquid Supply Pressure 2 Outlier (672)
Liquid Return Pressure 1 Outlier (673)
Liquid Return Pressure 2 Outlier (674)
Liquid Return Pressure 3 Outlier (675)
Liquid Return Pressure 4 Outlier (676)

X
X
X
X
X

Classified
as
Microsoft
Highly
Confidenti
al

X
X
X
X
X
X

Pump Sensors Out of Range:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick Callan
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
Page | 205

SW: RSCM CLI

Sensor Error
Liquid Flow permissible deviation exceeded (216)
Liquid Flow 2 permissible deviation exceeded (517)
Liquid Flow 3 permissible deviation exceeded (518)
Liquid Flow 4 permissible deviation exceeded (519)
Total Liquid Flow Permissible Deviation Exceeded (198)
Pressure Liquid Supply permissible deviation exceeded (217)
Pressure Liquid Supply 2 permissible deviation exceeded (523)
Pressure Liquid Supply 3 permissible deviation exceeded (524)
Pressure Liquid Return permissible deviation exceeded (218)
Pressure Liquid Return 2 permissible deviation exceeded (527)
Pressure Liquid Return 3 permissible deviation exceeded (528)
Pressure Liquid Return 4 permissible deviation exceeded (529)
Liquid Diff Pressure Supply Return Permissible Deviation Exceeded (668)
Pump control Diff Pressure Liquid Supply/Return control limit exceeded (230)
Pump control Liquid Flow control limit exceeded (231)
Pump control Temp diff Return/Supply Temp1 control limit exceeded (232)
Pump control Diff Pressure Liquid Supply/Return control limit exceeded set 1
(234)
Pump control Diff Pressure Liquid Supply/Return control limit exceeded set 2
(235)
Liquid Flow minor threshold exceeded (261)
Flow Liquid Sensor in Minor Threshold region (261)
Flow Liquid 2 Sensor in Minor Threshold region (520)
Flow Liquid 3 Sensor in Minor Threshold region (521)
Flow Liquid 4 Sensor in Minor Threshold region (522)
Total Liquid Flow In Minor Threshold Region (199)
Pressure Liquid Supply minor threshold exceeded (262)
Pressure Liquid Supply in Minor Threshold region (262)
Pressure Liquid Supply 2 in Minor Threshold region (525)
Pressure Liquid Supply 3 in Minor Threshold region (526)
Pressure Liquid Return minor threshold exceeded (263)
Pressure Liquid Return in Minor Threshold region (263)

SW: RSCM CLI

Pressure Liquid Return 2 in Minor Threshold region (530)
Pressure Liquid Return 3 in Minor Threshold region (531)
Pressure Liquid Return 4 in Minor Threshold region (532)
Liquid Diff Pressure Supply Return Minor Threshold Region (669)
Pressure Liquid Suction permissible deviation exceeded (533)
Liquid Level Pressure Critical (615)
Liquid Level Pressure Critical Event (620)
Flow Liquid Sensor 1 Critical (621)
Flow Liquid Sensor 2 Critical (622)
Flow Liquid Sensor 3 Critical (623)
Flow Liquid Sensor 4 Critical (624)
Total Liquid Flow Critical (197)
Pressure Liquid Supply Sensor 1 Critical (625)
Pressure Liquid Supply Sensor 2 Critical (626)
Pressure Liquid Supply Sensor 3 Critical (627)
Pressure Liquid Return Sensor 1 Critical (628)
Pressure Liquid Return Sensor 2 Critical (629)
Pressure Liquid Return Sensor 3 Critical (630)
Pressure Liquid Return Sensor 4 Critical (631)
Pressure Liquid Suction Sensor 1 Critical (632)
Pressure Differential Liquid (Filter) Sensor Critical (643)
Pressure Differential Liquid (Filter 2) Sensor Critical (644)
Pressure Differential Liquid (Filter 3) Sensor Critical (645)
Pressure Differential Liquid (Filter 4) Sensor Critical (646)
Liquid Diff Pressure Supply Return Critical (667)

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

Classified
as
Microsoft
Highly
Confidenti
al

Pump Minor Threshold Crossing Alarms:
Sidekick
X
X
X

Callan

Fan Sensors Broken :
Sensor Error
Temp 1 Liquid Supply Sensor Error (205)
Temp 2 Liquid Supply Sensor Error (206)
Temp 3 Liquid Supply Sensor Error (207)
Temp Liquid Return Sensor Error (208)
Temp 2 Liquid Return Sensor Error (363)
Temp 3 Liquid Return Sensor Error (364)
Temp 4 Liquid Return Sensor Error (365)
Temp Liquid Supply Sensor Error (366 – Ingrasys)

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick
X
X
X
X

Callan
X
X
X
X
X
X
X
X

Page | 206

SW: RSCM CLI

Sensor Error
Pump Switchover failed (273)
Pump feedback source changed (274)
Fan feedback source changed (275)

SW: RSCM CLI

Temp Air Hot Top Sensor Error (211): PT1000 platinum resistance thermometer
Temperature Sensors. 1000 refers to that at 0°C sensor has a resistance of 1000
ohms (Ω). Alarm is triggered when the sensor reading (value) is outside a
defined logical range.
Temp Air Hot Bottom Sensor Error (212)
Temp Air Cold Top Sensor Error (214)
Temp Air Cold Bottom Sensor Error (215)
Liquid Supply Temp 1 Broken (281)
Liquid Supply Temp 2 Broken (282)
Liquid Supply Temp 3 Broken (283)
Liquid Return Temp Broken (284)
Temp Air Cold FT1 Failure (455)
Temp Air Cold FT2 Failure (456)
Temp Air Cold FT3 Failure (457)
Temp Air Cold FT4 Failure (458)
Temp Air Cold FT5 Failure (459)
Temp Air Cold FT6 Failure (460)
Temp Air Hot FT1 Failure (470)
Temp Air Hot FT2 Failure (471)
Temp Air Hot FT3 Failure (472)
Temp Air Hot FT4 Failure (473)
Temp Air Hot FT5 Failure (474)
Temp Air Hot FT6 Failure (475)
Liquid Supply Temp 1 Outlier (677)
Liquid Supply Temp 2 Outlier (678)
Liquid Supply Temp 3 Outlier (679)
Liquid Return Temp 1 Outlier (680)
Liquid Return Temp 2 Outlier (681)
Liquid Return Temp 3 Outlier (682)
Liquid Return Temp 4 Outlier (683)

X

X

X

X
X
X

Classified
as
Microsoft
Highly
Confidenti
al

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

Sensor Error
Temp Liquid Supply permissible deviation exceeded (219)
Temp Liquid Supply 2 permissible deviation exceeded (540)
Temp Liquid Supply 3 permissible deviation exceeded (541)
Temp Liquid Return permissible deviation exceeded (220)
Temp Liquid Return 2 permissible deviation exceeded (543)
Temp Liquid Return 3 permissible deviation exceeded (544)
Temp Liquid Return 4 permissible deviation exceeded (545)
Temp Air Hot permissible deviation exceeded (221)
Temp Air Hot Bottom permissible deviation exceeded (237)
Temp Air Cold Top permissible deviation exceeded (238)
Temp Air Cold Bottom permissible deviation exceeded (239)
Pressure Differential Liquid (Filter) permissible deviation exceeded (222)
Pressure Differential Liquid 2 (Filter) permissible deviation exceeded (549)
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick Callan
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
Page | 207

SW: RSCM CLI

Fan Sensors Out of Range:

SW: RSCM CLI

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

X
X

X
X
X
X

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
Page | 208

SW: RSCM CLI

Pressure Differential Liquid 3 (Filter) permissible deviation exceeded (550)
Pressure Differential Liquid 4 (Filter) permissible deviation exceeded (551)
Fan control Temp Liquid Supply control limit exceeded (226)
Temp Liquid Supply minor threshold exceeded (264)
Temp Liquid Supply 1 Minor Threshold region (264)
Temp Liquid Return minor threshold exceeded (265)
Temp Liquid Return in Minor Threshold region (265)
Temp Liquid Return 2 in Minor Threshold region (546)
Temp Liquid Return 3 in Minor Threshold region (547)
Temp Liquid Return 4 in Minor Threshold region (548)
Pressure Differential Liquid (Filter) minor threshold exceeded (266)
Temp Air Hot in Minor Threshold region (266)
Pressure Differential Liquid (Filter) in Minor Threshold region (271)
Pressure Differential Liquid 2 (Filter) in Minor Threshold region (552)
Pressure Differential Liquid 3 (Filter) in Minor Threshold region (553)
Pressure Differential Liquid 4 (Filter) in Minor Threshold region (554)
Temp Air Cold FT1 permissible deviation exceeded (493)
Temp Air Cold FT2 permissible deviation exceeded (494)
Temp Air Cold FT3 permissible deviation exceeded (495)
Temp Air Cold FT4 permissible deviation exceeded (496)
Temp Air Cold FT5 permissible deviation exceeded (497)
Temp Air Cold FT6 permissible deviation exceeded (498)
Temp Air Hot FT1 permissible deviation exceeded (499)
Temp Air Hot FT2 permissible deviation exceeded (500)
Temp Air Hot FT3 permissible deviation exceeded (501)
Temp Air Hot FT4 permissible deviation exceeded (502)
Temp Air Hot FT5 permissible deviation exceeded (503)
Temp Air Hot FT6 permissible deviation exceeded (504)
Temp Air Cold FT1 in Minor Threshold region (505)
Temp Air Cold FT2 in Minor Threshold region (506)
Temp Air Cold FT3 in Minor Threshold region (507)
Temp Air Cold FT4 in Minor Threshold region (508)
Temp Air Cold FT5 in Minor Threshold region (509)
Temp Air Cold FT6 in Minor Threshold region (510)
Temp Air Hot FT1 in Minor Threshold region (511)
Temp Air Hot FT2 in Minor Threshold region (512)
Temp Air Hot FT3 in Minor Threshold region (513)
Temp Air Hot FT4 in Minor Threshold region (514)
Temp Air Hot FT5 in Minor Threshold region (515)
Temp Air Hot FT6 in Minor Threshold region (516)
Temp Liquid Supply Sensor 1 Critical (636)
Temp Liquid Supply Sensor 2 Critical (637)
Temp Liquid Supply Sensor 3 Critical (638)
Temp Liquid Return Sensor 1 Critical (639)
Temp Liquid Return Sensor 2 Critical (640)
Temp Liquid Return Sensor 3 Critical (641)
Temp Liquid Return Sensor 4 Critical (642)

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

Temp Air Cold FT1 Critical (647)
Temp Air Cold FT2 Critical (648)
Temp Air Cold FT3 Critical (649)
Temp Air Cold FT4 Critical (650)
Temp Air Cold FT5 Critical (651)
Temp Air Cold FT6 Critical (652)
Temp Air Hot FT1 Critical (653)
Temp Air Hot FT2 Critical (654)
Temp Air Hot FT3 Critical (655)
Temp Air Hot FT4 Critical (656)
Temp Air Hot FT5 Critical (657)
Temp Air Hot FT6 Critical (658)
Temp Air Hot Top Sensor Critical (661)
Temp Air Hot Bottom Sensor Critical (662)
Temp Air Cold Top Sensor Critical (663)
Temp Air Cold Bottom Sensor Critical (664)
Liquid Supply Temp Critical Event (618)
Liquid Return Temp Critical Event (619)

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

Classified
as
Microsoft
Highly
Confidenti
al

Fan Minor Threshold Crossing Alarms:
•

Fan feedback source changed (275)

Valve State:
Valve State
Valve 1 Requested State (926)
Valve 2 Requested State (929)
Valve 3 Requested State (932)
Valve 4 Requested State (935)
Feedback from Isolation Valve (980)

Sidekick Callan
X
X
X
X
X

Sensor Error
Sensor Gateway Temp Liquid Return Sensor Error (245)
Sensor Gateway Temp Liquid Supply 1 Sensor Error (246)
Sensor Gateway Temp Liquid Supply 2 Sensor Error (247)
Sensor Gateway Pressure Liquid Return Sensor Error (248)
Sensor Gateway Pressure Liquid Supply 1 Sensor Error (249)
Sensor Gateway Pressure Liquid Supply 2 Sensor Error (250)
Sensor Gateway Liquid Return Temp Broken (288)
Sensor Gateway Liquid Supply Temp 1 Broken (289)
Sensor Gateway Liquid Supply Temp 2 Broken (290)
Sensor Gateway Liquid Return Pressure Broken (291)
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Sensor Gateway Sensors Broken:
Sidekick Callan
X
X
X
X
X
X
X
X
X
X
Page | 209

SW: RSCM CLI

Sensor Gateway Liquid Supply Pressure 1 Broken (292)
Sensor Gateway Liquid Supply Pressure 2 Broken (293)

Classified
as
Microsoft
Highly
Confidenti
al

X
X

Sensor Gateway Sensors Out Of Range:
Sensor Error
Sensor Gateway Temp Liquid Return permissible deviation exceeded (251)
Sensor Gateway Temp Liquid Supply 1 permissible deviation exceeded (252)
Sensor Gateway Temp Liquid Supply 2 permissible deviation exceeded (253)
Sensor Gateway Pressure Liquid Return permissible deviation exceeded (254)
Sensor Gateway Pressure Liquid Supply 1 permissible deviation exceeded (255)
Sensor Gateway Pressure Liquid Supply 2 permissible deviation exceeded (256)
Sensor Gateway Temp Liquid Return minor threshold exceeded (267)
Sensor Gateway Temp Liquid Supply 1 minor threshold exceeded (268)
Sensor Gateway Temp Liquid Supply 2 minor threshold exceeded (269)
Sensor Gateway Pressure Liquid Return minor threshold exceeded (270)
Sensor Gateway Pressure Liquid Supply 1 minor threshold exceeded (271)
Sensor Gateway Pressure Liquid Supply 2 minor threshold exceeded (272)

Sidekick Callan
X
X
X
X
X
X
X
X
X
X
X
X

Threshold Indicators:
Sidekick Callan
X
X
X
X
X
X
X
X
X
X
X
X
X
X

SW: RSCM CLI

Indicator:
Temp Air Bottom in Minor Threshold region (267)
Temp Liquid Supply 2 in Minor Threshold region (268)
Temp Liquid Supply 3 in Minor Threshold region (269)
Pressure Liquid Suction Sensor in Minor Threshold Region
(270)
Temp Air Cold Top in Minor Threshold region (273)
Temp Air Cold Bottom in Minor Threshold region (274)
Ambient Temperature Error (394)
Ambient Temperature deviation exceeded (395)
Ambient Temperature in minor region (396)
Ambient Humidity Error (397)
Ambient Humidity deviation exceeded (398)
Ambient Humidity in minor region (399)
Ambient Temperature Critical (659)
Ambient Humidity Critical (660)

RPU Sensors Broken:
Sensor Error
RPU Level Switch High – Failure (480)
RPU Level Switch Mid – Failure (481)

Sidekick Callan
X
X

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 210

SW: RSCM CLI

RPU Level Switch Low – Failure (482)
I/O Board Modbus Loss (483)
Pumping box 1 leakage sensor (487)
Pumping box 2 leakage sensor (488)
Pumping box 3 leakage sensor (489)
Pumping box 4 leakage sensor (490)
Pumping box 5 leakage sensor (491)
RPU leakage sensor (492)
Isolation Valve Health Critical Alarm (193)

Classified
as
Microsoft
Highly
Confidenti
al

X
X
X
X
X
X
X
X
X

Alarm Quantities
Sensor Error
Sidekick Callan
Temp Liquid Supply Sensor Error Quantity Alarm (950)
X
Temp Liquid Return Sensor Error Quantity Alarm (951)
X
Pressure Liquid Supply Sensor Error Quantity Alarm (952)
X
Pressure Liquid Return Sensor Error Quantity Alarm (953)
X
Flow Liquid Sensor Error Quantity Alarm (954)
X
Temp Air Hot FT Failure Quantity Alarm (955)
X
Temp Air Cold FT Failure Quantity Alarm (956)
X
Fan Modbus lost Quantity Alarm (957)
X
Fan Board Modbus lost Quantity Alarm (958)
X
Leakage Sensor Alarm (959)
X
Pumping Box Leakage Sensor Summary Alarm (960)
X
Pump Active Quantity Alarm (961)
X

RScmCli# show cdu sensor health
Health: Fault
Pump Sensor Errors:
…
Pressure Liquid Suction Sensor Error: True
Pressure Differential Liquid Filter Sensor Error: False
…
Pump Sensor Out Of Range Errors:
Liquid Flow Permissible Deviation Exceeded: False
Pressure Liquid Supply permissible deviation exceeded: False
…
Pump Minor Threshold Crossing Alarms:
…
Fan Sensor Errors:
…
Temp 2 Liquid Supply Sensor Error: True
Temp Air Hot Top Sensor Error: True
…
Fan Sensor Out Of Range Errors:
Temp Liquid Return permissible deviation exceeded: False
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 211

SW: RSCM CLI

Example output:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

…
Fan Minor Threshold Crossing Alarms:
…
Gateway Sensor Sensor Errors:
Sensor Gateway Temp Liquid Return Sensor Error: True
…
Completion Code: Success

RScmCli# show cdu sensor health -t 1
Health: OK
Completion Code: Success
RScmCli# show cdu sensor health -t 2
Health: Fault
Pump Sensor Errors:
…
Pressure Liquid Suction Sensor Error: True
Pressure Differential Liquid Filter Sensor Error: True
…
Pump Sensor Out Of Range Errors:
Liquid Flow Permissible Deviation Exceeded: False
Pressure Liquid Supply permissible deviation exceeded: True
…
…

Commented [PV20]: The output format data seems to be
clumsy, we should discuss.
Commented [RK21R20]: I cleaned this up.

Completion Code: Success

5.4.2 Show cdu sensor info
Description:
Shows the sensor info.

SW: RSCM CLI

Syntax:
RScmCli# show cdu sensor info [-h]
Arguments:
-h, --help show this help message and exit
Sensor Gateway Liquid Temperature:
Sensor Info
Sensor Gateway Temp Liquid Return (583)
Sensor Gateway Temp 1 Liquid Supply (584)
Sensor Gateway Temp 2 Liquid Supply (585)

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick
X
X
X

Callan

Page | 212

SW: RSCM CLI

Sensor Gateway Liquid Pressure:
Sensor Info
Sensor Gateway Pressure Liquid Return (586)
Sensor Gateway Pressure Liquid Supply 1 (587)
Sensor Gateway Pressure Liquid Supply 2 (588)
Sensor Gateway Pressure Diff Liquid Supply – Return 1 (589)
Sensor Gateway Pressure Diff Liquid Supply – Return 2 (590)

Sidekick
X
X
X
X
X

Callan

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# show cdu sensor info
Sensor Gateway Liquid Temperature:
Sensor Gateway Temp Liquid Return: 10.4
Sensor Gateway Temp 1 Liquid Supply: 23.3
…
Sensor Gateway Liquid Pressure:
Sensor Gateway Pressure Liquid Return: 343.2
Sensor Gateway Pressure Liquid Supply 1: 232.3
…
Completion Code: Success

5.5Control

Show cdu control sensor
Set cdu control sensor
Show cdu control param
Set cdu control param
Show cdu control limits
Set cdu control limits
Show cdu control metrics
Set cdu control metrics

SW: RSCM CLI

•
•
•
•
•
•
•
•

Commands

5.5.1 Show cdu control sensor

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 213

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Description:
Shows the information about the sensor of the controller.
Syntax:
RScmCli# show cdu control sensor [-h]

Arguments:
show this help message and exit.

Command
Unit ON / OFF request (1): This is the current operating mode of the CDU
controller; only values ON and OFF are used in the context of the Microsoft
system. (1=ON, 0=OFF)
Max cooling request (2) (1=Active)
Fan control mode (Manual/PID) (3) (0 – Temp 1 Liquid Supply, 3 – Manual,
1/2 - Invalid)
Setpoint Temp Liquid Supply for Fan Control (4)
Fan Setpoint Manual Mode (5)
Minimum Fan Speed (6)
Setpoint Air Pressure Diff for Fan Control (7)
Pump control mode (Manual/PID) (23) (0 – Differential Pressure Liquid
Supply/Return, 1 – Liquid Flow, 2 – Temperature Difference Return/Supply
Temp1, 3 – Manual)
Setpoint Pressure differential “Liquid Return Pressure” – “Liquid Supply
Pressure” (24)
Setpoint Liquid Flow (25): Rate of change of liquid level due to leak.
Setpoint Temperature differential “Liquid Return Temperature” – “Liquid
Supply Temperature 1 (26)
Pump Setpoint Manual Mode (27)
Minimum Pump Speed (28)
Pump Switchover Request (49)
Valve Control Mode (Manual/PID) (50)
Setpoint Temp Cold Air (51)
Setpoint Temperature differential Liquid Return Temperature (52)
Setpoint Liquid Return Temperature (53)
Setpoint Manual Valve Opening (54)
Minimum Valve Opening (55)
Total Heat Removed Reset Request (63)
Leak Detection Algorithm Reset Request (64)
FRU Information Update Request (65)
Factory Reset Request (66)
Attention request LED (67)
Attention request LED on the Valve Gateway (68)
Filter 1 LED (Red) (200)
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick
X

Callan
X

X
X

X
X

X
X
X
X
X

X
X
X
X
X

X

X

X
X

X
X

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

X
X

SW: RSCM CLI

-h, --help

X
X

X
Page | 214

SW: RSCM CLI

Filter 1 LED (Green) (201)
Filter 2 LED (Red) (202)
Filter 2 LED (Green) (203)
Filter 3 LED (Red) (204)
Filter 3 LED (Green) (205)
Filter 4 LED (Red) (206)
Filter 4 LED (Green) (207)
Public Key 1 Status (300)
Public Key 1 Status (301)
Public Key 1 Status (302)
Public Key 1 Status (303)
Public Key 1 Status (304)
Upgrade Execute (400)
Upgrade Stage (401)
Upgrade Progress (402)
Upgrade Complete (403)
Upgrade Result (404)
Number of Filter Valves to Close (729)

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# show cdu control sensor
(01) Unit ON/OFF Request: False
(02) Max Cooling Request: False
(03) Fan Control Mode: Temp 1 Liquid Supply
(04) Setpoint Temp Liquid Supply For Fan Control: 45
(05) Fan Setpoint Manual Mode: 60
(06) Minimum Fan Speed: 30
…
Completion Code: Success

5.5.2 Set cdu control sensor

SW: RSCM CLI

Description:
Sets the sensor of the controller.
Syntax:
RScmCli# set cdu control sensor [-h] -s SENSOR-NUM -v VALUE

Arguments:
-h, --help
show this help message and exit.
-s sensor-num (get valid sensor number list from show command in “Show
cdu control sensor”)
-v value to be set to the sensor

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 215

SW: RSCM CLI

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick
X

Callan
X

X
X

X
X

X
X
X
X
X

X
X
X
X
X

X

X

X
X

X
X

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

X
X

X

X
X
X
X
X
X
X
X
X
X
X
X
Page | 216

SW: RSCM CLI

Command
Unit ON / OFF request (1): This is the current operating mode of the CDU
controller; only values ON and OFF are used in the context of the
Microsoft system. (1=ON, 0=OFF)
Max cooling request (2) (1=Active)
Fan control mode (Manual/PID) (3) (0 – Temp 1 Liquid Supply, 3 – Manual,
1/2 - Invalid)
Setpoint Temp Liquid Supply for Fan Control (4)
Fan Setpoint Manual Mode (5)
Minimum Fan Speed (6)
Setpoint Air Pressure Diff for Fan Control (7)
Pump control mode (Manual/PID) (23) (0 – Differential Pressure Liquid
Supply/Return, 1 – Liquid Flow, 2 – Temperature Difference
Return/Supply Temp1, 3 – Manual)
Setpoint Pressure differential “Liquid Return Pressure” – “Liquid Supply
Pressure” (24)
Setpoint Liquid Flow (25): Rate of change of liquid level due to leak.
Setpoint Temperature differential “Liquid Return Temperature” – “Liquid
Supply Temperature 1 (26)
Pump Setpoint Manual Mode (27)
Minimum Pump Speed (28)
Pump Switchover Request (49)
Valve Control Mode (Manual/PID) (50)
Setpoint Temp Cold Air (51)
Setpoint Temperature differential Liquid Return Temperature (52)
Setpoint Liquid Return Temperature (53)
Setpoint Manual Valve Opening (54)
Minimum Valve Opening (55)
Total Heat Removed Reset Request (63)
Leak Detection Algorithm Reset Request (64)
FRU Information Update Request (65)
Factory Reset Request (66)
Attention request LED (67)
Attention request LED on the Valve Gateway (68)
Filter 1 LED (Red) (200)
Filter 1 LED (Green) (201)
Filter 2 LED (Red) (202)
Filter 2 LED (Green) (203)
Filter 3 LED (Red) (204)
Filter 3 LED (Green) (205)
Filter 4 LED (Red) (206)
Filter 4 LED (Green) (207)
Public Key 1 Status (300)
Public Key 1 Status (301)
Public Key 1 Status (302)
Public Key 1 Status (303)

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

Public Key 1 Status (304)
Number of Filter Valves to Close (729)

X
X

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli#
(01)
(02)
(03)
(04)
(05)
(06)
…

show cdu control sensor
Unit ON/OFF Request: False
Max Cooling Request: False
Fan Control Mode: Temp 1 Liquid Supply
Setpoint Temp Liquid Supply For Fan Control: 45
Fan Setpoint Manual Mode: 60
Minimum Fan Speed: 30

Completion Code: Success

To set register #5 shown above:
RScmCli# set cdu control sensor -s 5 -v 61
(05) Fan Setpoint Manual Mode: 61
Completion Code: Success

Note: Each sensor has a unique identifier (shown in the “Show cdu control sensor” command) to be
used in this command.

Description:
Shows the PID (Proportional Integral Differential) speed control of the controller. For pump, the
control system tends to keep pressure on a desired level. The speed of a pump is changing
accordingly to Pressure-Setpoint relation to provide the desired pressure. Pressure is a feedback
signal from the system. Setpoint is actually a desired pressure value. Feedback comes from the
pressure sensor. Typically, the PID controller is responsible for the adjustment of the speed
reference. The output of PID controller is a reference value for the speed controller.
For fan, air moving fans provide a critical service in that they cool the system power electronics.
However, just running the fan at full speed has a disadvantage in that it can produce significant
audio noise. Therefore, most modern systems regulate the speed of the fan so they can balance the
requirements of cooling and noise abatement. Given that the fan speed is also significantly affected
by restrictions on the airflow, both into (dirty air filter) and out of (blocked outlet ports) the fan,
some form of fan speed regulation is typically needed to maintain consistent cooling. This
application note will cover a relatively simple, low-cost solution for managing the fan speed, using a
software based Proportional Integral Differential (PID) fan speed control.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 217

SW: RSCM CLI

5.5.3 Show cdu control param

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# show cdu control param [-h] [-t CONTROLLER-TYPE]

Arguments:
-h, --help
show this help message and exit.
-t controller-type
1 : fan, 2 : pump, 3: valve

Example output:
RScmCli# show cdu control param -t 1
(08) Fan PID Kp CM1: 12
(09) Fan PID Ti CM1: 12
(10) Fan PID Td CM1: 10
(11) Fan PID DeadBand CM1: 11
(13) Fan PID Kp CM2: 11
…
Completion Code: Success

Note : a unique number of assigned to each PID controls so they can be used as reference for setting
the values in « Set cdu control param ».

5.5.4 Set cdu control param

Syntax:
RScmCli# set cdu control param [-h] [-t CONTROLLER-TYPE] -s SENSOR-NUM -v
VALUE
Arguments:
-h, --help
show this help message and exit.
-t controller-type
1 : fan, 2 : pump, 3 : valve
-s sensor-num (get valid sensor number list from show command)
-v value to be set to the sensor
Command
Fan_PID.Kp CM1(8): Fan PID Control Mode 1 Proportional gain.
Fan_PID.Ti CM1 (9): Fan PID Control Mode 1 Integral time, a tuning
parameter.
Fan_PID.Td CM1 (10): Fan PID Control Mode 1 Derivative time, a tuning
parameter.
Fan_PID.DeadBand CM1 (11)
Fan_PID.Kp CM2 (13): Fan PID Control Mode 2 Proportional gain.
Fan_PID.Ti CM2 (14): Fan PID Control Mode 2 Integral time, a tuning
parameter.
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick
X
X

Callan
X
X

X

X

X
X
X

X
X
X

Page | 218

SW: RSCM CLI

Description:
Sets the PID (Proportional Integral Differential) speed control of the controller.

SW: RSCM CLI

Fan_PID.Td CM2 (15): Fan PID Control Mode 2 Derivative time, a tuning
parameter.
Fan_PID.DeadBand CM2 (16)
Fan_PID.Kp CM3 (18): Fan PID Control Mode 3 Proportional gain.
Fan_PID.Ti CM3 (19): Fan PID Control Mode 3 Integral time, a tuning
parameter.
Fan_PID.Td CM3 (20): Fan PID Control Mode 3 Derivative time, a tuning
parameter.
Fan_PID.DeadBand CM3 (21)
Pump_PID.Kp CM1 (29)
Pump_PID.Ti CM1 (30)
Pump_PID.Td CM1 (31)
Pump_PID.DeadBand CM1 (32)
Pump_PID.Kp CM2 (34)
Pump_PID.Ti CM2 (35)
Pump_PID.Td CM2 (36)
Pump_PID.DeadBand CM2 (37)
Pump_PID.Kp CM3 (39)
Pump_PID.Ti CM3 (40)
Pump_PID.Td CM3 (41)
Pump_PID.DeadBand CM3 (42)
Valve_PID.Kp (56)
Valve PID.Ti (57)
Valve PID.Td (58)
Valve PID.DeadBand (59)

X

X

X
X
X

X
X
X

X

X

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

X
X
X
X
X
X
X
X
X
X
X
X
X

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# set cdu control param -t 1 -s 10 -v 11
(10) Fan PID Td CM1: 11
Completion Code: Success

SW: RSCM CLI

Note: Each PID control has a unique identifier (as shown in the “Show cdu control param” command)
to be used in this command.

5.5.5 Show cdu control limits
Description:
Shows alarm sensor limit for controller.
Syntax:
RScmCli# show cdu control limits [-h] [-t CONTROLLER-TYPE]
Arguments:
-h, --help
show this help message and exit.
-t controller-type
1 : fan, 2 : pump, 3 : valve, 4 : gateway sensor
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 219

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# show cdu control limits -t 1
(76) Temp Liquid Supply Min: ????
(77) Temp Liquid Supply Max: ????
(78) Temp Liquid Return Min: ????
(79) Temp Liquid Return Max: ????
(85) Fan Control Temp Liquid Supply Exceed Min: 2
(86) Fan Control Temp Liquid Supply Exceed Max: 3
Completion Code: Success
RScmCli# show cdu control limits -t 2
(70) Liquid Flow Min: ????
(71) Liquid Flow Max: ????
(72) Pressure Liquid Supply Min: ????
(73) Pressure Liquid Supply Max: ????
…
Completion Code: Success

Commented [PV22]: Can we remove the numbers and Temp
key word
Commented [RK23R22]: "Temp" keyword is needed, because
otherwise it collides with another register.
For these sensors, I put the register numbers here to uniquely
identify them. Because the "set" function needs to use these register
numbers in order to set them. This should be the most
straightforward way for the user.

5.5.6 Set cdu control limits
Description:
Sets alarm sensor limit for controller.
Syntax:
RScmCli# set cdu control limits [-h] -t CONTROLLER-TYPE -s SENSOR-NUM -l
LIMIT
Arguments:
-h, --help
show this help message and exit.
-t controller-type
1 : fan, 2 : pump, 3 : valve, 4 : gateway sensor
-s sensor-num (get valid sensor number list from show command)
-l limit
(get valid limit range from show command)
Pump Sensor Limits:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Sidekick Callan
X
X
X

X

X
X
X
X
X
X
X
X

X

X

Page | 220

SW: RSCM CLI

Param Setting
Liquid Flow Min (70): Minimum rate of change of liquid level due to leak (range:
TBD).
Liquid Flow Max (71): Maximum rate of change of liquid level due to leak: TBD
Liquid Flow Upper Critical Threshold (120)
Liquid Flow Upper Major Threshold (121)
Liquid Flow Upper Minor Threshold (122)
Liquid Flow Lower Critical Threshold (123)
Liquid Flow Lower Major Threshold (124)
Liquid Flow Lower Minor Threshold (125)
Pressure Liquid Supply Min (72): Minimum limit of the Liquid Supply Pressure:
TBD
Pressure Liquid Supply Max (73): Maximum limit of the Liquid Supply Pressure:
TBD

SW: RSCM CLI

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

X
X

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

X
SW: RSCM CLI

Pressure Liquid Return Min (74): TBD
Pressure Liquid Return Max (75): TBD
Pressure Liquid Suction Min (109)
Pressure Liquid Suction Max (110)
Liquid Return Temperature Upper Critical Threshold (126)
Liquid Return Temperature Upper Major Threshold (127)
Liquid Return Temperature Upper Minor Threshold (128)
Liquid Supply Temperature Upper Critical Threshold (132)
Liquid Supply Temperature Upper Major Threshold (133)
Liquid Supply Temperature Upper Minor Threshold (134)
Air Inlet Temperature Upper Critical Threshold (138)
Air Inlet Temperature Upper Major Threshold (139)
Air Inlet Temperature Upper Minor Threshold (140)
Air Outlet Temperature Upper Critical Threshold (144)
Air Outlet Supply Temperature Upper Major Threshold (145)
Air Outlet Supply Temperature Upper Minor Threshold (146)
Liquid Supply Pressure Upper Critical Threshold (150)
Liquid Supply Pressure Upper Major Threshold (151)
Liquid Supply Pressure Upper Minor Threshold (152)
Liquid Supply Pressure Lower Critical Threshold (153)
Liquid Supply Pressure Lower Major Threshold (154)
Liquid Supply Pressure Lower Minor Threshold (155)
Liquid Return Pressure Upper Critical Threshold (156)
Liquid Return Pressure Upper Major Threshold (157)
Liquid Return Pressure Upper Minor Threshold (158)
Liquid Return Pressure Lower Critical Threshold (159)
Liquid Return Pressure Lower Major Threshold (160)
Liquid Return Pressure Lower Minor Threshold (161)
Liquid Suction Pressure Upper Critical Threshold (162)
Liquid Suction Pressure Upper Major Threshold (163)
Liquid Suction Pressure Upper Minor Threshold (164)
Liquid Suction Pressure Lower Critical Threshold (165)
Liquid Suction Pressure Lower Major Threshold (166)
Liquid Suction Pressure Lower Minor Threshold (167)
Pump control Diff Pressure Liquid Supply/Return control limit exceedance Min
(93): 0.2bar - 0.5bar
Pump control Diff Pressure Liquid Supply/Return control limit exceedance Max
(94): 0.2bar - 0.5bar
Pump control Liquid Flow control limit exceedance Min (95): 2 l/min – 10 l/min
Pump control Liquid Flow control limit exceedance Max (96): 2 l/min – 10 l/min
Pump control Temp diff Return/Supply Temp1 control limit exceedance Min (97):
1°C - 5°C
Pump control Temp diff Return/Supply Temp1 control limit exceedance Max
(98): 1°C - 5°C
Liquid Diff Pressure Filter Min (99)
Liquid Diff Pressure Filter Max (100)
Pump 1 Temp Min (101)
Pump 1 Temp Max (102)

Classified
as
Microsoft
Highly
Confidenti
al

X
X
X
X
X
X
X
X
X

X
X

Page | 221

SW: RSCM CLI

Pump 2 Temp Min (103)
Pump 2 Temp Max (104)
Pressure Differential Air Min (109)
Pressure Differential Air Max (110)

Classified
as
Microsoft
Highly
Confidenti
al

X
X
X
X

Fan Sensor Limits:
Param Setting
Temp Liquid Supply Min (76): TBD
Temp Liquid Supply Max (77): TBD
Temp Liquid Return Min (78): TBD
Temp Liquid Return Max (79): TBD
Temp Air Hot Alarm limit (80): TBD
Temp Air Cold Alarm limit (111)
Temp Air Hot Bottom Alarm limit (117)
Temp Air Hot Top Alarm limit (118)
Fan control Air diff Pressure control limit exceedance Min (81)
Fan control Air diff Pressure control limit exceedance Max (82)
Fan control Temp Diff Air Cold/Hot control limit exceedance Min (83)
Fan control Temp Diff Air Cold/Hot control limit exceedance Max (84)
Fan control Temp Liquid Supply control limit exceedance Min (85): 1°C - 5°C
Fan control Temp Liquid Supply control limit exceedance Max (86): 1°C - 5°C

Sidekick
X
X
X
X
X
X
X
X
X
X
X
X
X
X

Callan
X
X
X
X
X

Valve Sensor Limits:
Param Setting
Valve control Temp Air Cold control limit exceedance Min (87)
Valve control Temp Air Cold control limit exceedance Max (88)
Valve control Temp Diff Liquid Supply/Return control limit exceedance Min (89)
Valve control Temp Diff Liquid Supply/Return control limit exceedance Max (90)
Valve control Temp Liquid Return control limit exceedance Min (91)
Valve control Temp Liquid Return control limit exceedance Max (92)

Sidekick Callan
X
X
X
X
X
X

Param Setting
Pump control Diff Pressure Liquid Supply/Return control limit exceedance Min
set 1 (105)
Pump control Diff Pressure Liquid Supply/Return control limit exceedance Max
set 1 (106)
Pump control Diff Pressure Liquid Supply/Return control limit exceedance Min
set 2 (107)
Pump control Diff Pressure Liquid Supply/Return control limit exceedance Max
set 2 (108)

Sidekick Callan
X
X
X
X

Example output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 222

SW: RSCM CLI

Gateway Sensor Limits:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set cdu control limits -t 1 -s 77 -l 3
(77) Temp Liquid Supply Max: 3
Completion Code: Success

5.5.7 Show cdu control metrics
Description:
Shows CDU performance metrics and control for controller.
Note – This command is not supported for Callan similar to set cdu control metrics.
Syntax:
RScmCli# show cdu control metrics [-h]
Arguments:
-h, --help
show this help message and exit.
Example output:
RScmCli# show cdu control metrics
(112) Pump Switchover Failed Reset: 0
(113) Pump Feedback Source Change Counter: 5
(114) Fan Feedback Source Change Counter: 3
(115) PID parameters immediate update flag: 0
(116) Leak Detection Algorithm Control: True
Completion Code: Success

5.5.8 Set cdu control metrics
Description:
Sets CDU performance metrics and control for controller.
Syntax:
RScmCli# set cdu control metrics [-h]
SW: RSCM CLI

Arguments:
-h, --help
show this help message and exit.
-s sensor-num (get valid control number list from show command)
-l value
(value to set control)
Pump Sensor Limits:
Control Setting
Pump Switchover Failed Reset (112)
Pump Feedback Source Change Counter (113)
Fan Feedback Source Change Counter (114)
PID parameters immediate update flag (115)

Sidekick Callan
X
X
X
X

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 223

SW: RSCM CLI

Leak Detection Algorithm Control (116)

Classified
as
Microsoft
Highly
Confidenti
al

X

Example output:
RScmCli# set cdu control metrics -s 112 -l 0
(112) Pump Switchover Failed Reset: 0
Completion Code: Success

5.5.9 Get CDU control Setpoints
Description:
Read threshold & control parameters saved in Callan back-plane EEPROM.
Syntax:
RScmCli# get cdu control setpoints
Arguments:
-h, --help

show this help message and exit.

Holding Register name (offset)
Fan Control Mode (003)
Setpoint Temp Liquid Supply For Fan Control (004)
Fan PID Kp CM1 (029)
Fan PID Ti CM1 (030)
Fan PID Td CM1 (031)
Fan PID Dead Band CM1 (032)
Fan PID Kp CM2 (034)
Fan PID Ti CM2 (035)
Fan PID Td CM2 (036)
Fan PID Dead Band CM2 (037)
Fan PID Kp CM3 (039)
Fan PID Ti CM3 (040)
Fan PID Td CM3 (041)
Fan PID Dead Band CM3 (042)
Pump Control Mode (023)
Pump PID Kp CM1 (029)
Pump PID Ti CM1 (030)
Pump PID Td CM1 (031)
Pump PID Dead Band CM1 (032)

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Callan
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

Page | 224

SW: RSCM CLI

Setpoint Parameters:

SW: RSCM CLI

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

SW: RSCM CLI

Pump PID Kp CM2 (034)
Pump PID Ti CM2 (035)
Pump PID Td CM2 (036)
Pump PID Dead Band CM2 (037)
Pump PID Kp CM3 (039)
Pump PID Ti CM3 (040)
Pump PID Td CM3 (041)
Pump PID Dead Band CM3 (042)
IT Rack SKU Config File Version Major (082)
IT Rack SKU Config File Version Minor (083)
Liquid Flow Upper Critical Threshold (120)
Liquid Flow Upper Major Threshold (121)
Liquid Flow Upper Minor Threshold (122)
Liquid Flow Lower Critical Threshold (123)
Liquid Flow Lower Major Threshold (124)
Liquid Flow Lower Minor Threshold (125)
Liquid Return Temperature Upper Critical Threshold (126)
Liquid Return Temperature Upper Major Threshold (127)
Liquid Return Temperature Upper Minor Threshold (128)
Liquid Supply Temperature Upper Critical Threshold (132)
Liquid Supply Temperature Upper Major Threshold (133)
Liquid Supply Temperature Upper Minor Threshold (134)
Air Inlet Temperature Upper Critical Threshold (138)
Air Inlet Temperature Upper Major Threshold (139)
Air Inlet Temperature Upper Minor Threshold (140)
Air Outlet Temperature Upper Critical Threshold (144)
Air Outlet Supply Temperature Upper Major Threshold (145)
Air Outlet Supply Temperature Upper Minor Threshold (146)
Liquid Supply Pressure Upper Critical Threshold (150)
Liquid Supply Pressure Upper Major Threshold (151)
Liquid Supply Pressure Upper Minor Threshold (152)
Liquid Supply Pressure Lower Critical Threshold (153)
Liquid Supply Pressure Lower Major Threshold (154)
Liquid Supply Pressure Lower Minor Threshold (155)
Liquid Return Pressure Upper Critical Threshold (156)
Liquid Return Pressure Upper Major Threshold (157)
Liquid Return Pressure Upper Minor Threshold (158)
Liquid Return Pressure Lower Critical Threshold (159)
Liquid Return Pressure Lower Major Threshold (160)
Liquid Return Pressure Lower Minor Threshold (161)
Liquid Suction Pressure Upper Critical Threshold (162)
Liquid Suction Pressure Upper Major Threshold (163)
Liquid Suction Pressure Upper Minor Threshold (164)

Classified
as
Microsoft
Highly
Confidenti
al

Page | 225

SW: RSCM CLI

Liquid Suction Pressure Lower Critical Threshold (165)
Liquid Suction Pressure Lower Major Threshold (166)
Liquid Suction Pressure Lower Minor Threshold (167)
Total Liquid Flow Upper Critical Threshold (722)
Total Liquid Flow Upper Major Threshold (723)
Total Liquid Flow Upper Minor Threshold (724)
Total Liquid Flow Lower Critical Threshold (725)
Total Liquid Flow Lower Major Threshold (726)
Total Liquid Flow Lower Minor Threshold (727)
Number of Filter Valves to Close (729)

Classified
as
Microsoft
Highly
Confidenti
al

X
X
X
X
X
X
X
X
X
X

Example output:
RScmCli# sh cdu control setpoints

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

AirInletTempLowerCriticalThreshold: 0
AirInletTempLowerMajorThreshold: 0
AirInletTempLowerMinorThreshold: 0
AirInletTempUpperCriticalThreshold: 370
AirInletTempUpperMajorThreshold: 350
AirInletTempUpperMinorThreshold: 330
AirOutletTempLowerCriticalThreshold: 0
AirOutletTempLowerMajorThreshold: 0
AirOutletTempLowerMinorThreshold: 0
AirOutletTempUpperCriticalThreshold: 540
AirOutletTempUpperMajorThreshold: 520
AirOutletTempUpperMinorThreshold: 500
FanControlMode: 0
FanPIDDeadBandCM1: 0
FanPIDDeadBandCM2: 0
FanPIDDeadBandCM3: 0
FanPIDKpCM1: 300
FanPIDKpCM2: 305
FanPIDKpCM3: 305
FanPIDTdCM1: 0
FanPIDTdCM2: 0
FanPIDTdCM3: 0
FanPIDTiCM1: 5000
FanPIDTiCM2: 5005
FanPIDTiCM3: 5005
ITRackSKUConfigFileVersionMajor: 1
ITRackSKUConfigFileVersionMinor: 1
LiquidFlowLowerCriticalThreshold: 405
LiquidFlowLowerMajorThreshold: 505
LiquidFlowLowerMinorThreshold: 605
LiquidFlowUpperCriticalThreshold: 2010
LiquidFlowUpperMajorThreshold: 1805
LiquidFlowUpperMinorThreshold: 1505
LiquidReturnPressureLowerCriticalThreshold: 0
LiquidReturnPressureLowerMajorThreshold: 50

Page | 226

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

LiquidReturnPressureLowerMinorThreshold: 100
LiquidReturnPressureUpperCriticalThreshold: 560
LiquidReturnPressureUpperMajorThreshold: 350
LiquidReturnPressureUpperMinorThreshold: 200
LiquidReturnTempLowerCriticalThreshold: 0
LiquidReturnTempLowerMajorThreshold: 0
LiquidReturnTempLowerMinorThreshold: 0
LiquidReturnTempUpperCriticalThreshold: 640
LiquidReturnTempUpperMajorThreshold: 620
LiquidReturnTempUpperMinorThreshold: 600
LiquidSuctionPressureLowerCriticalThreshold: 5
LiquidSuctionPressureLowerMajorThreshold: 15
LiquidSuctionPressureLowerMinorThreshold: 25
LiquidSuctionPressureUpperCriticalThreshold: 410
LiquidSuctionPressureUpperMajorThreshold: 100
LiquidSuctionPressureUpperMinorThreshold: 50
LiquidSupplyPressureLowerCriticalThreshold: 100
LiquidSupplyPressureLowerMajorThreshold: 130
LiquidSupplyPressureLowerMinorThreshold: 170
LiquidSupplyPressureUpperCriticalThreshold: 560
LiquidSupplyPressureUpperMajorThreshold: 400
LiquidSupplyPressureUpperMinorThreshold: 300
LiquidSupplyTempLowerCriticalThreshold: 0
LiquidSupplyTempLowerMajorThreshold: 0
LiquidSupplyTempLowerMinorThreshold: 0
LiquidSupplyTempUpperCriticalThreshold: 510
LiquidSupplyTempUpperMajorThreshold: 470
LiquidSupplyTempUpperMinorThreshold: 450
PumpControlMode: 1
PumpPIDDeadBandCM1: 0
PumpPIDDeadBandCM2: 0
PumpPIDDeadBandCM3: 0
PumpPIDKpCM1: 40
PumpPIDKpCM2: 17
PumpPIDKpCM3: 0
PumpPIDTdCM1: 0
PumpPIDTdCM2: 0
PumpPIDTdCM3: 0
PumpPIDTiCM1: 1500
PumpPIDTiCM2: 2000
PumpPIDTiCM3: 0
SetpointTempLiquidSupplyForFanControl: 430
Completion Code: Success
RScmCli#

5.5.10 Set cdu control setpoints
Description:
Set threshold & control parameters in Callan back-plane EEPROM.
Syntax:
RScmCli# set cdu control setpoints [-h] -f /usr/srvroot/shared/gb200.json

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 227

SW: RSCM CLI

Arguments:
-h, --help
show this help message and exit.
-f Input absolute json file path containing all setpoint registers to be
saved to Callan back-plane EEPROM

Classified
as
Microsoft
Highly
Confidenti
al

Holding Register name (offset)
Fan Control Mode (003)
Setpoint Temp Liquid Supply For Fan Control (004)
Fan PID Kp CM1 (029)
Fan PID Ti CM1 (030)
Fan PID Td CM1 (031)
Fan PID Dead Band CM1 (032)
Fan PID Kp CM2 (034)
Fan PID Ti CM2 (035)
Fan PID Td CM2 (036)
Fan PID Dead Band CM2 (037)
Fan PID Kp CM3 (039)
Fan PID Ti CM3 (040)
Fan PID Td CM3 (041)
Fan PID Dead Band CM3 (042)
Pump Control Mode (023)
Pump PID Kp CM1 (029)
Pump PID Ti CM1 (030)
Pump PID Td CM1 (031)
Pump PID Dead Band CM1 (032)
Pump PID Kp CM2 (034)
Pump PID Ti CM2 (035)
Pump PID Td CM2 (036)
Pump PID Dead Band CM2 (037)
Pump PID Kp CM3 (039)
Pump PID Ti CM3 (040)
Pump PID Td CM3 (041)
Pump PID Dead Band CM3 (042)
IT Rack SKU Config File Version Major (082)
IT Rack SKU Config File Version Minor (083)
Liquid Flow Upper Critical Threshold (120)
Liquid Flow Upper Major Threshold (121)
Liquid Flow Upper Minor Threshold (122)
Liquid Flow Lower Critical Threshold (123)
Liquid Flow Lower Major Threshold (124)
Liquid Flow Lower Minor Threshold (125)
Liquid Return Temperature Upper Critical Threshold (126)
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Callan
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
Page | 228

SW: RSCM CLI

Setpoint Parameters:

SW: RSCM CLI

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

Example output:
RScmCli# set cdu control setpoints -f samoa36.json
AirInletTempLowerCriticalThreshold: 0
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 229

SW: RSCM CLI

Liquid Return Temperature Upper Major Threshold (127)
Liquid Return Temperature Upper Minor Threshold (128)
Liquid Supply Temperature Upper Critical Threshold (132)
Liquid Supply Temperature Upper Major Threshold (133)
Liquid Supply Temperature Upper Minor Threshold (134)
Air Inlet Temperature Upper Critical Threshold (138)
Air Inlet Temperature Upper Major Threshold (139)
Air Inlet Temperature Upper Minor Threshold (140)
Air Outlet Temperature Upper Critical Threshold (144)
Air Outlet Supply Temperature Upper Major Threshold (145)
Air Outlet Supply Temperature Upper Minor Threshold (146)
Liquid Supply Pressure Upper Critical Threshold (150)
Liquid Supply Pressure Upper Major Threshold (151)
Liquid Supply Pressure Upper Minor Threshold (152)
Liquid Supply Pressure Lower Critical Threshold (153)
Liquid Supply Pressure Lower Major Threshold (154)
Liquid Supply Pressure Lower Minor Threshold (155)
Liquid Return Pressure Upper Critical Threshold (156)
Liquid Return Pressure Upper Major Threshold (157)
Liquid Return Pressure Upper Minor Threshold (158)
Liquid Return Pressure Lower Critical Threshold (159)
Liquid Return Pressure Lower Major Threshold (160)
Liquid Return Pressure Lower Minor Threshold (161)
Liquid Suction Pressure Upper Critical Threshold (162)
Liquid Suction Pressure Upper Major Threshold (163)
Liquid Suction Pressure Upper Minor Threshold (164)
Liquid Suction Pressure Lower Critical Threshold (165)
Liquid Suction Pressure Lower Major Threshold (166)
Liquid Suction Pressure Lower Minor Threshold (167)
Total Liquid Flow Upper Critical Threshold (722)
Total Liquid Flow Upper Major Threshold (723)
Total Liquid Flow Upper Minor Threshold (724)
Total Liquid Flow Lower Critical Threshold (725)
Total Liquid Flow Lower Major Threshold (726)
Total Liquid Flow Lower Minor Threshold (727)
Number of Filter Valves to Close (729)

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

AirInletTempLowerMajorThreshold: 0
AirInletTempLowerMinorThreshold: 0
AirInletTempUpperCriticalThreshold: 370
AirInletTempUpperMajorThreshold: 350
AirInletTempUpperMinorThreshold: 330
AirOutletTempLowerCriticalThreshold: 0
AirOutletTempLowerMajorThreshold: 0
AirOutletTempLowerMinorThreshold: 0
AirOutletTempUpperCriticalThreshold: 540
AirOutletTempUpperMajorThreshold: 520
AirOutletTempUpperMinorThreshold: 500
FanControlMode: 0
FanPIDDeadBandCM1: 0
FanPIDDeadBandCM2: 0
FanPIDDeadBandCM3: 0
FanPIDKpCM1: 300
FanPIDKpCM2: 305
FanPIDKpCM3: 305
FanPIDTdCM1: 0
FanPIDTdCM2: 0
FanPIDTdCM3: 0
FanPIDTiCM1: 5000
FanPIDTiCM2: 5005
FanPIDTiCM3: 5005
ITRackSKUConfigFileVersionMajor: 1
ITRackSKUConfigFileVersionMinor: 1
LiquidFlowLowerCriticalThreshold: 405
LiquidFlowLowerMajorThreshold: 505
LiquidFlowLowerMinorThreshold: 605
LiquidFlowUpperCriticalThreshold: 1995
LiquidFlowUpperMajorThreshold: 1805
LiquidFlowUpperMinorThreshold: 1505
LiquidReturnPressureLowerCriticalThreshold: 0
LiquidReturnPressureLowerMajorThreshold: 50
LiquidReturnPressureLowerMinorThreshold: 100
LiquidReturnPressureUpperCriticalThreshold: 560
LiquidReturnPressureUpperMajorThreshold: 350
LiquidReturnPressureUpperMinorThreshold: 200
LiquidReturnTempLowerCriticalThreshold: 0
LiquidReturnTempLowerMajorThreshold: 0
LiquidReturnTempLowerMinorThreshold: 0
LiquidReturnTempUpperCriticalThreshold: 640
LiquidReturnTempUpperMajorThreshold: 620
LiquidReturnTempUpperMinorThreshold: 600
LiquidSuctionPressureLowerCriticalThreshold: 5
LiquidSuctionPressureLowerMajorThreshold: 15
LiquidSuctionPressureLowerMinorThreshold: 25
LiquidSuctionPressureUpperCriticalThreshold: 410
LiquidSuctionPressureUpperMajorThreshold: 100
LiquidSuctionPressureUpperMinorThreshold: 50
LiquidSupplyPressureLowerCriticalThreshold: 100
LiquidSupplyPressureLowerMajorThreshold: 130
LiquidSupplyPressureLowerMinorThreshold: 170
LiquidSupplyPressureUpperCriticalThreshold: 560
LiquidSupplyPressureUpperMajorThreshold: 400
LiquidSupplyPressureUpperMinorThreshold: 300
LiquidSupplyTempLowerCriticalThreshold: 0
Page | 230

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

LiquidSupplyTempLowerMajorThreshold: 0
LiquidSupplyTempLowerMinorThreshold: 0
LiquidSupplyTempUpperCriticalThreshold: 510
LiquidSupplyTempUpperMajorThreshold: 470
LiquidSupplyTempUpperMinorThreshold: 450
PumpControlMode: 1
PumpPIDDeadBandCM1: 0
PumpPIDDeadBandCM2: 0
PumpPIDDeadBandCM3: 0
PumpPIDKpCM1: 40
PumpPIDKpCM2: 17
PumpPIDKpCM3: 0
PumpPIDTdCM1: 0
PumpPIDTdCM2: 0
PumpPIDTdCM3: 0
PumpPIDTiCM1: 1500
PumpPIDTiCM2: 2000
PumpPIDTiCM3: 0
SetpointTempLiquidSupplyForFanControl: 430
Completion Code: Success
RScmCli#

5.6CDU

Controller

Show cdu status
Show cdu info
Show cdu health
Show cdu fru
Set cdu fwupdate
Set cdu fwrecover
Show cdu erroralert
Set cdu sftp
Set cdu sftp get
Set cdu sftp put
Set cdu sftp delete
Set cdu ntp
Show cdu ntp
Start cdu serial session
Set cdu modbus
Set cdu modbus read
Set cdu modbus write
Set cdu autotune
Show cdu autotune

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Page | 231

SW: RSCM CLI

•
•
•

Classified
as
Microsoft
Highly
Confidenti
al

Set cdu diagdata
Set cdu log fetch
Show cdu logread

5.6.1 Show cdu status
Description:
Shows the CDU controller status.
Syntax:
RScmCli# show cdu status [-h]
Arguments:
-h, --help
show this help message and exit.
Note: This command retrieves the data from the discrete registers, not
the holding– discrete registers are 0-based and holding registers are 1based. registers. Please note the difference between the register number
between these 2 types

Sidekick
X
X
X
X
X
X
X
X

Callan
X
X
X

X
X
X
X
X
X
X
X
X
X
X
X

SW: RSCM CLI

State
Unit ON (0)
General Alarm State (1)
Max Cooling active (2)
Door contact state front (3)
Door contact state rear (4)
Condensate Level Switch (5)
Pump 1 Active (6)
Pump 2 Active (7)
Pump 3 Active (303)
Pump 4 Active (304)
Pump 5 Active (305)
Control IO Board Modbus Lost (938)
Ambient Temperature (557)
Ambient Humidity (558)
HRU Board Error (596)
Control I/O Error (597)
Fan Control Board Error #1-#9 (606-614)
RPU Driver Board 1 Error (598)

Example output:
RScmCli# show cdu status
Unit ON: True
General Alarm State: False
Max Cooling active: False
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 232

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Door contact state front: True
Door contact state rear: True
Condensate Level Switch: False
Pump 1 Active: True
Pump 2 Active: True
Completion Code: Success

5.6.2 Show cdu info
Description:
Shows the CDU controller information (FRU).
Syntax:
RScmCli# show cdu info [-h]
Arguments:
-h, --help
show this help message and exit.
Below are the CDU controller information.
Byte order examples:
• Manufacturer (0-2): “CduCo\0” (6 bytes)
B5 B4 B3 B2 B1 B0
C d
u C
o
\0
• Device Name (3-9): “HX Controller\0” (14 bytes)
B13 B12 B11 B10 B9 B8 B7 B6 B5 B4 B3 B2 B1 B0
H
X
C
o n t
r
o l
l
e r
\0
•

Controller P/N (10-13): Product number of the device in ASCII values, it consists of
eight bytes. Example for Product number “21991848”. (8 bytes)
B7 B6 B5 B4 B3 B2 B1 B0
2 1 9 9
1 8
4
8
Controller S/N (14-19): Serial number of the device in ASCII values, it consists of
twelve bytes. Example for Serial number “1280600001AA”. (12 bytes)
B11 B10 B9 B8 B7 B6 B5 B4 B3 B2 B1 B0
1
2
8 0 6 0 0 0
0 1
A A
•

Firmware P/N (20-23): Firmware part number is in ASCII values, it consists of eight
bytes. Example for Firmware Product numbe "23297604". (8 bytes)
B7 B6 B5 B4 B3 B2 B1 B0
2 3 2 9
7 6
0
4

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 233

SW: RSCM CLI

•

SW: RSCM CLI

•

Firmware Revision (24): Firmware revision consists of two digits in ASCII and looks
like "51". (2 bytes)
B1 B0
5
1
Sidekick
X
X
X
X
X
X

X
X
X
X
X

Callan

X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X
X

SW: RSCM CLI

State
Manufacturer (0-2)
Device Name (3-9)
Controller P/N (10-13)
Controller S/N (14-19)
Firmware P/N (20-23)
Firmware Revision (24)
Main Board Firmware Rev (24)
IO Board Firmware Rev (25)
HRU Control Main Board Mfg. Date/Time (1000-1006)
HRU Control Main Board Manufacture (1007-1013)
HRU Control Main Board Product Name (1014-1020)
HRU Control Main Board Serial Number (1021-1027)
HRU Control Main Board Part Number (1028-1034)
HRU Control Main Board Product Build (1035-1037)
HRU Control I/O Board Mfg. Date/Time (1050-1056)
HRU Control I/O Board Manufacture (1057-1063)
HRU Control I/O Board Product Name (1064-1070)
HRU Control I/O Board Serial Number (1071-1077)
HRU Control I/O Board Part Number (1078-1084)
HRU Control I/O Board Product Build (1085-1087)
HA Board Mfg. Date/Time (1750-1756)
HA Board Manufacture (1757-1763)
HA Board Product Name (1764-1770)
HA Board Serial Number (1771-1777)
HA Board Part Number (1778-1784)
HA Board Product Build (1785-1787)
HA Board Asset Tag (1788-1792)
Controller Firmware Major Version (580)
Controller Firmware Minor Version (581)
Controller Firmware Revision Number (582)
Current Cooling Performance (498)
Total Heat Removed (555-556)
All In One Package Major Version (990)
All In One Package Minor Version (991)
All In One Package Sub Version (992)

Example output:
RScmCli# show cdu info
Manufacturer: CduCo
Device Name: HX Controller
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Classified
as
Microsoft
Highly
Confidenti
al

Page | 234

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Controller P/N: 21991848
Controller S/N: 1280600001AA
Firmware P/N: 23297604
Firmware Rev: 51
Controller Firmware Major Version: 0
Controller Firmware Minor Version: 0
Controller Firmware Revision Number: 6
Current Cooling Performance: 0.3
Total Heat Removed: 0.5
Completion Code: Success

5.6.3 Show cdu health
Description:
Shows the CDU controller health status.
• The overall health status of the CDU controller will be determined using the
following registers from the CDU controller described in the following sections:
o 2.1.4 Show cdu fan health
o 2.2.4 Show cdu pump health
o 2.3.1 Show cdu sensor health
o 2.4.4 Show cdu leak health
•

The overall health status shall display “OK” if no error conditions listed in the
section above are set. Otherwise, display “Fault” along with the error conditions that
are present.
• The Production Health field for Callan is based on any of IS 618-IS 620 being true or
any of IR 950-961 being critical.
Syntax:
RScmCli# show cdu health [-h]
Arguments:
-h, --help
show this help message and exit.
Example output:

SW: RSCM CLI

RScmCli# show cdu health
Health: OK
Production Health: OK
Self Shutdown Status: Default
Completion Code: Success
RScmCli# show cdu health
Health: Fault
Production Health: OK
Self Shutdown Status: Default
Fan:
2: Fault
3: Fault
Sensor:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 235

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Pressure Liquid Suction Sensor Error
Pump control Liquid Flow control limit exceeded
Leak Detection:
Modbus Lost
Completion Code: Success

5.6.4 Show cdu fru
Description:
Shows the CDU controller FRU info.
Syntax:
RScmCli# show cdu fru -h
usage: show cdu fru [-h] -t {1,2,3,4,5,6,7,8,9} [-c {1,2}]
optional arguments:
-h, --help
show this help message and exit
-t {1,2,3,4,5,6,7,8,9}
Callan: 1=HRU Controller, 2=RPU, 3=IO, 4=Fan board, 5=HA board, 6=L11
Rack, 7=L10 HRU, 8=L10 RPU, 9=L10 EE Box
Sidekick: 1=HRU Controller, 2=RPU, 3=Rack, 4=Fan, 5=Pump
-c {1-14}
Component ID (1-2 for Sidekick pump, 1-14 Sidekick
fan, 1-9 for Callan fan board)
RScmCli#

Note: Data not available should be indicated with “N/A”.
Example output:

SW: RSCM CLI

RScmCli# sh cdu fru -t 3
Product Area Format Version: 01
Product Manufacturer: Microsoft
Product Name: M4010
Product Part/Model Number: M1199147-916
Product Version: N/A
Product Serial Number: P914734350061041
Product Asset Tag: N/A
Completion Code: Success

5.6.5 Set cdu fwupdate
Description:
CDU controller firmware update.
Syntax:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 236

SW: RSCM CLI

RScmCli# set cdu fwupdate [-h] -f FILE [-o {0,1}] [-l {0,1}] [-u USER -p
PASSWORD]

Classified
as
Microsoft
Highly
Confidenti
al

Arguments:
-h, --help
show this help message and exit.
-f filename filename to be updated in the /usr/srvroot/shared
-o override
force unconditional image flashing of all firmware
components; default behavior is to only allow upgrades of firmware
components (only for Callan)
-l legacy
use legacy firmware update method using CDU controller
root account (required for older Sidekick hardware versions and nonsecure binary images)
-u user
-p password

user name on the CDU controller (only for legacy mode)
password on the CDU controller (only for legacy mode)

Note:
If using the “legacy” method of firmware update, use the CDU controller root account credentials.
Example output:
RScmCli# set cdu fwupdate -f sidekick-1.0.dat.signed
Connecting to CDU controller and updating firmware. This will take about
2-3 minutes. Do not stop this command
Firmware update successful. Please wait a few minutes for new firmware
to activate.
Completion Code: Success

Connecting to CDU controller and updating firmware. This will take about
2-3 minutes. Do not stop this command
Firmware update successful. Please wait a few minutes for new firmware
to activate.
Completion Code: Success

RScmCli# set cdu fwupdate -f callan-1.0.dat.signed -o 1
Connecting to CDU controller and updating firmware. This will take about
2-3 minutes. Do not stop this command
Firmware update successful. Please wait a few minutes for new firmware
to activate.
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 237

SW: RSCM CLI

RScmCli# set cdu fwupdate -f sidekick-0.0.6.dat -l 1 -u root -p
[password]

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

5.6.6 Set cdu fwrecover
Description:
CDU controller firmware recovery.
To be used when an ERROR/ALERT signal is sent from the CDU controller to the R-SCM. This signal
will be sent using a GPIO pin.
The behavior of this function is identical to “set cdu fwupdate”, except it will not proceed with the
firmware update if the ERROR/ALERT signal is not detected from the CDU controller.
Syntax:
RScmCli# set cdu fwrecover [-h]

Arguments:
-h, --help

show this help message and exit.

Note:
Legacy CDU controller hardware without secure boot enabled will not support this command.
Example output:
RScmCli# set cdu fwrecover

RScmCli# set cdu fwrecover
ERROR/ALERT signal detected. Initiating CDU controller firmware recovery
procedure.
Connecting to CDU controller and updating firmware. This will take about
2-3 minutes. Do not stop this command
Firmware update successful. Please wait a few minutes for new firmware
to activate.

Completion Code: Success
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 238

SW: RSCM CLI

Firmware not updated. ERROR/ALERT signal was not detected.
Completion Code: Success

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

5.6.7 Show cdu erroralert
Description:
Displays the current state of the ERROR/ALERT signal from the CDU controller.
Syntax:
RScmCli# show cdu erroralert [-h]

Arguments:
-h, --help

show this help message and exit.

Note:
Legacy CDU controller hardware without secure boot enabled will not support this command.
Example output:
RScmCli# show cdu erroralert
ERROR/ALERT signal: True
Completion Code: Success

5.6.8 Set cdu sftp

SW: RSCM CLI

Description:
CDU controller SFTP interface.

5.6.8.1 Set cdu sftp get
Syntax:
RScmCli# set cdu sftp get [-h] -f FILE [-t TARGET]

Arguments:
-h, --help
show this help message and exit.
-f filename full path of the original file to be transferred.
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 239

SW: RSCM CLI

-t target
full path of the destination for the original
file to be transferred.

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# set cdu sftp get -f /var/wcshome/test.txt -t
/usr/srvroot/shared/test.txt
Completion Code: Success

5.6.8.2 Set cdu sftp put
Syntax:
RScmCli# set cdu sftp put [-h] -f FILE [-t TARGET] [-k PROTOCOL]

Arguments:
-h, --help
show this help message and exit.
-f filename full path of the original file to be transferred.
-t target
full path of the destination for the original
file to be transferred.
-k protocol protocol to be used for the transfer (sftp or scp). Default
= “sftp”

Example output:
RScmCli# set cdu sftp put -f /usr/srvroot/shared/expression.json -t
/var/wcshome/expression.json -k scp
Completion Code: Success

5.6.8.3 Set cdu sftp delete
Syntax:

Arguments:
-h, --help
-t target

show this help message and exit.
full path of the destination for the file to be deleted.

Example output:
RScmCli# set cdu sftp delete -t /var/wcshome/expression.json
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 240

SW: RSCM CLI

RScmCli# set cdu sftp delete [-h] -t TARGET

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

7.107.8.4 Set cdu ntp
Syntax:
RScmCli# set cdu ntp [-h] -a NTPIP

Arguments:
-h, --help
-a ntpip

show this help message and exit.
Primary IP address of the NTP server.

Example output:
RScmCli# set cdu ntp -a 192.168.1.1
Completion Code: Success

5.6.8.4 Show cdu ntp
Syntax:
RScmCli# show cdu ntp [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:

SW: RSCM CLI

RScmCli# set cdu ntp
NTP: Enabled
NTP DHCP Server: Disabled
NTP Port: 123
NTP primary server: 192.168.1.1
NTP secondary server: 192.168.1.4
Completion Code: Success

5.6.9 Start cdu serial session
Description:
CDU controller serial session interface.
Syntax:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 241

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# start cdu serial session [-h] [-r PORT]

Arguments:
-h, --help
-r port

show this help message and exit.
port to be used for the serial session. (Default = 22)

Example output:
RScmCli# start cdu serial session
SGP Command Line Interpreter
Connection from 192.168.1.1 as admin
RESTRICTED SERVICE AGREEMENT
---------- ------- --------Unauthorized access prohibited; all access and activities not explicitly
authorized by the management are unauthorized. All activities are
monitored
and logged.
There is no privacy on this system.
Unauthorized access and activities or any criminal activity will be
reported to the appropriate authorities.
locale=25, en_US
Current language: English
CLI{admin}> quit

SW: RSCM CLI

Connection to 192.168.1.2 closed.
Result: Serial session started successfully
Completion Code: Success
RScmCli#

5.6.10Set cdu modbus
5.6.10.1 Set cdu modbus read
Description:
Reads Modbus registers.
Note: The Modbus system uses the Modbus over TCP/IP protocol by default. If this protocol is not
available, it will attempt to use the Modbus over RTU protocol.
Syntax:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 242

SW: RSCM CLI

RScmCli# set cdu modbus read [-h] [-t {1,2,3}] [-r START_REFERENCE]
[-c REG_COUNT] [-i {0,1}] [-s {0,1}] [-u
{0,1}]
[-f {int,hex,asc}] [-g SCALE]

Classified
as
Microsoft
Highly
Confidenti
al

Arguments:
-h, --help
show this help message and exit
-t {1,2,3}
1=input status (FC02); 2=holding reg (FC03);
3=input reg (FC04) (default=2)
-r START_REFERENCE First register to read; set -c for number of
contiguous registers to read (0-65535, default=0 - NOTE for holding
registers the first register is register 001)
-c REG_COUNT
Number of registers to read (1-123, default=1)
-i {0,1}
Force TCP mode to be used and disable failover to
RTU mode (force TCP=1, default=0)
-s {0,1}
Force to use only RTU mode; ignored if force_tcp
is set (force RTU=1, default=0)
-u {0,1}
Read only from polling cache (no modbus read)
(read from cache=1, default=1)
-f {int,hex,asc, signed_int}
Value display format (default=int)
-g SCALE
Multiplier scale (only for int data) (default=1.0)

Example output:

SW: RSCM CLI

RScmCli# set cdu modbus read -t 2 -r 0 -c 13 -u 1
[001] 00000 [002] 00000 [003] 00000 [004] 00451
[005] 00061 [006] 00031 [007] 00000 [008] 00025
[009] 00120 [010] 00020 [011] 00000 [012] 00000
[013] 00025
Completion Code: Success
RScmCli# set cdu modbus read -t 2 -r 0 -c 13 -f hex
[001] 0000 [002] 0000 [003] 0000 [004] 01C3
[005] 003D [006] 001F [007] 0000 [008] 0019
[009] 0078 [010] 0014 [011] 0000 [012] 0000
[013] 0019
Completion Code: Success
RScmCli# set cdu modbus read -t 3 -r 0 -c 25 -f asc
[000] nV [001] en [002] t [003] HX
[004] C [005] on [006] tr [007] ol
[008] le [009] r [010] 21 [011] 99
[012] 1- [013] 87 [014] 01 [015] 23
[016] 45 [017] 67 [018] 89 [019] AA
[020] 63 [021] 99 [022] 83 [023] 05
[024] 51
Completion Code: Success
RScmCli# set cdu modbus read -t 2 -r 165 -c 3 -f signed_int
ModbusReadResult: [165] -0070 [166] -0050 [167] -0030
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 243

SW: RSCM CLI

Completion Code: Success
RScmCli# set cdu modbus read -t 2 -r 0 -c 12 -g 0.1
[001]
0.000 [002]
0.000 [003]
45.100
[005]
6.100 [006]
3.100 [007]
2.500
[009]
12.000 [010]
2.000 [011]
0.000

0.000

[004]

0.000

[008]

0.000

[012]

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

5.6.10.2 Set cdu modbus write
Description:
Writes Modbus registers.
Note: The Modbus system uses the Modbus over TCP/IP protocol by default. If this protocol is not
available, it will attempt to use the Modbus over RTU protocol.
Syntax:
RScmCli# set cdu modbus write [-h] -t {6} [-r START_REFERENCE] [-c
REG_COUNT] -d DATA [-i {0,1}] [-s {0,1}]

-h, --help
show this help message and exit
-t {6}
6=write regs (FC16)
-r START_REFERENCE First register to write; set -c for number of
contiguous registers to write (0-65535, default=0 - NOTE for holding
registers the first register is register 001)
-c REG_COUNT
Number of registers to write (1-123, default=1)
-d DATA
Values to write to specified registers. Ex: [324,
123, 657] or path of text file containing one register value for
each line
-i {0,1}
Force TCP mode to be used and disable failover to
RTU mode (force TCP=1, default=0)
-s {0,1}
Force to use only RTU mode; ignored if force_tcp
is set (force RTU=1, default=0)

Example output:
RScmCli# set cdu modbus write -t 6 -r 4 -c 3 -d [452,62,32]
[004] 00452 [005] 00062 [006] 00032
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 244

SW: RSCM CLI

Arguments:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

5.6.10.3 Set cdu autotune
Syntax:
RScmCli# set cdu autotune [-h] [-t TIMEOUT_SECONDS]

Arguments:
-h, --help
-t

show this help message and exit.
timeout in seconds (defaults to 300)

Example output:
RScmCli# set cdu autotune -t 120
Autotune started.
Completion Code: Success

5.6.10.4 Show cdu autotune
Syntax:
RScmCli# show cdu autotune [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:

SW: RSCM CLI

RScmCli# show cdu autotune
Result: [OK | Timed Out | Error]
Completion Code: Success

5.6.10.1 Set cdu diagdata
Description:
Requests HRU to collect HRU diagnostics log data.
This command has 2 parts –
1. Request HRU to prepare and collate diagnostics log data.
2. Download diagnostics log data from the HRU.
Syntax:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 245

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set cdu diagdata [-h] [-i task ID]

Arguments:
-h, --help

show this help message and exit.

Example output:
(First command)

RScmCli# set cdu diagdata
Task ID: 2
Completion Code: Success
(Subsequent commands)
RScmCli# set cdu diagdata -i 3
Status Description: Task ID not found.
Completion Code: Failure
RScmCli# set cdu diagdata -i 2
Task ID: 2
Log Data Collection: In Progress.
Completion Code: Success
RScmCli# set cdu diagdata -i 2
Task ID: 2
Log Data Collection: Complete
Log File Download: In Progress
Filename: obmcdump_2_12345.tar.xz
Completion Code: Success

SW: RSCM CLI

RScmCli# set cdu diagdata -i 2
Task ID: 2
Log Data Collection: Complete
Log File Download: Complete
Filename: obmcdump_2_12345.tar.xz
Completion Code: Success

5.6.11CDU System Log [FUTURE]
Description:
To retrieve the system logs from the HRU controller and place them into the R-SCM SFTP flash directory for
parsing and display.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 246

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

5.6.11.1 Set cdu log fetch
Syntax:
RScmCli# set cdu log fetch [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:
RscmCli# set cdu log fetch
Use “show cdu logread” to read the log when it is finished fetching.
Completion Code: Success

5.6.11.2 Show cdu logread
Syntax:
RScmCli# show cdu logread [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:

SW: RSCM CLI

RScmCli# show cdu logread
Log entries: 0
Completion Code: Success
RScmCli# show cdu logread
Log entries: 82
Entries:
[
Log data…,
Log data…
]
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 247

SW: RSCM CLI

5.7RPU
•
•
•
•

Classified
as
Microsoft
Highly
Confidenti
al

Info

Show cdu rackinfo
Show cdu rpuinfo
Show cdu sensorgatewayinfo
Show cdu valvegatewayinfo

5.7.1 Show cdu rackinfo
Description:
Shows the rack FRU info of the CDU.
Note: Data byte layout is the similar to Section 5.6.25.6.2.
Syntax:
RScmCli# show cdu rackinfo [-h]
Arguments:
-h, --help

show this help message and exit.

State
Rack Manufacturer (600 – 602)
Rack Device Name (603 – 612)
Rack P/N (613 – 620)
Rack S/N (621 – 626)

Sidekick
X
X
X
X

Callan

Example output:

SW: RSCM CLI

RScmCli# show cdu rackinfo
Rack Manufacturer: CduCo
Rack Device Name: Rack CDU Cooling Device
Rack P/N: 2329760400#2001
Rack S/N: 1280600001AA
Completion Code: Success

5.7.2 Show cdu rpuinfo
Description:
Shows the RPU info.
Syntax:
RScmCli# show cdu rpuinfo [-h]
Arguments:
-h, --help

show this help message and exit.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 248

SW: RSCM CLI

State
RPU Manufacturer (627 – 629)
RPU Device Name (630 – 636)
RPU P/N (637 – 641)
RPU S/N (642 – 647)
RPU Level Switch Low – Alarm (299)
RPU Level Switch High (300)
RPU Level Switch Mid (301)
RPU Level Switch Low (302)
RPU Total Power consumption (893)

Sidekick
X
X
X
X

Callan
X
X
X
X
X
X
X
X
X

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# show cdu rpuinfo
RPU Manufacturer: CduCo
RPU Device Name: Sidekick
RPU P/N: 21991848
RPU S/N: 1280600001AA
RPU Level Switch Low - Alarm: False
RPU Level Switch High: True
RPU Level Switch Mid: False
RPU Level Switch Low: False
Completion Code: Success

5.7.3 Show cdu sensorgatewayinfo
Description:
Shows the CDU controller sensor gateway FRU info.

Arguments:
-h, --help

show this help message and exit.

State
Sensor Gateway Manufacturer (648 – 650)
Sensor Gateway Device Name (651 – 657)
Sensor Gateway P/N (658 – 662)
Sensor Gateway S/N (663 – 668)
Sensor Gateway Firmware P/N (669-672)
Sensor Gateway Firmware Rev (673)

Sidekick
X
X
X
X
X
X

Callan

Example output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 249

SW: RSCM CLI

Syntax:
RScmCli# show cdu sensorgatewayinfo [-h]

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# show cdu sensorgatewayinfo
Sensor Gateway Manufacturer: CduCo
Sensor Gateway Device Name: Sensor Gateway
Sensor Gateway P/N: 21991848
Sensor Gateway S/N: 1280600001AA
Sensor Gateway Firmware P/N: 63998288
Sensor Gateway Firmware Rev: 33
Completion Code: Success

5.7.4 Show cdu valvegatewayinfo
Description:
Shows the CDU controller valve gateway FRU info.
Syntax:
RScmCli# show cdu valvegatewayinfo [-h]
Arguments:
-h, --help

show this help message and exit.

State
Valve Gateway Manufacturer (674 – 676)
Valve Gateway Device Name (677– 683)
Valve Gateway P/N (684 – 688)
Valve Gateway S/N (689 – 694)
Valve Gateway Firmware P/N (695-698)
Valve Gateway Firmware Rev (699)

Sidekick
X
X
X
X
X
X

Callan

Example output:

5.8Bootloader

SW: RSCM CLI

RScmCli# show cdu valvegatewayinfo
Valve Gateway Manufacturer: CduCo
Valve Gateway Device Name: Valve Gateway
Valve Gateway P/N: 21991848
Valve Gateway S/N: 1280600001AA
Valve Gateway Firmware P/N: 63998288
Valve Gateway Firmware Rev: 22
Completion Code: Success

Commands

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 250

SW: RSCM CLI

Note: All commands in this section will reboot the HRU controller into bootloader mode in order to
execute the necessary commands in a secure root-of-trust subsystem. During this time, the HRU
controller will not respond to external commands or queries. After the command completes operation,
the HRU controller will reboot back into normal operational mode.

Classified
as
Microsoft
Highly
Confidenti
al

5.8.1 Set cdu recovery
Description:
Boot factory firmware from the recovery partition of the write-protected SPI Flash device.
Syntax:
RScmCli# set cdu recovery
Arguments:
-h, --help

show this help message and exit.

Example output:
RScmCli# set cdu recovery
[I] Booting recovery firmware…
CRC:0x39

Commented [YH24]: what is this?
Commented [RK25R24]: This is output from the bootloader
console

Completion Code: Success

5.8.2 Set cdu revokekey

SW: RSCM CLI

Description:
Revokes a key currently used in the CDU controller secure boot system.
Syntax:
RScmCli# set cdu revokekey -k <key_number>
Arguments:
-h, --help
-k KEY_NUM

show this help message and exit.
key-number (1-5)

Example output:
RScmCli# show cdu keys 1
[I] Key 1 has been revoked
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 251

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

CRC:0x95
Completion Code: Success

5.8.3 Set cdu boot
Description:
Boot CDU firmware from the active partition.
Syntax:
RScmCli# set cdu boot
Arguments:
-h, --help

show this help message and exit.

[I] Secure boot initiated
[I] Loading image from partition 1...
[I] Read 36484521 bytes
[I] Calculating image hash...
[I] Signature is VALID
[I] Running HAB authentication...
[I] HAB authentication is successful
Firmware version: 0.0.3
Firmware image hash:
6bf69dcffe7347a5dc43f1faf9a55758b60680f387e84ccc72d7716959c44f9378a31
e57bdc69ecf
6ac7ed69a1ff4fc6
EEPROM hash:
3fde971e213e12cb05fee97196be9167b89cb18d2357fd42c17b5c2f7f0dcdcf260
2092f726f99359e4b19a294489294OK
CRC:0x19
Completion Code: Success

5.8.4 Set cdu verify
Description:
Verify the current firmware (check signature, check version, compare attestation value with the
EEPROM copy).

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 252

SW: RSCM CLI

Example output:
RScmCli# set cdu boot

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# set cdu verify
Arguments:
-h, --help

show this help message and exit.

Example output:
RScmCli# set cdu verify
[I] Loading image from partition 1...
[I] Read 36484521 bytes
[I] Calculating image hash...
[I] Signature is VALID
[I] Running HAB authentication...
[I] HAB authentication is successful
Firmware image is VALID
Firmware version is VALID
Image hash is VALID
OK
CRC:0x39
Completion Code: Success

5.8.5 Show cdu log
Description:
Print last N entries from the security log (stored in the EEPROM).
Syntax:
RScmCli# show cdu log -n <number of entries>

-h, --help

SW: RSCM CLI

Arguments:
show this help message and exit.

Example output:
RScmCli# show cdu log -n 5
(6) <2023-02-10
(7) <2023-02-10
(8) <2023-02-10
(9) <2023-02-10
(10)<2023-02-10
OK

06:12:41>
06:13:20>
06:15:08>
06:15:11>
06:15:20>

Security alert: FIRMWARE_UPGRADE
Security alert: FIRMWARE_UPGRADE
Security alert: FIRMWARE_UPGRADE
Firmware activation requested
Successful firmware activation (0.0.3)

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 253

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

CRC:0xe5
Completion Code: Success

5.8.6 Show cdu keys
Description:
Displays the keys currently used in the CDU controller secure boot system.
Syntax:
RScmCli# show cdu keys
Arguments:
-h, --help

show this help message and exit.

Example output:
RScmCli# show cdu keys
Key 1: VALID
Key 2: VALID
Key 3: VALID
Key 4: VALID
Key 5: VALID
Key table hash:
5860881977723a91ecb20ba87af69cd2992efc3a450f7b8fde5e11d6fcd27de9
ff35563d8c17b84ec2e3f16a86ea2a5b
SRK: 2995e19324c182e1bf25cb24d7c09509ec002f8d41d98b7
e81a160e1e87c9c47
OK
RC:0xd8
Completion Code: Success

SW: RSCM CLI

5.8.7 Show cdu blstatus
Description:
Print boot loader status information.
Syntax:
RScmCli# show cdu blstatus
Arguments:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 254

SW: RSCM CLI

-h, --help

Classified
as
Microsoft
Highly
Confidenti
al

show this help message and exit.

Example output:
RScmCli# show cdu blstatus
Security code version: 0.4
Last reset cause: POR
Security config: OPEN
Manufacturing mode: ENABLED
Active firmware partition: 1
Active image header: SECURE
Active image version: 0.0.3
Active image status: NOT VERIFIED
DEK blob: INSTALLED
Firmware key fuses: VALID
HAB SRK fuses: NOT PROGRAMMED
EEPROM log: VALID (51 entries)
OK
CRC:0x19
Completion Code: Success

5.8.8 Show cdu attest
Description:
Calculate and print the current firmware attestation value (for measured boot).
Syntax:
RScmCli# show cdu attest
Arguments:
show this help message and exit.

SW: RSCM CLI

-h, --help

Example output:
RScmCli# show cdu attest
[I] Loading image from partition 1...
[I] Read 36484521 bytes
[I] Calculating image hash...
Firmware image hash:
abef844adebff35ac3bd40472f9d0c1e7f5e84f51417708ec0210aea0dd1f4efab122
7a25e9020ed
17d4f43a99fcf440
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 255

SW: RSCM CLI

EEPROM hash:
790b12c2e3ad182d29b82be10417ffcf8ebe9f062d7cb0e8d48c745dfffe4c525be
d3b9d30fafd76c2e1ffcfba20f892
OK
CRC:0xc3

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

5.8.9 Set sblcmd enter
Description: Toggles the recovery GPIO and sends a status command to confirm the CDU is in
bootloader mode.
Syntax:
RScmCli# set sblcmd enter
Arguments: none
Example output:
RScmCli# show sblcmd enter
Completion Code: Success

5.8.10 Set sblcmd exit

Example output:
RScmCli# set sblcmd exit
[I] Secure boot initiated
[I] Loading image from partition 0...
[I] Read 38823337 bytes
[I] Calculating image hash...
[I] WARNING: firmware key fuses are not programmed, skipping
keyhash check
[I] Signature is VALID
[I] Running HAB authentication...
[I] HAB authentication is successful
Firmware version: 0.0.6
Firmware image hash:
f08a466ca3fd54517e8e24aff712630309fd1bbcbc69798f72f6f9637a816bea2d
0bd0ea6e5e58
7ad27ec35bdc137ca0
EEPROM hash:
be975c05a177eef6debde16eb91b08c5319d72d66530af5f58331b278794658367
a1000e36b6c2
e3cfdaea4c302731d4
[I] Scheduling boot...
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 256

SW: RSCM CLI

Description: Sends the boot command to the CDU, rebooting and thus exiting bootloader mode.
This command
should only be used on Sidekick configurations, not Callan configurations.
Syntax:
RScmCli# set sblcmd exit
Arguments: none

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

OK
RC:0x78
Completion Code: Success

5.8.11 Set sblcmd send
Description: Sends an input command to the bootloader prompt
Syntax:
RScmCli# set sblcmd send OPENCOMMAND
Arguments:
OPENCOMMAND The command to be sent to the bootloader
The following commands are currently valid
attest
status
activate
verify [-b]
boot
recovery
revoke [key]
keys
log [number of log entries]
version
alert
Example output:
RScmCli# set sblcmd send version
Active firmware version: 0.0.6
OK
RC:0xa0

6 Cerberus Commands
Show manager cerberus
Show manager cerberus version
Show manager cerberus log
Show manager cerberus pfm id
Show manager cerberus pfm version
Set manager cerberus
Set manager cerberus clear
Set manager cerberus update
Set manager cerberus pfm update
Set manager cerberus cmd

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•

Page | 257

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

6.1show manager cerberus
Description:
This command displays GET commands supported for Cerberus
Syntax:
RScmCli # show/sh manager cerberus -h
usage: show manager cerberus [-h]
{version,deviceinfo,certstate,pcd,utility,log,pfm} ...

positional arguments:
{version,deviceinfo,certstate,pcd,utility,log,pfm}
cerberus operations
This command shows cerberus firmware version

deviceinfo

This command shows cerberus device information

certstate

This command shows cerberus certificate state

pcd

This command shows cerberus pcd information

utility

This command shows cerberus utility version

log

This command shows cerberus log

pfm

This command shows cerberus pfm information

SW: RSCM CLI

version

6.2show manager cerberus version
Description:
This command displays cerberus firmware version
Syntax:
RScmCli# show manager cerberus version -h
usage: show manager cerberus version [-h] [-t {0,1}]
optional arguments:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 258

SW: RSCM CLI

-h, --help

Classified
as
Microsoft
Highly
Confidenti
al

show this help message and exit

required arguments:
-t {0,1}

firmware type (0:Cerberus, 1:riot)

Sample usage:
To read Cerberus firmware version
RScmCli# sh manager cerberus

version –t 0

Sample output:
RScmCli# show manager cerberus version -t 0
Cerberus Version: 1.5.6.2
Completion Code: Success

6.3show manager cerberus log
Description:
This command will display cerberus Debug logs or Attestation logs
Syntax:
RScmCli# show manager cerberus log -h
usage: show manager cerberus log [-h] {debug,tcg} ...
positional arguments:
{debug,tcg}
debug
This command show cerberus debug log
tcg
This command show cerberus tcg log
optional arguments:
-h, --help
show this help message and exit

SW: RSCM CLI

Sample usage:
Retrieve cerberus debug logs
RScmCli# show manager cerberus log debug
Sample output:
Retrieving log bytes
...........

Entry
| Elapsed Time
| Severity | Component | Message
--------------------------------------------------------------------------------------------------------------Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 259

SW: RSCM CLI

574
|
25:10:22.754 | Info
|
has been cleared
575
|
0:00:00.013 | Info
|
from Main, reset: Power-on Reset
576
|
0:00:00.013 | Info
|
version: 1.5.7.0
577
|
0:00:00.013 | Info
|
flash device: vendor=0xef, device=0x4015,
Completion Code: Success

Cmd Intf

| The debug log

Init

| Device booted

Init

| Firmware

Classified
as
Microsoft
Highly
Confidenti
al

Init
| Cerberus main
capacity=0x200000

6.4show manager cerberus pfm id
Description:
This command displays cerberus pfm id
Syntax:
RScmCli# show manager cerberus pfm id -h
usage: show manager cerberus pfm id [-h] [-p {0,1}] [-r {0,1}]
optional arguments:
-h, --help show this help message and exit
required arguments:
-p {0,1}
port id Platform
-r {0,1}
Region id Platform [0, 1]
Sample usage:
Display pfm id for port 1 and region 0
RScmCli# show manager cerberus pfm id -p 1 -r 0
Sample output:
No valid PFM found for port 1, region 0
Completion Code: Success

SW: RSCM CLI

6.5show manager cerberus pfm version
Description:
This command displays cerberus pfm version
Syntax:
RScmCli# show manager cerberus pfm version -h
usage: show manager cerberus pfm version [-h] [-p {0,1}] [-r {0,1}]
optional arguments:
-h, --help show this help message and exit
required arguments:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 260

SW: RSCM CLI

-p {0,1}

port id Platform

-r {0,1}

Region id Platform [0, 1]

Classified
as
Microsoft
Highly
Confidenti
al

Sample usage:
RScmCli# show manager cerberus pfm version -p 1 -r 0
Sample output:
No valid PFM found for port 1, region 0
Completion Code: Success

6.6 show manager cerberus deviceinfo
Description:
This command displays Cerberus UUID
Syntax:
RScmCli# show manager cerberus deviceinfo -h
usage: show manager cerberus deviceinfo [-h]
optional arguments:
-h, --help

show this help message and exit

Sample usage:
RScmCli# show manager cerberus deviceinfo
Sample output:
UUID: 383985b651678956be00193bcd9346d6
Completion Code: Success

SW: RSCM CLI

6.7 show manager cerberus certstate
Description:
This command displays cerberus certificate state
Syntax:
RScmCli# show manager cerberus certstate -h
usage: show manager cerberus certstate [-h]
optional arguments:
-h, --help

show this help message and exit

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 261

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample usage:
RScmCli# show manager cerberus certstate
Sample output:
Certificate State: Device contains a signed certificate chain.
Completion Code: Success

6.8 show manager cerberus pcd
Description:
This command displays PCD commands supported by cerberus
Syntax:
RScmCli# show manager cerberus pcd -h
usage: show manager cerberus pcd [-h] {platformid,versionid} ...
positional arguments:
{platformid,versionid}
platformid

This command shows cerberus pcd platform ID

versionid

This command shows cerberus pcd version ID

optional arguments:
-h, --help

show this help message and exit

Sample usage:
RScmCli# show manager cerberus pcd -h

positional arguments:
{platformid,versionid}
platformid

This command shows cerberus pcd platform ID

versionid

This command shows cerberus pcd version ID

optional arguments:
-h, --help

show this help message and exit

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 262

SW: RSCM CLI

Sample output:
usage: show manager cerberus pcd [-h] {platformid,versionid} ...

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

6.9 show manager cerberus pcd platformid
Description:
This command displays Cerberus PCD platform ID
Syntax:
RScmCli# show manager cerberus pcd platformid -h
usage: show manager cerberus pcd platformid [-h]
optional arguments:
-h, --help

show this help message and exit

Sample usage:
RScmCli# show manager cerberus pcd platformid
Sample output:
Cerberus PCD platform ID: M4010
Completion Code: Success

6.10 show manager cerberus pcd versionid
Description:
This command displays Cerberus PCD version ID
Syntax:
RScmCli# show manager cerberus pcd versionid -h
usage: show manager cerberus pcd versionid [-h]
optional arguments:
-h, --help

show this help message and exit
SW: RSCM CLI

Sample usage:
RScmCli# show manager cerberus pcd versionid
Sample output:
Cerberus PCD ID: 0x3
Completion Code: Success

6.11 Show manger cerberus utility

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 263

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# sh manager cerberus utility
Cerberus_Utility_Version: 1.5.13.9
Completion Code: Success

6.12 set manager cerberus
Description:
This command displays SET commands supported for cerberus
Syntax:
RScmCli# set manager cerberus -h
usage: set manager cerberus [-h] {update,clear,pfm,cmd} ...
positional arguments:
{update,clear,pfm,cmd}
update
This
clear
This
pfm
This
cmd
This

command
command
command
command

update platform cerberus firmware
does log clear for cerberus
set cerberus pfm
runs raw cerberus command

optional arguments:
-h, --help

show this help message and exit

Sample usage:
RScmCli# set manager cerberus -h

positional arguments:
{update,clear,pfm,cmd}
update
This
clear
This
pfm
This
cmd
This
pcd
This
optional arguments:
-h, --help

command
command
command
command
command

update platform cerberus firmware
does log clear for cerberus
set cerberus pfm
runs raw cerberus command
updates cerberus pcd

show this help message and exit

6.13
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 264

SW: RSCM CLI

Sample output:
RScmCli# set manager cerberus -h
usage: set manager cerberus [-h] {update,clear,pfm,cmd} ...

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

6.14 set manager cerberus clear
Description:
This command displays clear cerberus debug or tcg logs
Syntax:
RScmCli# set manager cerberus clear -h
usage: set manager cerberus clear [-h] {debug,tcg} ...
positional arguments:
{debug,tcg}
debug
This command clear debug log
tcg
This command clear tcg log
optional arguments:
-h, --help
show this help message and exit
Sample Usage:
Clear cerberus debug logs
RScmCli# set manager cerberus clear debug
Sample output:
RScmCli# set manager cerberus clear debug

SW: RSCM CLI

Completion Code: Success

6.15 set manager cerberus update
Description:
This command updates cerberus firmware version
Syntax:
RScmCli# set manager cerberus update -h
usage: set manager cerberus update [-h] -f CERBERUS_FW_FILE

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 265

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help

show this help message and exit

required arguments:
-f CERBERUS_FW_FILE

firmware file

Sample usage:
To update cerberus firmware version
RScmCli# set manager cerberus update -f cerberus_v*.bin
Sample output:
Completion Code: Success

6.16 set manager cerberus pfm update
Description:
This command will update cerberus pfm
Syntax:
RScmCli# set manager cerberus pfm update -h
usage: set manager cerberus pfm update [-h] -p PORTID -f PFMFILE [-a
{0,1}]
optional arguments:
-h, --help show this help message and exit
required arguments:
-p PORTID
port id
-f PFMFILE pfm file
-a {0,1}
0:activate after reboot, 1:activate immediately

SW: RSCM CLI

Sample usage:
Update cerberus pfm file on port 1 and activate pfm after reboot
RScmCli# set manager cerberus pfm update -f <> -p 1 -a 0
Sample output:
Completion Code: Success

6.17 set manager cerberus cmd
Description:
This command provides support to run any raw subcommand that cerberus_utility supports
Syntax:
RScmCli# set manager cerberus cmd -h
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 266

SW: RSCM CLI

usage: set manager cerberus cmd [-h] -c [CERBERUSCMD [CERBERUSCMD ...]]

optional arguments:

Classified
as
Microsoft
Highly
Confidenti
al

-h, --help
show this help message and exit
-c [CERBERUSCMD [CERBERUSCMD ...]]
Cerberus command to run

Sample usage:
To read portstate is in active mode or bypass one can send “portstate 1” command to
cerberus_utility. Similarly one can provide the same subcommand to this CLI as follows:

RScmCli# set manager cerberus cmd -c portstate 1

Sample output:
Port 1 is in bypass mode

Completion Code: Success

6.18 set manager cerberus pcd update
Description:
This command will update cerberus pcd

optional arguments:
-h, --help

show this help message and exit

required arguments:
-f CERBERUS_PCD_FILE

PCD file

SW: RSCM CLI

Syntax:
f
RScmCli# set manager cerberus pcd update -h
usage: set manager cerberus pcd update [-h] -f CERBERUS_PCD_FILE

Sample usage:
RScmCli# set manager cerberus pcd update -f <>
Sample output:
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 267

SW: RSCM CLI

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 268

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

7 CPLD Commands
•
•
•
•
•
•

Show manager cpld
show manager cpld version
show manager cpld usercode
show manager cpld readauth
set manager cpld
set manager cpld update

7.1Show manager cpld
Description:
This command displays GET commands supported for CPLD
Syntax:
RScmCli# show manager cpld -h
usage: show manager cpld [-h] {version,usercode,readauth} ...
positional arguments:
{version,usercode,readauth}
cpld operations
version
This command shows RSCM CPLD version
usercode
This command shows RSCM CPLD usercode value
readauth
This command prints the RSCM CPLD authentication
mode
optional arguments:
-h, --help

show this help message and exit
SW: RSCM CLI

Sample Usage:
RScmCli# show manager cpld -h

Sample Output:
RScmCli# show manager cpld -h
usage: show manager cpld [-h] {version,usercode,readauth} ...
positional arguments:
{version,usercode,readauth}
cpld operations
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 269

SW: RSCM CLI

version
usercode
readauth

This command shows RSCM CPLD version
This command shows RSCM CPLD usercode value
This command prints the RSCM CPLD authentication

mode

Classified
as
Microsoft
Highly
Confidenti
al

optional arguments:
-h, --help

show this help message and exit

7.2show manager cpld version
Description:
This command retrieves CPLD GW version
Syntax:
RScmCli# show manager cpld version -h
usage: show manager cpld version [-h]
optional arguments:
-h, --help show this help message and exit

Sample Usage:
RScmCli# show manager cpld version

Sample output:
RScmCli# show manager cpld version
Version: V2.8

Completion Code: Success

7.3show manager cpld usercode

SW: RSCM CLI

Description:
This command retrieves CPLD user code
Syntax:
RScmCli# show manager cpld usercode -h
usage: show manager cpld usercode [-h]
optional arguments:
-h, --help show this help message and exit

Sample Usage:
RScmCli# show manager cpld usercode
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 270

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Sample output:
RScmCli# show manager cpld usercode
Usercode: 0x40104928
Completion Code: Success

7.4show manager cpld readauth
Description:
This command retrieves CPLD authentication mode.
Syntax:
RScmCli# show manager cpld readauth -h
usage: show manager cpld readauth [-h]
optional arguments:
-h, --help show this help message and exit

Sample Usage:
RScmCli# show manager cpld readauth

Sample output:
RScmCli# show manager cpld readauth
Authentication status: Authentication disabled
Completion Code: Success

7.5set manager cpld
Description:
This command displays SET commands supported for CPLD

SW: RSCM CLI

Syntax:
RScmCli# set manager cpld -h
usage: set manager cpld [-h] {update} ...
positional arguments:
{update}
CPLD action command
update
The firmware update for the server CPLD firmware.
optional arguments:
-h, --help show this help message and exit

Sample Usage:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 271

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set manager cpld -h

Sample Output:
RScmCli# set manager cpld -h
usage: set manager cpld [-h] {update} ...

positional arguments:
{update}
update

CPLD action command
The firmware update for the server CPLD firmware.

optional arguments:
-h, --help

show this help message and exit

7.6set manager cpld update
Description:
This command updates CPLD firmware on RackSCM
Syntax:
RScmCli# set manager cpld update -h
usage: set manager cpld update [-h] -f FILE

optional arguments:
-h, --help

show this help message and exit

-f FILE
location

CPLD firmware jed file name and it should be in the TFTP

Sample Usage:
Update CPLD with firmware jed file “RACK_SCM_impl1_a_usercode_added.jed”
RScmCli#

set manager cpld update -f RACK_SCM_impl1_a_usercode_added.jed

Sample output:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 272

SW: RSCM CLI

required arguments:

SW: RSCM CLI

RScmCli# set manager cpld update -f RACK_SCM_impl1_a_usercode_added.jed
=== Jed File Information ===
Pages=16124
Fuse Count=2063872
User Code=40104510
Feature Row=0
Fea Bits=00000000
File valid=1
Fuse Count Valid=1
Usercode Valid=1
Feature Row Valid=0
Feature Bits Valid=0
=== Jed File Information End ===
CPLD Device: LATTICE MachXO3D 9400HC, IDCODE:0x212e3043
Register:3C Status=00080f49
Erasing CFG0 and UFM0
…
Verifying UFM0, Maximum Row:3582
CPLD Program Successfully
Register:3D Status1=00602001
Register:3C Status=00080e49
Register:3C Status=00080f49
Completion Code: Success

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

Note: After CPLD update, RSCM AC power cycle is needed, for new CPLD firmware to take effect

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 273

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

8 Inter-Rack Commands
•
•
•
•
•
•

Set interrack wirecheck
Show interrack wirecheck
Set interrack zoneshutdown
Show interrack zoneshutdown
Set interrack zoneready
Show interrack zoneready

8.1Set interrack wirecheck
Description:
This command sends a wirecheck signal to the next RSCM in the inter-rack connected sequence of
RSCMs.
This command is enabled by default. It can be disabled by modifying the RscmInterrackConfig user
configuration variable which uses the following mapping:

Bit 0

Wirecheck enable

Bit 1

Local shutdown enable

Bit 2

Power on sequencing enable

Bit 3

Local shutdown – server shutdown enabled

Bit 4

Local shutdown – liquid cooling shutdown enabled

Bit 5

Power-on sequencing – server power-on enabled

Bit 6

Power-on sequencing – liquid cooling power-on enabled

Note: This command is used on a RPU/Sidekick rack that is paired with a Powershelf rack that is
connected in a daisy-chain criss-crossed fashion (as described in the “Mt. Adams Server Rack
Communication document M1284413).
Syntax:
RScmCli# set interrack wirecheck -v 1

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 274

SW: RSCM CLI

Bit Number Inter-Rack Feature Configuration Option

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Arguments:
-h, --help
-v {0,1}

show this help message and exit.
1=set wirecheck line high; 0=set wirecheck line low

Example output:
RScmCli# set interrack wirecheck -v 1
Completion Code: Success

8.2Show interrack wirecheck
Description:
This command displays whether the wirecheck signal has been received from the previous RSCM in
the inter-rack connected sequence of RSCMs.
Note: This command is relevant on a RPU/Sidekick rack that is paired with a Powershelf rack that is
connected in a daisy-chain criss-crossed fashion (as described in the “Mt. Adams Server Rack
Communication document M1284413).
Syntax:
RScmCli# show interrack wirecheck

Arguments:
-h, --help

show this help message and exit.

Example output:

SW: RSCM CLI

RScmCli# show interrack wirecheck
WirecheckValid: False
Completion Code: Success

8.3Set interrack zoneshutdown
Description:
This command sends a zone shutdown signal to the next RSCM in the inter-rack connected sequence
of RSCMs.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 275

SW: RSCM CLI

This command is enabled by default. It can be disabled by modifying the RscmInterrackConfig user
configuration variable which uses the following mapping:

Classified
as
Microsoft
Highly
Confidenti
al

Bit Number Inter-Rack Feature Configuration Option
Bit 0

Wirecheck enable

Bit 1

Local shutdown enable

Bit 2

Power on sequencing enable

Bit 3

Local shutdown – server shutdown enabled

Bit 4

Local shutdown – liquid cooling shutdown enabled

Bit 5

Power-on sequencing – server power-on enabled

Bit 6

Power-on sequencing – liquid cooling power-on enabled

In addition, as the local shutdown feature is triggered by any one of the following conditions and
configured by the RscmInterrackShutdownConditionConfig user configuration variable:
Bit Number

Local Shutdown Condition

Bit 0

Critical leak alarm

Bit 1

Liquid supply/return temperature fault

Bit 2

Pump 1 error (comms, low speed, temp sensor error)

Bit 3

Pump 2 error (comms, low speed, temp sensor error)

Bit 4

Suction pressure low / liquid level low fault

Note: This command is used on a RPU/Sidekick rack that is paired with a Powershelf rack that is
connected in a daisy-chain criss-crossed fashion (as described in the “Mt. Adams Server Rack
Communication document M1284413), and is typically executed from the RPU RSCM. Executing this
command from a RSCM that is not configured as the RPU RSCM has undefined results, and is typically
only used for internal troubleshooting purposes. In normal operation, this command is not used and
its use should be understood judiciously because it can potentially have severe operational impact on
the system because it will turn off liquid cooling to servers.
Syntax:
RScmCli# set interrack zoneshutdown

Arguments:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 276

SW: RSCM CLI

IMPORTANT: These two user configuration variables are intended for internal troubleshooting and
debugging use only. Changes to these variables are persistent and will unknowingly disable certain
features of inter-rack or local shutdown features without notification.

SW: RSCM CLI

-h, --help

Classified
as
Microsoft
Highly
Confidenti
al

show this help message and exit.

Example output:
RScmCli# set interrack zoneshutdown
Completion Code: Success

8.4Show interrack zoneshutdown
Description:
This command displays the GPIO signal on the zone shutdown line. It should generally be expected to
be false.
Note: This command is relevant on a RPU/Sidekick rack that is paired with a Powershelf rack that is
connected in a daisy-chain criss-crossed fashion (as described in the “Mt. Adams Server Rack
Communication document M1284413). It is also relevant on a Smart IT rack.

Syntax:
RScmCli# show interrack zoneshutdown

Arguments:
-h, --help

show this help message and exit.

Example output:

SW: RSCM CLI

RScmCli# show interrack zoneshutdown
ZoneShutdownEnabled: true
Completion Code: Success

8.5Set interrack zoneready
Description:
This command sends a zone ready signal to the next RSCM in the inter-rack connected sequence of
RSCMs.
This command is enabled by default. It can be disabled by modifying the RscmInterrackConfig user
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 277

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

configuration variable which uses the following mapping:
Bit Number Inter-Rack Feature Configuration Option
Bit 0

Wirecheck enable

Bit 1

Local shutdown enable

Bit 2

Power on sequencing enable

Bit 3

Local shutdown – server shutdown enabled

Bit 4

Local shutdown – liquid cooling shutdown enabled

Bit 5

Power-on sequencing – server power-on enabled

Bit 6

Power-on sequencing – liquid cooling power-on enabled

The inter-rack power-on sequencing / zone ready command will verify the following conditions in the
HRU controller prior to sending out the signal to the other R-SCMs:
Unit On = true
General Alarm State = false
Max Cooling Active = false
Pump #1 Active = true or Pump #2 Active = true
The LiquidCoolingValidationConfig user configuration variable will enable/disable each validation
condition.
Bit 0

Unit On/Off condition enable (default = enabled)

Bit 1

General Alarm State condition enable (default = disabled)

Bit 2

Max Cooling Active condition enable (default = disabled)

Bit 3

Pump 1 or Pump 2 Active condition enable (default = enabled)

Note: This command is used on a RPU/Sidekick rack that is paired with a Powershelf rack that is
connected in a daisy-chain criss-crossed fashion (as described in the “Mt. Adams Server Rack
Communication document M1284413), and is typically executed from the RPU RSCM. Executing this
command from a RSCM that is not configured as the RPU RSCM has undefined results.
Syntax:
RScmCli# set interrack zoneready

Arguments:
-h, --help

show this help message and exit.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 278

SW: RSCM CLI

Bit Number Liquid Cooling Validation Configuration Option

SW: RSCM CLI

-f {0,1}
1=bypass liquid cooling validation; 0=conduct liquid
cooling validation
-t DELAY_SECS seconds delay before powering on servers

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# set interrack zoneready
LiquidCoolingValidationPassed: False
Completion Code: Success

8.6Show interrack zoneready
Description:
This command displays the GPIO signal on the zone ready line. It should generally be expected to be
false.
Note: This command is relevant on a RPU/Sidekick rack that is paired with a Powershelf rack that is
connected in a daisy-chain criss-crossed fashion (as described in the “Mt. Adams Server Rack
Communication document M1284413). It is also relevant on a Smart IT rack.
Syntax:
RScmCli# show interrack zoneready

Arguments:
-h, --help

show this help message and exit.

Example output:

SW: RSCM CLI

RScmCli# show interrack zoneready
ZoneReadyValid: true
Completion Code: Success

8.7set interrack zoneloopreset
Description:
This command sets a flag on the Rack-SCM to stop any forwarding of zone shutdown or zone ready
signals. This is intended to stop any infinite loops. This flag should be reset when the loop is
contained.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 279

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# set interrack zoneloopreset -v 1

Arguments:
-h, --help
-v {0,1}
forwarding

show this help message and exit.
1 (default)=set flag to stop loop; 0=reset flag to allow

Example Output:
RScmCli# set interrack zoneloopreset
Blocking all forwarding of GPIO signals. Reverse this stop flag when the
GPIO loop is contained.
Completion Code: Success

9 Smart IT Rack Commands
show smrack health
show smrack status
set smrack open
set smrack close
show smrack config flowrate
set smrack config flowrate
show smrack config pressure
set smrack config pressure
set smrack config reset
set smrack config custom
set smrack config addrange
set smrack config removerange
Set valve modbus read
Set valve modbus write
show valve fwversion
show valve info
set smrack fwupdate

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•
•

Page | 280

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

9.1show smrack health
Description:
This command provides the Smart IT Rack health status.
Syntax:
RScmCli# show smrack health [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:
RScmCli# show smrack health
Health: Fault
Energy Valve: [OK | NotPresent | Fault]
Leak Detected: [True | False]
Leak Rope: [OK | Fault]
Liquid Pressure: [OK | Unknown | Fault]
Inlet Temperature: [OK | Unknown | Fault]
Flow Rate: [OK | Unknown | Fault]
Pressure Sensor Active: [True | False]
Inlet Temperature Sensor Active: [True | False]
Flow Rate Sensor Active: [True | False]
Error State: 128
Completion Code: Success

SW: RSCM CLI

Energy Valve:
[“OK” if EnergyValveActive and EnergyValvePresent are true; “Fault” otherwise. “NotPresent”
If “EnergyValvePresent” is false]
“EnergyValveActive” and “EnergyValvePresent” are in “show smrack status”
LeakDetected: [true/false only if LeakRope is also “OK”; else it is false]

If there are insufficient samples, the outputs for “LiquidPressure”, “FlowRate”, “InletTemperature” should be “Unknown”.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 281

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

9.2show smrack status
Description:
This command provides the Smart IT Rack status.
Syntax:
RScmCli# show smrack status [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:
RScmCli# show smrack status
Energy Valve Active: True
Energy Valve Present: True
Energy Valve Open: True
Leak Detected: False
Leak Rope Break Detected: False
Flow Rate: 0.0
Flow Rate Severity: Critical
Liquid Pressure: 2.92
Liquid Pressure Severity: Normal
Inlet Temperature: 18.87
Inlet Temperature Severity: Critical
Valve Relative Position: 100.0
Glycol Concentration: 0.0
Completion Code: Success

EnergyValvePresent is set to “True” if EnergyValveActive has been true at any time.

If there are insufficient samples, the outputs for “FlowRateSeverity”, “LiquidPressureSeverity”, “InletTemperatureSeverity”
should be “Unknown”. Otherwise, they will be [“Normal”, “Minor”, “Major”, or “Critical”]

9.3set smrack open
Description:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 282

SW: RSCM CLI

LeakDetected: [“True”/”False” only if LeakRope is also “OK”; else it is “False”]

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

This command opens the selected valve.
Note: This command will override any ongoing valve closing command.

Syntax:
RScmCli# set smrack open [-h] [-v {1,2}]

Arguments:
-h, --help
-v {1, 2}
supported)

show this help message and exit.
1 = energy valve; 2 = isolation valve (not currently

Example output:
RScmCli# set smrack open –v 1
Completion Code: Success

9.4set smrack close
Description:
This command closes the selected valve.
Note: This command will override any ongoing valve opening command.

Syntax:
SW: RSCM CLI

RScmCli# set smrack close [-h] [-v {1,2}]

Arguments:
-h, --help
-v {1, 2}
supported)

show this help message and exit.
1 = energy valve; 2 = isolation valve (not currently

Example output:
RScmCli# set smrack close -v 1
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 283

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

9.5show smrack config flowrate
Description:
This command displays the flow rate threshold and configuration settings for Smart IT Rack.
Syntax:
RScmCli# show smrack config flowrate [-h]

Arguments:
-h, --help

show this help message and exit.

Example output:

SW: RSCM CLI

RScmCli# show smrack config flowrate
Version: 01.01
Ramp-Up Time (seconds): 182.0
Inlet Liquid Temp Critical: 45
Bypass Mode Enable: 0
Drip Pan Local Action Enable: 1
Inlet Liquid Temp Low (Range 1): 18
Inlet Liquid Temp High (Range 1): 28
Inlet Liquid Flow Rate Normal (Range 1): 29
Inlet Liquid Flow Rate Minor (Range 1): 26
Inlet Liquid Flow Rate Major (Range 1): 24
Inlet Liquid Flow Rate Critical (Range 1): 23
Per Node LPM (Range 1): 3.0
Per Switch LPM (Range 1): 3.0
Inlet Liquid Temp Low (Range 2): 30
Inlet Liquid Temp High (Range 2): 43
Inlet Liquid Flow Rate Normal (Range 2): 82
Inlet Liquid Flow Rate Minor (Range 2): 74
Inlet Liquid Flow Rate Major (Range 2): 70
Inlet Liquid Flow Rate Critical (Range 2): 65
Per Node LPM (Range 2): 7.0
Per Switch LPM (Range 2): 2.0
Completion Code: Success

(NOTE: Output is expandable in terms of number of ranges. Use the -h command to find the
appropriate key.)

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 284

SW: RSCM CLI

9.6set smrack config flowrate
Description:
This command updates the active flow rate threshold and configuration settings for Smart IT Rack.

Classified
as
Microsoft
Highly
Confidenti
al

KEY

Flow rate Configuration Settings

1

Version

2

Ramp-Up Time (seconds)

3

Inlet Liquid Temp Critical

4

Bypass Mode Enable

5

Drip Pan Local Action Enable

6

Inlet Liquid Temp Low (Range 1)

7

Inlet Liquid Temp High (Range 1)

8
9
10
11
12
13
14
15
16
17
18
19
20
21

Inlet Liquid Flow Rate Normal (Range 1)
Inlet Liquid Flow Rate Minor (Range 1)
Inlet Liquid Flow Rate Major (Range 1)
Inlet Liquid Flow Rate Critical (Range 1)
Per Node LPM (Range 1)
Per Switch LPM (Range 1)
Inlet Liquid Temp Low (Range 2)
Inlet Liquid Temp High (Range 2)
Inlet Liquid Flow Rate Normal (Range 2)
Inlet Liquid Flow Rate Minor (Range 2)
Inlet Liquid Flow Rate Major (Range 2)
Inlet Liquid Flow Rate Critical (Range 2)
Per Node LPM (Range 2)
Per Switch LPM (Range 2)

(NOTE: Output is expandable in terms of number of ranges. Use the -h command to find the
appropriate key.)
Syntax:
RScmCli# set smrack config flowrate [-h] [-k PARAMETER_KEY] [-v
PARAMETER_VALUE] …

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 285

SW: RSCM CLI

Note: This command allows for different configuration parameters to be updated. The system may
operate in an undefined state if inconsistent or invalid parameters are entered. Use caution when
using this command. It is recommended that all configuration changes be entered using a single
command to avoid incoherent or consistent settings being activated on a rack.

SW: RSCM CLI

Arguments:
-h, --help
show this
-k
Parameter
available keys, use the
-v
Parameter

help message and exit.
key to be updated. To see the complete list of
“help” option.
value to be updated.

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# set smrack config flowrate -k 2 -v 183 -k 3 -v 46 -k 6 -v 15
Ramp-Up Time (seconds): 183.0
Inlet Liquid Temp Critical: 46
Inlet Liquid Temp Low (Range 1): 15
Completion Code: Success
RScmCli# set smrack config flowrate -h
usage: set smrack config flowrate [-h] -k KEYS -v VALS

9.7show smrack config pressure
Description:
This command displays the liquid pressure threshold and configuration settings for Smart IT Rack.
Syntax:
RScmCli# show smrack config pressure [-h]

Arguments:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 286

SW: RSCM CLI

optional arguments:
-h, --help show this help message and exit
-k KEYS
All parameters are required inputs. Keys: 1. Version 2.
Ramp-Up Time (seconds) 3.Inlet Liquid Temp Critical 4.Bypass Mode Enable
5.Drip Pan Local Action Enable 6. Inlet Liquid Temp Low (Range 1) 7.
Inlet Liquid Temp High (Range 1) 8. Inlet Liquid Flow Rate Normal (Range
1) 9. Inlet Liquid Flow Rate Minor (Range 1) 10. Inlet Liquid Flow Rate
Major (Range 1) 11. Inlet Liquid Flow Rate Critical (Range 1) 12. Per
Node LPM (Range 1) 13. Per Switch LPM (Range 1) 14. Inlet Liquid Temp
Low (Range 2) 15. Inlet Liquid Temp High (Range 2) 16. Inlet Liquid Flow
Rate Normal (Range 2) 17. Inlet Liquid Flow Rate Minor (Range 2) 18.
Inlet Liquid Flow Rate Major (Range 2) 19. Inlet Liquid Flow Rate
Critical (Range 2) 20. Per Node LPM (Range 2) 21. Per Switch LPM (Range
2) – output is expandable based on number of ranges.
-v VALS
flowrate value

SW: RSCM CLI

-h, --help

Classified
as
Microsoft
Highly
Confidenti
al

show this help message and exit.

Example output:
RScmCli# show smrack config pressure
Inlet Liquid Pressure Normal: 46
Inlet Liquid Pressure Minor: 62
Inlet Liquid Pressure Major: 7
Inlet Liquid Pressure Critical: 74
Completion Code: Success

9.8set smrack config pressure
Description:
This command updates the active liquid pressure threshold and configuration settings for Smart IT
Rack.
Note: This command allows for different configuration parameters to be updated. The system may
operate in an undefined state if inconsistent or invalid parameters are entered. Use caution when
using this command. It is recommended that all configuration changes be entered using a single
command to avoid incoherent or consistent settings being activated on a rack.
KEY

Liquid Pressure Configuration Settings

1

Inlet Liquid Pressure Normal

2

Inlet Liquid Pressure Minor

3

Inlet Liquid Pressure Major

4

Inlet Liquid Pressure Critical

SW: RSCM CLI

Syntax:
RScmCli# set smrack config pressure [-h] [-k PARAMETER_KEY] [-v
PARAMETER_VALUE] …

Arguments:
-h, --help
show this
-k
Parameter
available keys, use the
-v
Parameter

help message and exit.
key to be updated. To see the complete list of
“help” option.
value to be updated.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 287

SW: RSCM CLI

Example output:
RScmCli# set smrack config pressure -k 1 -v 47 -k 2 -v 63 -k 3 -v 8
Inlet Liquid Pressure Normal: 47
Inlet Liquid Pressure Minor: 63
Inlet Liquid Pressure Major: 8
Completion Code: Success

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set smrack config pressure -h
usage: set smrack config pressure [-h] -k KEYS -v VALS
optional arguments:
-h, --help show this help message and exit
-k KEYS
All parameters are required inputs. Keys: 1. Inlet Liquid
Pressure Normal 2. Inlet Liquid Pressure Minor 3.Inlet
Liquid Pressure Major 4.Inlet Liquid Pressure Critical
-v VALS
pressure value

9.9set smrack config reset
Description:
This command applies the factory default Smart IT Rack configuration to the system. This command is
conditional on the version number as to which set of defaults it calls. If the version number is not
valid, it will default to GB200 defaults
Syntax:
RScmCli# show smrack config reset [-h]

Arguments:
show this help message and exit.

SW: RSCM CLI

-h, --help

Example output:
RScmCli# show smrack config reset
Version: 3.01
Ramp-Up Time (seconds): 180
Inlet Liquid Temp Critical: 45
Bypass Mode Enable: 0
Drip Pan Local Action Enable: 0
Inlet Liquid Temp Low (Range 1): 0
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 288

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

SW: RSCM CLI

Inlet Liquid Temp High (Range 1): 10
Inlet Liquid Flow Rate Normal (Range 1): 74
Inlet Liquid Flow Rate Minor (Range 1): 67
Inlet Liquid Flow Rate Major (Range 1): 63
Inlet Liquid Flow Rate Critical (Range 1): 59
Per Node LPM (Range 1): 2.1
Per Switch LPM (Range 1): 0.0
Inlet Liquid Temp Low (Range 2): 10
Inlet Liquid Temp High (Range 2): 28
Inlet Liquid Flow Rate Normal (Range 2): 85
Inlet Liquid Flow Rate Minor (Range 2): 77
Inlet Liquid Flow Rate Major (Range 2): 72
Inlet Liquid Flow Rate Critical (Range 2): 68
Per Node LPM (Range 2): 3.1
Per Switch LPM (Range 2): 0.0
Inlet Liquid Temp Low (Range 3): 28
Inlet Liquid Temp High (Range 3): 35
Inlet Liquid Flow Rate Normal (Range 3): 112
Inlet Liquid Flow Rate Minor (Range 3): 101
Inlet Liquid Flow Rate Major (Range 3): 95
Inlet Liquid Flow Rate Critical (Range 3): 90
Per Node LPM (Range 3): 4.3
Per Switch LPM (Range 3): 0.0
Inlet Liquid Temp Low (Range 4): 35
Inlet Liquid Temp High (Range 4): 40
Inlet Liquid Flow Rate Normal (Range 4): 137
Inlet Liquid Flow Rate Minor (Range 4): 123
Inlet Liquid Flow Rate Major (Range 4): 118
Inlet Liquid Flow Rate Critical (Range 4): 101
Per Node LPM (Range 4): 6.0
Per Switch LPM (Range 4): 0.0
Inlet Liquid Temp Low (Range 5): 40
Inlet Liquid Temp High (Range 5): 45
Inlet Liquid Flow Rate Normal (Range 5): 169
Inlet Liquid Flow Rate Minor (Range 5): 152
Inlet Liquid Flow Rate Major (Range 5): 145
Inlet Liquid Flow Rate Critical (Range 5): 125
Per Node LPM (Range 5): 7.5
Per Switch LPM (Range 5): 0.0
Inlet Liquid Pressure Normal: 42
Inlet Liquid Pressure Minor: 60
Inlet Liquid Pressure Major: 66
Inlet Liquid Pressure Critical: 72
Completion Code: Success

9.10 set smrack config custom
Description:
This command sets the smart rack config from a input file in the correct format. Command will fail if
the file does not have the correct format.
Syntax:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 289

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set smrack config filepath [-h] -f FILEPATH

Arguments:
-h, --help
-f FILEPATH

show this help message and exit
File path of the JSON file with expected format

Example Output:

9.11 set smrack config addrange
Description:
This command adds an additional temperature range to the flowrate config. The lower temperature
band must be higher than the lower band for the next highest range. The temperature bounds of the
surrounding range will adjust to not overlap or leave a gap.

Syntax:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 290

SW: RSCM CLI

RScmCli# set smrack config custom -f
/usr/srvroot/shared/smartitrack_custom_test_config.json
Version: 99.99
Ramp-Up Time (seconds): 120
Inlet Liquid Temp Critical: 35
Bypass Mode Enable: 1
Drip Pan Local Action Enable: 1
Inlet Liquid Temp Low (Range 1): 15
Inlet Liquid Temp High (Range 1): 25
Inlet Liquid Flow Rate Normal (Range 1): 50
Inlet Liquid Flow Rate Minor (Range 1): 45
Inlet Liquid Flow Rate Major (Range 1): 40
Inlet Liquid Flow Rate Critical (Range 1): 35
Per Node LPM (Range 1): 5.5
Per Switch LPM (Range 1): 2.5
Inlet Liquid Temp Low (Range 2): 25
Inlet Liquid Temp High (Range 2): 35
Inlet Liquid Flow Rate Normal (Range 2): 80
Inlet Liquid Flow Rate Minor (Range 2): 75
Inlet Liquid Flow Rate Major (Range 2): 70
Inlet Liquid Flow Rate Critical (Range 2): 65
Per Node LPM (Range 2): 8.0
Per Switch LPM (Range 2): 3.0
Inlet Liquid Pressure Normal: 55
Inlet Liquid Pressure Minor: 70
Inlet Liquid Pressure Major: 85
Inlet Liquid Pressure Critical: 95
Completion Code: Success

SW: RSCM CLI

RScmCli# set smrack config addrange [-h] -l INLET_TEMP_1 -g INLET_TEMP_2
-n FLOWRATE_NORMAL -m FLOWRATE_MINOR -j FLOWRATE_MAJOR -c
FLOWRATE_CRITICAL -d LPM_PER_NODE -s LPM_PER_SWITCH

Classified
as
Microsoft
Highly
Confidenti
al

Arguments:
-h, --help
-l TEMP_LOW
-g TEMP_HIGH
-n FLOWRATE_NORMAL
-m FLOWRATE_MINOR
-j FLOWRATE_MAJOR
-c FLOWRATE_CRITICAL
-d LPM_PER_NODE
-s LPM_PER_SWITCH

show this help message and exit
Low temperature for new range
High temperature for new range
Normal flowrate for new range
Minor flowrate for new range
Major flowrate for new range
Critical flowrate for new range
LPM per node for new range
LPM per switch for new range

RScmCli# set smrack config addrange -l 47 -g 49 -n 100 -m 95 -j 90 -c 85
-d 3.0 -s 1.0
Version: 2.4
Ramp-Up Time (seconds): 184.0
Inlet Liquid Temp Critical: 43
Bypass Mode Enable: 0
Drip Pan Local Action Enable: 1
Inlet Liquid Temp Low (Range 1): 18
Inlet Liquid Temp High (Range 1): 28
Inlet Liquid Flow Rate Normal (Range 1): 29
Inlet Liquid Flow Rate Minor (Range 1): 26
Inlet Liquid Flow Rate Major (Range 1): 24
Inlet Liquid Flow Rate Critical (Range 1): 23
Per Node LPM (Range 1): 3.0
Per Switch LPM (Range 1): 1.0
Inlet Liquid Temp Low (Range 2): 30
Inlet Liquid Temp High (Range 2): 43
Inlet Liquid Flow Rate Normal (Range 2): 82
Inlet Liquid Flow Rate Minor (Range 2): 74
Inlet Liquid Flow Rate Major (Range 2): 70
Inlet Liquid Flow Rate Critical (Range 2): 65
Per Node LPM (Range 2): 7.0
Per Switch LPM (Range 2): 3.0
Inlet Liquid Temp Low (Range 3): 47
Inlet Liquid Temp High (Range 3): 49
Inlet Liquid Flow Rate Normal (Range 3): 100
Inlet Liquid Flow Rate Minor (Range 3): 95
Inlet Liquid Flow Rate Major (Range 3): 90
Inlet Liquid Flow Rate Critical (Range 3): 85
Per Node LPM (Range 3): 3.0
Per Switch LPM (Range 3): 1.0
Completion Code: Success
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 291

SW: RSCM CLI

Example Output:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

9.12 set smrack config removerange
Description:
This command removes the top temperature range and adjusts bounds of the surrounding ranges to
not overlap or leave a gap.
Syntax:
RScmCli# set smrack config removerange [-h]

Arguments:
-h, --help

show this help message and exit

Example Output:

SW: RSCM CLI

RScmCli# set smrack config removerange
Version: 2.4
Ramp-Up Time (seconds): 184.0
Inlet Liquid Temp Critical: 43
Bypass Mode Enable: 0
Drip Pan Local Action Enable: 1
Inlet Liquid Temp Low (Range 1): 18
Inlet Liquid Temp High (Range 1): 28
Inlet Liquid Flow Rate Normal (Range 1): 29
Inlet Liquid Flow Rate Minor (Range 1): 26
Inlet Liquid Flow Rate Major (Range 1): 24
Inlet Liquid Flow Rate Critical (Range 1): 23
Per Node LPM (Range 1): 3.0
Per Switch LPM (Range 1): 1.0
Inlet Liquid Temp Low (Range 2): 30
Inlet Liquid Temp High (Range 2): 43
Inlet Liquid Flow Rate Normal (Range 2): 82
Inlet Liquid Flow Rate Minor (Range 2): 74
Inlet Liquid Flow Rate Major (Range 2): 70
Inlet Liquid Flow Rate Critical (Range 2): 65
Per Node LPM (Range 2): 7.0
Per Switch LPM (Range 2): 3.0
Completion Code: Success

9.13 Set valve modbus
9.13.1Set valve modbus read
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 292

SW: RSCM CLI

Description:
Reads Modbus registers from the energy valve.
Note: The Modbus system uses the Modbus over RTU protocol by default. There is no distinction
between data types (Discrete Inputs, Coils, Input Registers and Holding Registers). Therefore, all
data can be accessed with using the Holding Register.

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# set valve modbus read [-h] [-t {1,2,3}] [-r START_REFERENCE]
[-c REG_COUNT] [-f {int,hex,asc}] [-g
SCALE]

Arguments:
-h, --help
show this help message and exit
-t {1,2,3}
1=input status (FC02); 2=holding reg (FC03);
3=input reg (FC04) (default=2)
-r START_REFERENCE First register to read; set -c for number of
contiguous registers to read (0-65535, default=0 - NOTE for holding
registers the first register is register 001)
-c REG_COUNT
Number of registers to read (1-123, default=1)
-f {int,hex,asc}
Value display format (default=int)
-g SCALE
Multiplier scale (only for int data) (default=1.0)

Example output:
Example output:
RScmCli# set valve modbus read -t 2 -r 109 -c 1
ModbusReadResult: [109] 00120
Completion Code: Success
RScmCli# set valve modbus read -t 2 -r 109 -c 1 -f hex
ModbusReadResult: [109] 0078
Completion Code: Success

SW: RSCM CLI

RScmCli# set valve modbus read -t 2 -r 109 -c 1 -f asc
ModbusReadResult: [109] x
Completion Code: Success
RScmCli# set valve modbus read -t 2 -r 8 -c 1 -g 0.1
ModbusReadResult: [008]
0.000
Completion Code: Success

9.13.2Set valve modbus write
Description:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 293

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Writes Modbus registers on the Energy Valve.
Note: The Modbus system uses the Modbus over RTU protocol by default.
Syntax:
RScmCli# set valve modbus write [-h] -t {6} [-r START_REFERENCE] [-c
REG_COUNT] -d DATA

Arguments:
-h, --help
show this help message and exit
-t {6}
6=write regs (FC16)
-r START_REFERENCE First register to write; set -c for number of
contiguous registers to write (0-204, default=0 - NOTE for holding
registers the first register is register 001)
-c REG_COUNT
Number of registers to write (1-123, default=1)
-d DATA
Values to write to specified registers. Ex: [324,
123, 657] or path of text file containing one register value for
each line

Example output:
RScmCli# set valve modbus write -t 6 -r 109 -c 1 -d [121]
ModbusWriteResult: [109] 00121
Completion Code: Success

9.14 show valve fwversion
Description: Reads the firmware version of the valve over Redfish.
Syntax:
RScmCli# show valve fwversion

-h, --help

SW: RSCM CLI

Arguments:
show this help message and exit

Example output:
RScmCli# show valve fwversion
FirmwareVersion: 01.05.0002
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 294

SW: RSCM CLI

9.15 show valve info
Description: Reads the firmware version/model name/platform of the valve over Redfish.

Classified
as
Microsoft
Highly
Confidenti
al

Syntax:
RScmCli# show valve info

Arguments:
-h, --help

show this help message and exit

Example output:
RScmCli# show valve info
FirmwareVersion: 01.07.0000
ModelName: EV200+ARX-E MSFT
Platform: imx6ull2-secure-ksp0655-oc15
Completion Code: Success

9.16 set smrack fwupdate
Description:
This command updates the firmware of the energy valve.
To update firmware of the CDU Controller.
Firmware binary file is to be retrieved from /usr/srvroot/shared on the R-SCM file system.
Note: This command is not asynchronous and will lock the interface until the firmware update process
is complete.

Syntax:
RScmCli# set smrack fwupdate [-h] -f FILENAME [-u USER] [-p PASSWORD]

Arguments:
-h, --help
-f
-u

show this help message and exit.
File name of firmware binary file
User name for the energy valve credentials

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 295

SW: RSCM CLI

Note: The energy valve is shipped with default credentials that are not a valid credential, and will
need to be updated manually. Currently, there is no API to update the credentials so this action must
be done directly with the energy valve interface. Therefore, this API will not be fully functional until
the credential setting / rotation feature is implemented.

SW: RSCM CLI

-p

Classified
as
Microsoft
Highly
Confidenti
al

Password for the energy valve credentials

Example output:
RScmCli# set smrack fwupdate -f energy_valve_fw.dat
Starting firmware update.
Firmware update complete.
Completion Code: Success

10 PCU Command
show pcu info
show pcu reading
show pcu status
show pcu limits
show pcu eventlog
show pcu update
show pcu state
show pcu chargelog
set pcu raw read
set pcu raw write
set pcu limits
set pcu update
set pcu fanspeed
set pcu clear
SW: RSCM CLI

•
•
•
•
•
•
•
•
•
•
•
•
•
•

10.1 show pcu info
Description:
This command displays pcu information
Syntax:
RScmCli# show pcu info -i 1

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 296

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Arguments:
-h, --help
show this help message and exit.
-i pcu-id pcu-id

Example output:
RScmCli# show pcu info -i 1
MFR ID: DELTA MFR
Model: DPS-22500AB A
MFR Revision: S1
MFR Serial Number: P866344140045097
MS Device ID: M1318663-900
PCU FW Version: 2.01.30*********
Completion Code: Success

10.2 show pcu reading
Description:
This command displays pcu power reading
Syntax:
RScmCli# show pcu reading -i 1

Arguments:
-h, --help
show this help message and exit.
-i pcu-id pcu-id

Example output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

RScmCli# show pcu reading -i 1
PCU State of Charge: 87
Input Voltage (V): 51.75
Input Current (A): 10.5
Input Power (P): 543
Output Voltage (V): 51.75
Output Current (A): 0.0
Output Power (P): 0
Fan 1 Speed (RPM): 15450
Fan 2 Speed (RPM): 15450
Fan 3 Speed (RPM): 15390
Fan 4 Speed (RPM): 15420
Fan 5 Speed (RPM): 15360
Fan 6 Speed (RPM): 15390
Fan 7 Speed (RPM): 15420
Page | 297

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Fan 8 Speed (RPM): 15450
Ambient Temp (DegC): 18.0
Hot Spot Temp (DegC): 38.0
Gen Lic 0 Temp (DegC): 20.0
Gen Lic 1 Temp (DegC): 19.0
Gen Lic 2 Temp (DegC): 18.5
Gen Lic 3 Temp (DegC): 19.0
Gen Lic 4 Temp (DegC): 19.5
Gen Lic 5 Temp (DegC): 19.5
Gen Lic 6 Temp (DegC): 19.5
Gen Lic 7 Temp (DegC): 20.0
Completion Code: Success

10.3 show pcu status
Description:
This command displays pcu status registers
Syntax:
RScmCli# show pcu status -i 1

Arguments:
-h, --help
show this help message and exit.
-i pcu-id pcu-id

Example output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

SW: RSCM CLI

RScmCli# show pcu status -i 1
PCU Status: 8192
VOUT Status: 0
IOUT Status: 0
Temp Status: 0
CML Status: 0
Mfr Status: 0
Security Status: 0
Shtdown Event: 0
Fan 1 Status: 0
Fan 2 Status: 0
Fan 3 Status: 0
Fan 4 Status: 0
Fan 5 Status: 0
Fan 6 Status: 0
Fan 7 Status: 0
Fan 8 Status: 0
Page | 298

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

10.4 show pcu limits
Description:
This command displays pcu throttle statistics
Syntax:
RScmCli# show pcu limits -i 1

Arguments:
-h, --help
show this help message and exit.
-i pcu-id pcu-id

Example output:
RScmCli# show pcu limits -i 1
Output OV Fault Limit: 62.0
Output OT Fault Limit: 60.0
Output UV Fault Limit: 33.0
Input OV Fault Limit: 54.0
Input UV Fault Limit: 43.0
Input OV Warning Limit: 53.0
Input UV Warning Limit: 44.0
Output OT Warning Limit: 55.0
Completion Code: Success

SW: RSCM CLI

10.5 show pcu eventlog
Description:
This command displays pcu eventlog
Syntax:
RScmCli# show pcu eventlog -i 1

Arguments:
-h, --help

show this help message and exit.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 299

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

-i pcu-id pcu-id

Example output:
RScmCli# show pcu eventlog -i 1
Event 1:
Event Number: 1
Total Realtime Counter: 2941440
Realtime Counter: 16793880
PCU Status: 0
VOUT Status: 0
IOUT Status: 0
Temp Status: 257
CML Status: 3328
Mfr Status: 0
Security Status: -5596
Shtdown Event: 2085
Fan 1 Status: 204
Fan 2 Status: 36
Fan 3 Status: 234
Fan 4 Status: 36
Fan 5 Status: 8
Fan 6 Status: 37
Fan 7 Status: 8
Fan 8 Status: 37
PCU State of Charge: -5596
Input Voltage (V): -55.96
Input Current (A): 1410.0
....

10.6 show pcu update
Description:
This command displays pcu firmware update status
Syntax:

SW: RSCM CLI

RScmCli# show pcu update -i 1

Arguments:
-h, --help
show this help message and exit.
-i pcu-id pcu-id

Example output:
RScmCli# show pcu update -i 1
PCU FW update status: Programming or Bootload timed out cause Exit.
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 300

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Completion Code: Success

10.7 show pcu state
Description:
This command displays pcu state
Syntax:
RScmCli# show pcu state -i 1

Arguments:
-h, --help
show this help message and exit.
-i pcu-id pcu-id

Example output:
RScmCli# show pcu state -i 1
Present State: Present
Hardware States: 0045 [Charging, Enable On]
Completion Code: Success

10.8 show pcu chargelog
Description:
This command displays pcu chargelog
Syntax:
SW: RSCM CLI

RScmCli# show pcu chargelog -i 1

Arguments:
-h, --help
show this help message and exit.
-i pcu-id pcu-id

Example output:
RScmCli# show pcu chargelog -i 1
Event 1:
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 301

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

EventNumber: 1
Total Rt Counter: 45161
Avg Soc: 91
Event 2:
EventNumber: 2
Total Rt Counter: 45106
Avg Soc: 90
Event 3:
EventNumber: 3
Total Rt Counter: 45117
Avg Soc: 53
Event 4:
EventNumber: 4
Total Rt Counter: 45128
Avg Soc: 85
Event 5:
EventNumber: 5
Total Rt Counter: 45139
Avg Soc: 86
Event 6:
EventNumber: 6
Total Rt Counter: 45150
Avg Soc: 91
Completion Code: Success

10.9 set pcu raw read
Description:
Reads raw data on Modbus connection with PCU controller.
Syntax:
RScmCli# show pcu info -i 1

-h, --help
show this help message and exit.
-i pcu-id pcu-id
-t {3,4} 3=holding reg (FC03); 4=input reg (FC04) (default=3)
-r START_REFERENCE First register to read; set -c for number of
contiguous registers to read (0-65535, default=0 - NOTE for holding
registers the first register is register 001)
-c REG_COUNT Number of registers to read (1-123, default=1)

Example output:

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 302

SW: RSCM CLI

Arguments:

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

RScmCli# set pcu raw read -i 1 -t 3 -c 100 -c 1
ModbusReadResult: [000] 014B4
Completion Code: Success

10.10 ......... set pcu raw write
Description:
Writes raw data over Modbus connection with PCU controller.
Syntax:
RScmCli# set pcu raw write -i 1 -t 6 -c 100 -c 1 -d [5300

Arguments:
-h, --help show this help message and exit
-i pcu-id pcu-id
-t {6} 6=write regs (FC6)
-r START_REFERENCE First register to write; set -c for number of
contiguous registers to write (0-65535, default=0 - NOTE for holding
registers the first register is register 001)
-c REG_COUNT Number of registers to write (1-123, default=1)
-d DATA Values to write to specified registers. Ex: [324, 123, 657] or
path of text file containing one register value for each line

Example output:
RScmCli# set pcu raw write -i 1 -t 6 -c 100 -c 1 -d [5300]
ModbusReadResult: [000] 014B4
Completion Code: Success

10.11 ......... set pcu limits
SW: RSCM CLI

Description:
This command set pcu waring limit
Syntax:
RScmCli# set pcu limits -i 1 -t 0 -l 5000

Arguments:
-h, --help show this help message and exit
-i pcu-id pcu-id
-t {0,1,2} 0=Input OV Warning Limit, 1=Input UV Warning Limit, 2=Output
Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 303

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

OT Warning Limit
-l LIMIT Set PCU Waring limit

Example output:
RScmCli# set pcu limits -i 1 -t 0 -l 5000
Input OV Warning Limit: 50.0
Completion Code: Success

10.12 ......... set pcu update
Description:
This command starts the firmware update of pcu
Syntax:
RScmCli# set pcu update -i 1 -f test.bin

Arguments:
-h, --help
-i pcu-id
-f FILE
-o
-r

show this help message and exit
pcu-id
pcu update file
force pcu update
Recovery PCU Fw

Example output:

SW: RSCM CLI

RScmCli# set pcu update -i 1 -f test.bin
PCU firmware in process, please check show pcu update
Completion Code: Success

10.13 ......... set pcu fanspeed
Description:
This command set fan speed
Syntax:
RScmCli# set pcu fanspeed -i 1 -s 20

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 304

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Arguments:
-h, --help
-i pcu-id
-s FANSPEED

show this help message and exit
pcu-id
Set fan speed (duty cycle) to PCU fan (0-100)

Example output:
RScmCli# set pcu fanspeed -i 1 -s 20
Fan 1 Speed (RPM): 15270
Fan 2 Speed (RPM): 15210
Fan 3 Speed (RPM): 15240
Fan 4 Speed (RPM): 15270
Fan 5 Speed (RPM): 15240
Fan 6 Speed (RPM): 15240
Fan 7 Speed (RPM): 15270
Fan 8 Speed (RPM): 15270
Completion Code: Success

10.14 ......... set pcu clear
Description:
Pcu clear faults
Syntax:
RScmCli# set pcu clear -i 1

Arguments:
show this help message and exit
pcu-id

SW: RSCM CLI

-h, --help
-i pcu-id

Example output:
RScmCli# set pcu clear -i 1
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 305

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

11 NVSwitch Commands
•
•
•

show nvswitch status
set nvswitch on
set nvswitch off

11.1 show nvswitch status
Description:
This command retrieves nvswitch power state
Syntax:
RScmCli# show nvswitch status –i 10

Commented [BI26]: Shouldn't this be show, not set? 13.103
(below) is the set command.
Commented [RK27R26]: @Ammar Farooq Please correct.

Arguments:

Commented [AF28R26]: @Randy @Brandon fixed

-h, --help
show this help message and exit
-i server-id
server-id

Example output:
RScmCli# show nvswitch status –i 10
PowerState: On
Completion Code: Success

11.2 set nvswitch on
SW: RSCM CLI

Description:
This command performs ForceOn power op on nvswitch
Syntax:
RScmCli# set nvswitch on –i 10

Arguments:
-h, --help show this help message and exit
-i server-id
server-id

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 306

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Example output:
RScmCli# set nvswitch on -i 10
Completion Code: Success

11.3 set nvswitch off
Description:
This command performs ForceOff power op on nvswitch
Syntax:
RScmCli# set nvswitch off –i 10

Arguments:
-h, --help show this help message and exit
-i server-id
server-id

Example output:
RScmCli# set nvswitch off -i 10
Completion Code: Success

12 Appendix: Commonly Used of Acronyms

SW: RSCM CLI

This section provides definitions of acronyms used in the RSCM system specifications.

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 307

Classified as Microsoft Highly Confidential

ACPI – advanced configuration and power
interface

ECC – error-correcting code

AHCI – advanced host controller interface

EEPROM - electrically erasable programmable
read-only memory

AHJ – authority having jurisdiction

EIA – Electronic Industries Alliance

ANSI – American National Standards Institute

EMC – electromagnetic compatibility

API – application programming interface

EMI – electromagnetic interference

ASHRAE – American Society of Heating,
Refrigerating and Air Conditioning Engineers

FRU – field replaceable unit

ASIC – application-specific integrated circuit
BCD – binary-coded decimal

FTP – file transfer protocol
GPIO – general purpose input output
GUID – globally unique identifier

BIOS – basic input/output system

HBI – high business intelligence

BMC – baseboard management controller

HCK – Windows Hardware Certification Kit

CFM – cubic feet per minute (measure of
volume flow rate)

ard

CM – Chassis Manager

HMD – hardware monitoring device

CMOS – complementary metal–oxide–
semiconductor

HT – hyperthreading

COLO – co-location

IBC – international building code

CTS – clear to send

IDE – integrated development environment

DCMI – Data Center Manageability Interface

IEC - International Electrotechnical Commission

DDR3 – double data rate type 3

IOC – I/O controller

DHCP – dynamic host configuration protocol
DIMM – dual inline memory module

IPMI – intelligent platform management
interface

DPC - DIMMs per memory channel

IPsec – IP security

I2C – inter-integrated circuit

DRAM – Dynamic Random Access Memory

ITPAC – IT pre-assembled components

DSR – data set ready

JBOD – “just a bunch of disks”

DTR – data terminal ready

KCS – keyboard controller style

CONFIDENTIAL
Classified as Microsoft Highly Confidential

SW: RSCM CLI

Classified
as
Microsoft
Highly
Confidenti
al

L2 – layer 2

POST – power-on self-test

LAN – local area network

PSU – power supply unit

LFF – large form factor

PWM – pulse-width modulation

LPC – low pin count

PXE – preboot execution environment

LS – least significant

QDR – quad data rate

LUN – logical unit number

QFN – quad flat package no-lead

MAC – media access control

QPI – Intel QuickPath Interconnect

MDC – modular data center containers

QSFP – Quad small form-factor pluggable

MLC – multi-level call

RAID – redundant array of independent disks

MTBF – mean time between failures

REST - representational state transfer

MUX - multiplexer

RM – Rack Manager

NIC – network interface card

RMA – remote management agent

NUMA – non-uniform memory access

ROC – RAID-on-chip controller

OOB – out of band

RSS – receive-side scaling

OSHA - Occupational Safety & Health
Administration

RTS – request to send

PCB – printed circuit board
PCIe – peripheral component interconnect
express
PCH – platform control hub
PDB – power distribution backplane
PDU – power distribution unit
Ph-ph – phase to phase
Ph-N – phase to neutral
PNP – plug and play

RU – rack unit
RxD – received data
SAS – serial-attached small computer system
interface (SCSI)
SATA – serial AT attachment
SCK – serial clock
SCSI – small computer system interface
SDA – serial data signal
SDR – sensor data record
SFF – small form factor
SFP - small form-factor pluggable

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 309

SW: RSCM CLI

OTS – off the shelf

SW: RSCM CLI

SMBUS – systems management bus

TxD – transmit data

SMBIOS – systems management BIOS

U – rack unit

SOL – serial over LAN

UART – universal asynchronous
receiver/transmitter

SPI – serial peripheral interface
SSD – solid-state drive
TB – tray backplane
TDP – thermal design power
TM – tray midplane
TOR – top of rack

Classified
as
Microsoft
Highly
Confidenti
al

UEFI – unified extensible firmware interface
UL – Underwriters Laboratories
UPS – uninterrupted power supply
Vpp – voltage peak to peak
WMI –Windows Management Interface

TPM – trusted platform module
PSU – Power Supply Unit

13 Common CLI Uses
13.1 Setting up Rsyslog streaming for RSCM and BMC
Description:
Steps on how to set up and run the RSCM Rsyslog functionality as well as streaming BMC Syslog traffic.

Configuring Rsyslog server:
SW: RSCM CLI

The IP to the Rsyslog server must be specified using the following command:
RScmCli# set manager rsyslog -s SERVER
Completion Code: Success
Example:
RScmCli# set manager rsyslog -s 10.10.10.10
Completion Code: Success

Open Cloud Server System Specification: Software—Rack SCM CLI
Classified as Microsoft Highly Confidential

Page | 310

SW: RM CLI

Classified
as
Microsoft
Highly
Confidenti
al

Enable the userconfigs:
This enables the RM Rsyslog to start streaming to the Rsyslog server.
RScmCli# set manager userconfigs -k RmSyslogFeatureSwitch -v 1
Completion Code: Success

This enables the Auditd log to be streamed with Rsyslog. Note that this will only function if
RmSyslogFeatureSwitch is enabled.
RScmCli# set manager userconfigs -k RmAuditlogFeatureSwitch -v 1
Completion Code: Success

This enables BMC Syslog to be streamed onto the Rsyslog server.
RScmCli# set manager userconfigs -k BmcLogFeatureSwitch -v 1

SW: RM CLI

Completion Code: Success

Powershelf CLI Specifications Server System
Classified as Microsoft Highly Confidential

Page | 311
